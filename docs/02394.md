# å°„æµç ”ç©¶â€¦ğŸ’–ç¡¬ä»¶ Nodebots å’Œ Johnny-Five å…¥é—¨

> åŸæ–‡:[https://dev.to/dkundel/js-ç¡¬ä»¶å…¥é—¨-nodebots-and-Johnny-five-hk](https://dev.to/dkundel/js--hardware--getting-started-with-nodebots-and-johnny-five-hk)

å¯¹äºä¸€äº›äººæ¥è¯´ï¼Œå¼€å§‹ç¡¬ä»¶é»‘å®¢å¯èƒ½æ˜¯ç›¸å½“å¯æ€•çš„ã€‚å¯¹äºå¤§å¤šæ•°å¼€å‘è€…æ¥è¯´ï¼Œç”µå­ä¸–ç•Œæ˜¯å®Œå…¨é™Œç”Ÿçš„ï¼›æ­¤å¤–ï¼Œå®ƒè¦æ±‚ä½ å†™ C/C++ï¼Œè¿™æ˜¯æœ‰æ•ˆçš„ï¼Œä½†ä¸æ˜¯æ¯ä¸ªäººéƒ½æ„Ÿåˆ°èˆ’æœã€‚ç„¶è€Œï¼Œ [Nodebots](http://nodebots.io/) è¿åŠ¨æ˜¯ä½¿ç”¨ JavaScript å¼€å§‹ç¡¬ä»¶å¼€å‘çš„ä¸€ä¸ªå¥½æ–¹æ³•ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘æƒ³é€šè¿‡ä¸€äº›éå¸¸åŸºæœ¬çš„ä¸œè¥¿æ¥å¼•å¯¼ä½ å¼€å§‹ã€‚

### [](#javascript-ampamp-hardware-how)JavaScript & &ç¡¬ä»¶ï¼Ÿæ€ä¹ˆä¼šï¼Ÿ

[![JavaScript and hardware equals nodebots](../Images/d736cf5fe4b4799fe3fc804747c089e9.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--siCf2Jsf--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/iuhjl9p4o3kcdi7fhxch.png)

æœ‰å¾ˆå¤šä¸åŒçš„é¡¹ç›®æ—¨åœ¨ç”¨ JavaScript è¿›è¡Œç¡¬ä»¶å¼€å‘ã€‚æœ‰äº›é…å¤‡äº†ç‰¹æ®Šçš„ç¡¬ä»¶ï¼Œå¦‚ [Tessel](https://tessel.io/) æˆ– [Espruino](https://www.espruino.com/) ã€‚è¿™ä¸¤ä¸ªéƒ½æ˜¯å¾ˆæ£’çš„é¡¹ç›®ï¼Œä½†åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†å…³æ³¨å¦ä¸€ä¸ªé€‰é¡¹ã€‚

æˆ‘ä»¬å°†ä½¿ç”¨çš„é€‰é¡¹æ˜¯ npm æ¨¡å— [`johnny-five`](http://johnny-five.io/) ã€‚Johnny-Five ä¸å±€é™äºæŸäº›ç¡¬ä»¶ï¼Œè€Œæ˜¯ä½¿ç”¨å„ç§ I/O æ’ä»¶[æ”¯æŒå„ç§ä¸åŒçš„å¾®æ§åˆ¶å™¨å¹³å°(åŒ…æ‹¬ Tessel)](http://johnny-five.io/platform-support/) ã€‚å”¯ä¸€çš„ç¼ºç‚¹æ˜¯å…¶ä¸­ä¸€äº›å¹³å°(å¦‚ Arduino)ä¸å…è®¸æ‚¨ç›´æ¥åœ¨å¾®æ§åˆ¶å™¨ä¸Šæ‰§è¡Œ JS ä»£ç ã€‚ç›¸åï¼Œæ‚¨å¯ä»¥åœ¨â€œä¸»æœºç³»ç»Ÿâ€ä¸Šæ‰§è¡Œå®ƒã€‚

Arduino çš„å·¥ä½œæ–¹å¼æ˜¯ï¼Œä½¿ç”¨ Node.js åœ¨æ‚¨çš„â€œä¸»æœºç³»ç»Ÿâ€(ä¾‹å¦‚ï¼Œæ‚¨çš„è®¡ç®—æœº)ä¸Šæ‰§è¡Œ JS ä»£ç ï¼Œç„¶å [`johnny-five`](https://npm.im/johnny-five) æ¨¡å—é€šè¿‡ [`serialport`](https://npm.im/serialport) æ¨¡å—å°†æ“ä½œå‘é€åˆ°è¿è¡Œ [`firmata`å›ºä»¶](https://github.com/firmata/arduino/)çš„ Arduinoï¼Œè¯¥å›ºä»¶ç”¨äºè¿œç¨‹æ§åˆ¶ Arduinoã€‚è¿™æ ·ï¼Œå½“ç¡¬ä»¶è¿æ¥åˆ°æˆ‘ä»¬çš„è®¡ç®—æœºæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å®Œå…¨æ§åˆ¶å®ƒã€‚

### [](#requirements)è¦æ±‚

å¯¹äºæœ¬æ•™ç¨‹ï¼Œä½ éœ€è¦ä¸€äº›ä¸œè¥¿ã€‚é¦–å…ˆä½ éœ€è¦åœ¨ä½ çš„ç”µè„‘ä¸Šå®‰è£…ä»¥ä¸‹ä¸œè¥¿:

*   [Node.js](https://nodejs.org/) å’Œ [npm](https://npmjs.com)
*   [Arduino IDE](https://www.arduino.cc/en/Main/Software) ä¸Šä¼ å¾®æ§åˆ¶å™¨ä¸Šçš„`firmata`å›ºä»¶
*   æ‚¨æœ€å–œæ¬¢çš„ä»£ç ç¼–è¾‘å™¨

æ­¤å¤–ï¼Œæ‚¨è¿˜éœ€è¦ä¸€äº›ç¡¬ä»¶ç»„ä»¶:

*   Arduino(æˆ– Arduino å…‹éš†)ã€‚æˆ‘ä¼šç”¨ Arduino Nanoã€‚[æŸ¥çœ‹ Johnny-Five é¡µé¢ï¼Œäº†è§£æ”¯æŒçš„ä¸åŒé¡µé¢](http://johnny-five.io/platform-support/)
*   1 ä¸ªçº¢è‰² LED
*   1x æŒ‰é’®
*   1 ä¸ª 220Ï‰çš„ç”µé˜»å™¨(æœ‰çº¢æ£•è‰²æ¡çº¹)ã€‚è¯·æ³¨æ„ï¼Œå¯¹äºä¸åŒçš„ LED é¢œè‰²ï¼Œæ‚¨å¯èƒ½éœ€è¦ä¸åŒçš„ç”µé˜»å€¼
*   1 ä¸ª 10kÎ©çš„ç”µé˜»å™¨(æ¡çº¹ä¸ºæ£•è‰²-é»‘è‰²-æ©™è‰²)
*   1 å—è¯•éªŒæ¿ï¼Œç”¨äºè¿æ¥è®¾ç½®â€”[ç±»ä¼¼äºè¿™ä¸ªå°ºå¯¸çš„ä¸œè¥¿åº”è¯¥è¶³å¤Ÿäº†](https://www.sparkfun.com/products/12002)
*   å‡ æ ¹è·³çº¿æˆ–ç»“å®çš„ç”µçº¿æŠŠä¸€åˆ‡è¿æ¥èµ·æ¥

### [](#installing-the-firmata-firmware)å®‰è£…å›ºä»¶

æˆ‘ä»¬éœ€è¦åšçš„ç¬¬ä¸€ä»¶äº‹æ˜¯ç¡®ä¿ä½ çš„ Arduino è¢«æ­£ç¡®è¯†åˆ«ã€‚å°†å…¶æ’å…¥ç”µè„‘ï¼Œç‚¹å‡»`Tools`èœå•ã€‚åœ¨é‚£é‡Œï¼Œä½ è¦é€‰æ‹©ä½ æ­£åœ¨ä½¿ç”¨çš„å„è‡ªçš„æ¿â€”â€”åœ¨æˆ‘çš„ä¾‹å­ä¸­ï¼Œæˆ‘å¿…é¡»é€‰æ‹© Arduino Nanoã€‚

[![screenshot of menu structure](../Images/1650ef7a830024eb5f5e72e319227c8c.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--WBsRxfhc--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/kha23e5semauxmpis8da.png)

è¿˜è¦ç¡®ä¿åœ¨`Tools â†’ Port`ä¸‹é€‰æ‹©æ­£ç¡®çš„ç«¯å£ã€‚å®ƒåº”è¯¥åŒ…å«ç±»ä¼¼äº`usbserial`çš„å†…å®¹ã€‚å¦‚æœæ²¡æœ‰åˆ—å‡ºè¿™æ ·çš„ç«¯å£ï¼Œè¯·ç¡®ä¿å®‰è£…äº† Arduino æ‰€éœ€çš„é©±åŠ¨ç¨‹åºã€‚

[![screenshot showing the menu item that should be clicked](../Images/63ec78eda5401768c3daf1935e863073.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--kX6_qrjQ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/rn7zq64ix3ml5n589ha8.png)

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ Arduino ä¸Šå®‰è£… firmata å›ºä»¶ï¼Œä»¥ä¾¿èƒ½å¤Ÿä¸ä¹‹é€šä¿¡ã€‚æ‰“å¼€ Arduino IDEï¼Œç‚¹å‡»`Sketch â†’ Include Library â†’ Manage Libraries`å¹¶æœç´¢åº“ï¼Œå®‰è£…`Servo`åº“ã€‚

[![screenshot of manage libraries menu entry](../Images/3efc8854ea89304a30a60200176c976b.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--CUCv-I1V--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/u9zmacqizwkimzhbdhrd.png)

[![screenshot of installing servo library](../Images/2eed05c3659696b38c87d15ca9d3b65a.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--mxhkLEKA--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/3tf87md1lv0ql558o4j0.png)

æœ€åï¼Œæˆ‘ä»¬éœ€è¦å°†`StandardFirmataPlus.ino`æ–‡ä»¶ä¸‹è½½åˆ°æˆ‘ä»¬çš„ Arduino é¡¹ç›®ç›®å½•ä¸­(é»˜è®¤æƒ…å†µä¸‹åœ¨ Mac ä¸­çš„`~/Documents/Arduino`ä¸‹)å¹¶ä¸Šä¼ åˆ°æˆ‘ä»¬çš„ Arduinoã€‚ä½ å¯ä»¥é€šè¿‡è¿›å…¥é¦–é€‰é¡¹å¹¶æŸ¥æ‰¾ *Sketchbook ä½ç½®*æ¥æ‰¾åˆ°ä½ çš„ Arduino ç›®å½•ã€‚

[ä» GitHub](https://raw.githubusercontent.com/firmata/arduino/master/examples/StandardFirmataPlus/StandardFirmataPlus.ino) ä¸‹è½½`StandardFirmataPlus.ino`æ–‡ä»¶ï¼Œæ”¾åœ¨ä½  Arduino ç›®å½•ä¸‹çš„`StandardFirmataPlus`ç›®å½•ä¸‹ã€‚æ‰“å¼€`StandardFirmataPlus.ino`æ–‡ä»¶ï¼Œç‚¹å‡»*ä¸Šä¼ *æŒ‰é’®ã€‚è¿™å°†ç¼–è¯‘ä½å¹¶ä¸Šä¼ åˆ°ä½ çš„ Arduinoã€‚ä¸Šä¼ å®Œæˆåï¼Œæ‚¨å¯ä»¥å…³é—­ Arduino IDEã€‚æ‚¨ç°åœ¨å·²ç»ä¸ºä¸€äº› JavaScript åšå¥½äº†å‡†å¤‡ï¼

æ³¨æ„:å¦‚æœä¸Šä¼ ä»£ç å¤±è´¥ï¼Œå°è¯•ç”¨å®‰è£…â€œä¼ºæœâ€åº“çš„æ–¹æ³•å®‰è£…â€œFirmataâ€åº“ã€‚

[![screenshot indicating a successful upload](../Images/750924754a178fa0c4aa96eb8f11578a.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--y0oPyfVo--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/13liyvkwhd1njk0pmkag.png)

### [](#hello-world-of-hardware)â€œä½ å¥½ä¸–ç•Œâ€çš„ç¡¬ä»¶

[![Decorative GIF](../Images/30a3bcd0bacb0a08881fe9ab6fd06c7a.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--wr5Rmr_l--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/akbius717p9jsh76j24r.png)

ç¡¬ä»¶ä¸­çš„ Hello World å¯èƒ½ä¼šè®© led é—ªçƒã€‚å¥½çš„æ–¹é¢æ˜¯ Arduinos é€šå¸¸å·²ç»åœ¨æ¿ä¸Šæœ‰ä¸€ä¸ª LEDï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥æŸ¥çœ‹ä¸€åˆ‡æ˜¯å¦æ­£å¸¸ï¼Œè€Œä¸å¿…è¿æ¥ä»»ä½•ä¸œè¥¿ã€‚æ‰€ä»¥è®©æˆ‘ä»¬å¼€å§‹å§ï¼

é€šè¿‡åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œä»¥ä¸‹å‡ è¡Œï¼Œåœ¨è®¡ç®—æœºä¸Šçš„ä»»æ„ä½ç½®(æ¯”å¦‚æ‚¨çš„ä¸»ç›®å½•)åˆ›å»ºä¸€ä¸ªæ–°çš„ Node.js é¡¹ç›®:

```
mkdir nodebots
cd nodebots
npm init -y 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ¥ä¸‹æ¥å®‰è£…`johnny-five`æ¨¡å—:

```
npm install johnny-five --save 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åˆ›å»ºä¸€ä¸ªåä¸º`index.js`çš„æ–‡ä»¶ï¼Œå¹¶å°†ä»¥ä¸‹ä»£ç æ”¾å…¥å…¶ä¸­:

```
const { Led, Board } = require('johnny-five');
const board = new Board();
board.on('ready', onReady); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™å°†åˆ›å»ºä¸€ä¸ªæ–°çš„ Board å®ä¾‹ï¼Œå¹¶ç­‰å¾…å‘å‡º`ready`äº‹ä»¶ã€‚è¿™æ„å‘³ç€`johnny-five`åº“è¿æ¥åˆ° Arduinoã€‚ç„¶åæˆ‘ä»¬è°ƒç”¨ä¸€ä¸ªä»ç„¶ç¼ºå¤±çš„`onReady`å‡½æ•°ã€‚é€šè¿‡åœ¨ä½ çš„`index.js` :
çš„åº•éƒ¨æ”¾ç½®ä¸‹é¢çš„è¡Œæ¥æ·»åŠ å®ƒ

```
function onReady() {
  // if we don't pass a port to the Led constructor it will use
  // the default port (built-in LED)
  const led = new Led();

  // This will grant access to the led instance
  // from within the REPL that's created when
  // running this program.
  board.repl.inject({
      led: led
  });

  led.blink();
  // run in the REPL led.stop() to make it stop blinking
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨æˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯å¼€å§‹æˆ‘ä»¬çš„è„šæœ¬:

```
node index.js 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ§åˆ¶å°åº”è¯¥è¾“å‡ºå‡ æ¡æ¶ˆæ¯ï¼Œç„¶åå¯åŠ¨ REPLï¼Œå¦‚ä¸‹æ‰€ç¤º:

[![Terminal reads among others Available, Connected, Repl Initialized](../Images/db8077f8d86420c011bb6149af394b8b.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--QQEHvczz--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/6nic4mzo6xa806ctpcmi.png)

æ­¤å¤–ï¼Œæ‚¨åº”è¯¥ä¼šçœ‹åˆ°æ¿ä¸Šçš„ LED å¼€å§‹é—ªçƒã€‚æ‚¨å¯ä»¥é€šè¿‡é”®å…¥ REPL:
æ¥åœæ­¢é—ªçƒ

```
led.stop() 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¦åœæ­¢ç¨‹åºï¼Œè¾“å…¥`.exit`æˆ–æŒ‰ä¸¤æ¬¡`Ctrl+C`ã€‚

### [](#talking-to-an-external-led)ä¸å¤–éƒ¨ LED é€šè¯

[![Decorative GIF](../Images/dc3d455270ab233f6969264e53a8db41.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--5i30V8GJ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/ctba2b6f33ulvrxo2b9k.png)

ç°åœ¨ï¼Œå¾ˆæ˜æ˜¾ï¼Œåªä¸ä¸»æ¿ä¸Šçš„ç¡¬ä»¶å¯¹è¯æ˜¯ä¸€ç§é™åˆ¶ï¼Œå¹¶ä¸æ˜¯æˆ‘ä»¬åœ¨å…¥ä¾µç¡¬ä»¶æ—¶é€šå¸¸æƒ³è¦åšçš„ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬åº”è¯¥ä¸ä¸€äº›å¤–éƒ¨ç¡¬ä»¶å¯¹è¯ã€‚å› æ­¤ï¼Œè®©æˆ‘ä»¬ä»ä»¥ä¸‹ç¡¬ä»¶å…¥æ‰‹:

*   1 ä¸ª 220Ï‰ç”µé˜»(çº¢-çº¢-æ£•è‰²)
*   1 ä¸ª LED
*   ä½ çš„é¢åŒ…æ¿
*   ä½ çš„ä¸€äº›ç”µçº¿

æ–­å¼€ Arduino è¿æ¥ï¼Œå¹¶æŒ‰ç…§ä»¥ä¸‹æ–¹å¼å°†æ‰€æœ‰è®¾å¤‡æ’å…¥è¯•éªŒæ¿:

[![picture of wireup](../Images/9db00bfe9e9f5556eb01c084a7c48926.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--RgTDsUcT--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/8edko7sfe4jdeovvgduq.png)

åŸºæœ¬ä¸Šï¼Œæ‚¨éœ€è¦åˆ›å»ºä»¥ä¸‹ç”µè·¯:

> Arduino ä¸Šçš„ D6 å¼•è„š(æˆ–ä»»ä½•å…¶ä»–æ•°å­—å¼•è„š)â†’ç”µé˜»å™¨çš„ä¸€ä¾§â†’LED çš„é•¿è…¿(é˜³æ)â†’LED çš„çŸ­è…¿(é˜´æ)â†’Arduino ä¸Šçš„ GND

åœ¨è¿™ä¸ªç”µè·¯ä¸­ï¼Œå¦‚æœæˆ‘ä»¬æ‰“å¼€å¼•è„š`D6`ï¼Œå®ƒå°†å¼€å§‹ç‚¹äº® LEDã€‚

ç°åœ¨è®©æˆ‘ä»¬æ›´æ–°ä»£ç æ¥ä½¿ç”¨ LEDã€‚æ‚¨éœ€è¦åšçš„å°±æ˜¯å°†`6`ä½œä¸ºå‚æ•°ä¼ é€’ç»™`Led`æ„é€ å‡½æ•°ã€‚è¯·æ³¨æ„ï¼Œå¯¹äºä¸åŒçš„ Arduino æˆ–å¦‚æœæ‚¨é€‰æ‹©äº†ä¸åŒçš„ç«¯å£ï¼Œè¿™å¯èƒ½ä¼šæœ‰æ‰€ä¸åŒã€‚åœ¨æ‚¨çš„`index.js` :
ä¸­è¿›è¡Œæ›´æ”¹

```
function onReady() {
  const led = new Led(6);
  // â€¦ leave remaining code
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

é‡æ–°è¿è¡Œæ‚¨çš„ç¨‹åºï¼Œå¤–éƒ¨ LED ç¯åº”è¯¥å¼€å§‹é—ªçƒï¼Œè€Œä¸æ˜¯æ¿è½½ LED ç¯ğŸ‰

### [](#push-the-button)æŒ‰ä¸‹æŒ‰é’®

[![Decoartive GIF](../Images/6c71134d2deb9627cd0b7014ef6ff876.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--bMXdLRco--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/ky1sri2r8lk70fdcc949.png)

å¦‚æœæ²¡æœ‰ä¸€äº›ç”¨æˆ·äº¤äº’ï¼Œç¡¬ä»¶é»‘å®¢ä¼šæ˜¯ä»€ä¹ˆæ ·å­ï¼Ÿæ‰€ä»¥è®©æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªæŒ‰é’®ã€‚æŠ“ä½ä½ å‰©ä¸‹çš„ç»„ä»¶:

*   1x 10kÎ©(æ£•è‰²-é»‘è‰²-æ©™è‰²)
*   1x æŒ‰é’®
*   æ›´å¤šå‰©ä½™ç”µçº¿

æŒ‰ç…§ä»¥ä¸‹æ–¹å¼å°†å®ƒä»¬æ·»åŠ åˆ°ç”µè·¯ä¸­:

[![Picture of circuit](../Images/023ecfc24f9540a6d1a103644b459d8c.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--ryX97NeF--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/wctre68ei7waznpnsm9u.png)

> å°†ä¸€ä¸ªå¼•è„šè¿æ¥åˆ° Arduino ä¸Šçš„ 5Vï¼Œå°†å¯¹è§’å¼•è„šè¿æ¥åˆ°ä¸€ä¸ª 10kÎ©ç”µé˜»å’Œ Arduino ä¸Šçš„ D5 å¼•è„šã€‚å°†ç”µé˜»å™¨çš„å¦ä¸€ç«¯è¿æ¥åˆ° Arduino çš„ GND ä»¥é—­åˆç”µè·¯ã€‚

ç°åœ¨ï¼Œæ‚¨çš„è®¾ç½®åº”è¯¥å¦‚ä¸‹æ‰€ç¤º:

[![Photo of actual wireup](../Images/20bcb760caebfd5e2fcd27a0ec051476.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--jAVXOnPq--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/mwavvlwtsz3lip3lqz1g.png)

ä½¿ç”¨æŒ‰é’®ä¹‹ç±»çš„ä¸œè¥¿æ˜¯ JavaScript ç¡¬ä»¶é»‘å®¢çœŸæ­£é—ªå…‰çš„åœ°æ–¹ã€‚å¦‚æœæˆ‘ä»¬æƒ³çŸ¥é“æŒ‰é’®æ˜¯å¦è¢«æŒ‰ä¸‹æˆ–é‡Šæ”¾ï¼Œæˆ‘ä»¬æ‰€è¦åšçš„å°±æ˜¯ç›‘å¬`press` / `release`äº‹ä»¶ã€‚å°±è¿™ä¹ˆç®€å•ã€‚æ¢ä½ çš„`index.js` :

```
const { Led, Board, Button } = require('johnny-five');
const board = new Board();

board.on('ready', onReady);

let button;
let led;
function onReady() {
  button = new Button(5);
  led = new Led(6);
  button.on('press', () => led.on());
  button.on('release', () => led.off());

  // This will grant access to the led instance
  // from within the REPL that's created when
  // running this program.
  board.repl.inject({
    led: led
  });

  // led.blink();
  // run in the REPL led.stop() to make it stop blinking
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

é‡å¯è„šæœ¬ï¼Œå¼€å§‹æŒ‰æŒ‰é’®ã€‚å½“æŒ‰ä¸‹æŒ‰é’®æ—¶ï¼ŒLED åº”è¯¥äº®èµ·ï¼Œå½“æ¾å¼€æŒ‰é’®æ—¶ï¼ŒLED åœæ­¢äº®èµ·ã€‚

### [](#why-isnt-that-an-api)é‚£ä¸ºä»€ä¹ˆä¸æ˜¯ APIï¼Ÿ

[![Decorative GIF](../Images/691de2ef4190aba4dc6909399685d231.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--wkOlisNX--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/g4v06hptptghthb7dbs9.png)

æˆ‘æœ€å–œæ¬¢ nodebots çš„ä¸€ç‚¹æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨æ•´ä¸ª npm ç”Ÿæ€ç³»ç»Ÿã€‚å› æ­¤ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨`express`å¯åŠ¨ä¸€ä¸ªå¿«é€Ÿ web æœåŠ¡å™¨ï¼Œå¹¶ç‚¹äº®æ¯ä¸ªè¯·æ±‚çš„ LEDï¼Œè®©æˆ‘ä»¬ä½¿ç”¨`got`å‘[è¯·æ±‚ Bin](https://requestb.in/) å‘å‡ºä¸€ä¸ª HTTP `POST`è¯·æ±‚ã€‚

ä½¿ç”¨`npm` :
å®‰è£…ä¸¤ä¸ªæ¨¡å—

```
npm install express got --save 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦è¿™ä¸¤ä¸ªä¾èµ–é¡¹ï¼Œå¹¶åˆ›å»ºä¸€ä¸ª express åº”ç”¨ç¨‹åºã€‚ä¿®æ”¹æ‚¨çš„`index.js` :

```
const { Led, Board, Button } = require('johnny-five');
const express = require('express');
const got = require('got');
const board = new Board();
const app = express();

app.get('*', (req, res) => {
  led.on();
  // turn off LED after 1 second
  setTimeout(() => led.off(), 1000);
  res.send('Hello!');
});

board.on('ready', onReady); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦è°ƒæ•´æŒ‰é’®çš„äº‹ä»¶å¤„ç†ç¨‹åºï¼Œè®© express æœåŠ¡å™¨å¼€å§‹ç›‘å¬:

```
function onReady() {
  button = new Button(5);
  led = new Led(6);
  button.on('press', () => {
    got
      .post('YOUR_REQUEST_BIN_URL')
      .then(() => {
        console.log('Made request');
      })
      .catch(err => {
        console.error(err);
      });
  });
  // button.on('release', () => led.off());
  app.listen(3000, () => {
    console.log('Server listening on port 3000');
  });

  // This will grant access to the led instance
  // from within the REPL that's created when
  // running this program.
  board.repl.inject({
    led: led
  });
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç¡®ä¿ç”¨æœ‰æ•ˆçš„ [RequestBin](https://requestb.in/) URL æ›¿æ¢`YOUR_REQUEST_BIN_URL`ã€‚ä½ å¯ä»¥åœ¨ä»–ä»¬çš„ç½‘ç«™ä¸Šåˆ›å»ºä¸€ä¸ªã€‚

ç°åœ¨é‡å¯ä½ çš„ç¨‹åºï¼Œç­‰å¾…å®ƒè¡¨æ˜æœåŠ¡å™¨æ­£åœ¨ç›‘å¬ã€‚å¯¼èˆªåˆ° [http://localhost:3000](http://localhost:3000/) ï¼Œæ‚¨åº”è¯¥ä¼šçœ‹åˆ° LED ç¯äº®èµ·ä¸€ç§’é’Ÿã€‚åˆ·æ–°é¡µé¢ï¼Œä½ ä¼šå†æ¬¡çœ‹åˆ°å®ƒã€‚ç„¶åï¼ŒæŒ‰ä¸‹æŒ‰é’®å¹¶åˆ·æ–°æ‚¨çš„ RequestBin é¡µé¢ï¼Œä»¥æŸ¥çœ‹æ‰€åšçš„è¯·æ±‚ã€‚

### [](#whats-next)æ¥ä¸‹æ¥æ˜¯ä»€ä¹ˆï¼Ÿ

å¤ªæ£’äº†ï¼Œå°±æ˜¯è¿™æ ·ï¼ä½ åˆšåˆšè¿ˆå‡ºäº†å¯çˆ±çš„æœºå™¨äººä¸–ç•Œçš„ç¬¬ä¸€æ­¥ã€‚ä½†è¿™ä»…ä»…æ˜¯å¼€å§‹ã€‚ç°åœ¨æ˜¯æ—¶å€™æ‰¾åˆ°ä¸€ä¸ªé¡¹ç›®ï¼Œå¼€å§‹ç ”ç©¶ä½ éœ€è¦ä»€ä¹ˆé›¶ä»¶ã€‚å¦‚æœä½ æƒ³çŸ¥é“å¦‚ä½•å¤„ç†è¿™äº›äº‹æƒ…ï¼Œå¯ä»¥çœ‹çœ‹æˆ‘åœ¨[ä¸Šçš„åšæ–‡ï¼Œçœ‹çœ‹æˆ‘æ˜¯å¦‚ä½•ç”¨ Johnny-Five å’Œ Tessel](https://moin.world/2017/04/01/how-we-hacked-our-coffee-machine-with-javascript/) é»‘æ‰ä¸€å°å’–å•¡æœºçš„ã€‚ä½ è¿˜åº”è¯¥[æ£€æŸ¥ä¸€ä¸‹ä½ å‘¨å›´æ˜¯å¦æœ‰æœ¬åœ°çš„ nodebots èšä¼š](http://nodebots.io/#meetups)ã€‚å…¶ä»–æœ‰ç”¨çš„èµ„æºåŒ…æ‹¬:

*   [æ˜¾ç¤ºå¦‚ä½•ä¸å„ç§ç»„ä»¶äº¤äº’çš„ Johnny-Five ç¤ºä¾‹é¡µé¢](http://johnny-five.io/examples/)
*   [`nodebots-workshop`](https://www.npmjs.com/package/nodebot-workshop) ä»¥å…¶å¤šæ ·çš„æ¼”ä¹ 
*   GitHub ä¸Šçš„[ç‰›é€¼èŠ‚ç‚¹æœºå™¨äºº](https://github.com/IainIsCreative/awesome-nodebots)åˆ—è¡¨

å¦‚æœä½ æœ‰ä»»ä½•æ­£åœ¨æˆ–è®¡åˆ’ç”¨ JS å¼€å‘çš„å¾ˆé…·çš„ç¡¬ä»¶é¡¹ç›®ï¼Œæˆ‘å¾ˆæƒ³å¬å¬å®ƒä»¬ï¼å¦‚æœæ‚¨æœ‰ä»»ä½•é—®é¢˜ï¼Œä¹Ÿå¯ä»¥éšæ—¶è”ç³»æˆ‘ä»¬:

*   ç”µå­é‚®ä»¶:[dkundel@twilio.com](//mailto:dkundel@twilio.com)
*   æ¨ç‰¹: [@dkundel](https://twitter.com/dkundel)
*   GitHub: [dkundel](https://github.com/dkundel)

[![Decorative GIF](../Images/9183403f68ee7d8769ae46df491753b5.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--UeX0RIZl--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/zp865bzsm16w1yucgk23.png)