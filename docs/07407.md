# ç§‘ç‰¹æ—çš„å››äººå¸®æ¨¡å¼

> åŸæ–‡:[https://dev.to/lovis/gang-of-four-patterns-in-kotlin](https://dev.to/lovis/gang-of-four-patterns-in-kotlin)

ç§‘ç‰¹æ—è¶Šæ¥è¶Šé‡è¦äº†ã€‚ç”¨ Kotlin å®ç°çš„å¸¸è§è®¾è®¡æ¨¡å¼ä¼šæ˜¯ä»€ä¹ˆæ ·å­ï¼Ÿ
å—åˆ°é©¬é‡Œå¥¥Â·å¯Œæ–¯ç§‘çš„[æ¼”è®²](https://www.youtube.com/watch?v=Rmer37g9AZM) / [åšæ–‡](https://www.voxxed.com/blog/2016/04/gang-four-patterns-functional-light-part-1/) / [èµ„æºåº“](https://github.com/mariofusco/from-gof-to-lambda)â€œä» GoF åˆ° lambdaâ€çš„å¯å‘ï¼Œæˆ‘å†³å®šåœ¨ Kotlin ä¸­å®ç°ä¸€äº›è®¡ç®—æœºç§‘å­¦ä¸­æœ€è‘—åçš„è®¾è®¡æ¨¡å¼ï¼

ç„¶è€Œï¼Œç›®æ ‡ä¸æ˜¯ç®€å•åœ°*å®ç°*æ¨¡å¼ã€‚ç”±äº Kotlin æ”¯æŒé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œå¹¶ä¸”å¯ä»¥ä¸ java äº’æ“ä½œï¼Œæˆ‘å¯ä»¥å¤åˆ¶-è‡ªåŠ¨è½¬æ¢ Mario åº“ä¸­çš„æ¯ä¸ª Java ç±»(ä¸ç®¡æ˜¯â€œä¼ ç»Ÿâ€è¿˜æ˜¯â€œlambdaâ€ç¤ºä¾‹)å¹¶ä¸”**å®ƒä»ç„¶å¯ä»¥å·¥ä½œï¼**
åŒæ ·å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¿™äº›æ¨¡å¼è¢«å‘ç°æ˜¯ä¸ºäº†å…‹æœ 90 å¹´ä»£å‘½ä»¤å¼ç¼–ç¨‹è¯­è¨€(å°¤å…¶æ˜¯ C++è¯­è¨€)çš„ç¼ºç‚¹ã€‚è®¸å¤šç°ä»£è¯­è¨€éƒ½æä¾›äº†å…‹æœè¿™äº›é—®é¢˜çš„ç‰¹æ€§ï¼Œè€Œæ— éœ€ç¼–å†™é¢å¤–çš„ä»£ç æˆ–é€€å›åˆ°æ¨¡å¼ã€‚

è¿™å°±æ˜¯ä¸ºä»€ä¹ˆâ€”â€”å°±åƒ`g âˆ˜ f`ä»“åº“ä¸­çš„ Mario æˆ‘å°†è¯•å›¾æ‰¾åˆ°ä¸€ç§æ›´ç®€å•ã€æ›´å®¹æ˜“æˆ–æ›´æƒ¯ç”¨çš„æ–¹æ³•æ¥è§£å†³æ¯ä¸ªæ¨¡å¼æ­£åœ¨è§£å†³çš„ç›¸åŒé—®é¢˜ã€‚

å¦‚æœä¸å–œæ¬¢çœ‹è§£é‡Šï¼Œå¯ä»¥ç›´æ¥è·³è½¬åˆ°æˆ‘çš„ [github èµ„æºåº“](https://github.com/lmller/gof-in-kotlin)

* * *

ä½ å¯èƒ½çŸ¥é“ï¼Œæœ‰ä¸‰ç§ç±»å‹çš„(gof)æ¨¡å¼:**ç»“æ„**ã€**åˆ›é€ **å’Œ**è¡Œä¸º**æ¨¡å¼ã€‚é¦–å…ˆæ˜¯ç»“æ„æ¨¡å¼ã€‚è¿™å¾ˆéš¾ï¼Œå› ä¸ºç»“æ„æ¨¡å¼æ˜¯å…³äºç»“æ„çš„ï¼æˆ‘å¦‚ä½•å®ç°ä¸€ä¸ªä¸*ä¸åŒçš„*ç»“æ„ï¼Ÿæˆ‘ä¸èƒ½ã€‚ä¸€ä¸ªä¾‹å¤–æ˜¯**è£…é¥°å™¨**ã€‚è™½ç„¶å®ƒåœ¨æŠ€æœ¯ä¸Šåªæ˜¯å…³äºç»“æ„ï¼Œä½†å®ƒçš„ç”¨æ³•æ›´å¤šçš„æ˜¯å…³äºè¡Œä¸ºæˆ–è´£ä»»ã€‚

### ç»“æ„æ¨¡å¼

#### è£…é¥°å·¥

> åŠ¨æ€åœ°å°†é™„åŠ è´£ä»»é™„åŠ åˆ°å¯¹è±¡ä¸Š

å‡è®¾æˆ‘æƒ³ç”¨ä¸€äº›æ–‡æœ¬æ•ˆæœæ¥è£…é¥°ä¸€ä¸ªç±»`Text`:

```
class Text(val text: String) {
    fun draw() = print(text)
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¦‚æœä½ çŸ¥é“æ¨¡å¼ï¼Œä½ ä¹ŸçŸ¥é“ä¸ºäº†â€œè£…é¥°â€(ä¹Ÿå°±æ˜¯æ‰©å±•è¡Œä¸º)ç±»ï¼Œå¿…é¡»åˆ›å»ºä¸€ç»„ç±»ã€‚åœ¨ Kotlin ä¸­ï¼Œè¿™äº›é¢å¤–çš„ç±»å¯ä»¥é€šè¿‡ä½¿ç”¨*æ‰©å±•å‡½æ•°* :
æ¥é¿å…

```
fun Text.underline(decorated: Text.() -> Unit) {
    print("_")
    this.decorated()
    print("_")
}

fun Text.background(decorated: Text.() -> Unit) {
    print("\u001B[43m")
    this.decorated()
    print("\u001B[0m")
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æœ‰äº†è¿™äº›æ‰©å±•å‡½æ•°ï¼Œæˆ‘ç°åœ¨å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„`Text`å¹¶ä¿®é¥°å®ƒçš„`draw`æ–¹æ³•ï¼Œè€Œä¸ç”¨åˆ›å»ºå…¶ä»–ç±»:

```
Text("Hello").run {
    background {
        underline {
            draw()
        }
    }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¦‚æœæ‚¨ä»å‘½ä»¤è¡Œè¿è¡Œæ­¤å‘½ä»¤ï¼Œæ‚¨å°†çœ‹åˆ°å¸¦æœ‰å½©è‰²èƒŒæ™¯çš„æ–‡æœ¬â€œ_Hello_ â€(å¦‚æœæ‚¨çš„ç»ˆç«¯æ”¯æŒ ansi é¢œè‰²)ã€‚ä¸æœ€åˆçš„è£…é¥°å™¨æ¨¡å¼ç›¸æ¯”ï¼Œæœ‰ä¸€ä¸ªç¼ºç‚¹:æˆ‘ä¸èƒ½ä¼ é€’â€œé¢„å…ˆè£…é¥°â€çš„å¯¹è±¡ï¼Œå› ä¸ºä¸å†æœ‰è£…é¥°å™¨ç±»äº†ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘å¯ä»¥å†æ¬¡ä½¿ç”¨å‡½æ•°ã€‚å‡½æ•°åœ¨ç§‘ç‰¹æ—æ˜¯ä¸€ç­‰å…¬æ°‘ï¼Œæ‰€ä»¥æˆ‘å¯ä»¥æŠŠå®ƒä»¬ä¼ æ¥ä¼ å»ã€‚

```
fun preDecorated(decorated: Text.() -> Unit): Text.() -> Unit {
    return { background { underline { decorated() } } }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### åˆ›ä½œ

#### æ„å»ºå™¨

> å°†å¤æ‚å¯¹è±¡çš„æ„é€ ä¸å…¶è¡¨ç¤ºåˆ†ç¦»ï¼Œä»¥ä¾¿åŒä¸€æ„é€ è¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„è¡¨ç¤º

**æ„å»ºå™¨**æ¨¡å¼éå¸¸æœ‰ç”¨ã€‚æˆ‘å¯ä»¥é¿å…å˜é‡ç¹é‡çš„æ„é€ å‡½æ•°ï¼Œè½»æ¾é‡ç”¨é¢„å®šä¹‰çš„è®¾ç½®ã€‚Kotlin é€šè¿‡`apply`æ‰©å±•å‡½æ•°æ”¯æŒè¿™ç§å¼€ç®±å³ç”¨çš„æ¨¡å¼ã€‚
è€ƒè™‘ä¸€ç±»`Car` :

```
class Car() {
    var color: String = "red"
    var doors = 3
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ç°åœ¨å¯ä»¥ä½¿ç”¨`apply` ( `also`ä¹Ÿå¯ä»¥)æ‰©å±•æ¥åˆå§‹åŒ–æ±½è½¦:
ï¼Œè€Œä¸æ˜¯ä¸ºè¿™ä¸ªç±»åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„`CarBuilder`

```
Car().apply {
    color = "yellow"
    doors = 5
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å› ä¸ºå‡½æ•°å¯ä»¥å­˜å‚¨åœ¨å˜é‡ä¸­ï¼Œæ‰€ä»¥åˆå§‹åŒ–ä¹Ÿå¯ä»¥å­˜å‚¨åœ¨å˜é‡ä¸­ã€‚è¿™æ ·ï¼Œæˆ‘å¯ä»¥é¢„å…ˆé…ç½®**æ„å»ºå™¨**åŠŸèƒ½ï¼Œä¾‹å¦‚`val yellowCar: Car.() -> Unit = { color = "yellow" }`

#### åŸå‹

> ä½¿ç”¨åŸå‹å®ä¾‹æŒ‡å®šè¦åˆ›å»ºçš„å¯¹è±¡ç§ç±»ï¼Œå¹¶é€šè¿‡å¤åˆ¶è¿™ä¸ªåŸå‹æ¥åˆ›å»ºæ–°å¯¹è±¡

åœ¨ Java ä¸­ï¼Œç†è®ºä¸Šå¯ä»¥ä½¿ç”¨`Cloneable`æ¥å£å’Œ`Object.clone()`å®ç°åŸå‹ã€‚ä½†æ˜¯ï¼Œ [`clone`åäº†](http://www.artima.com/intv/bloch13.html)ï¼Œè¦é¿å…ã€‚
Kotlin ç”¨æ•°æ®ç±»è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚
ä½¿ç”¨æ•°æ®ç±»æ—¶ï¼Œå…è´¹è·å¾—`equals`ã€`hashCode`ã€`toString`ã€`copy`ã€‚é€šè¿‡ä½¿ç”¨`copy`ï¼Œå¯ä»¥å…‹éš†æ•´ä¸ªå¯¹è±¡ï¼Œå¹¶æœ‰é€‰æ‹©åœ°æ”¹å˜æ–°å¯¹è±¡çš„ä¸€äº›å±æ€§ã€‚

```
data class EMail(var recipient: String, var subject: String?, var message: String?)
...

val mail = EMail("abc@example.com", "Hello", "Don't know what to write.")

val copy = mail.copy(recipient = "other@example.com")

println("Email1 goes to " + mail.recipient + " with subject " + mail.subject)
println("Email2 goes to " + copy.recipient + " with subject " + copy.subject) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

#### å•èƒ

> ç¡®ä¿ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›å¯¹å®ƒçš„å…¨å±€è®¿é—®ç‚¹

è™½ç„¶ **Singleton** ç›®å‰è¢«è®¤ä¸ºæ˜¯ä¸€ç§åæ¨¡å¼ï¼Œä½†å®ƒæœ‰å®ƒçš„ç”¨æ³•(æˆ‘åœ¨è¿™é‡Œä¸è®¨è®ºè¿™ä¸ªè¯é¢˜ï¼Œåªæ˜¯è°¨æ…ä½¿ç”¨)ã€‚åœ¨ Java ä¸­åˆ›å»ºä¸€ä¸ª **Singleton** éœ€è¦å¾ˆå¤šä»ªå¼ï¼Œä½†æ˜¯ Kotlin ç”¨ *`object`å£°æ˜*è®©å®ƒå˜å¾—å¾ˆå®¹æ˜“ã€‚

```
object Dictionary {
    private val definitions = mutableMapOf<String, String>

    fun addDefinition(word: String, definition: String) {
        definitions.put(word.toLowerCase(), definition)
    }

    fun getDefinition(word: String): String {
        return definitions[word.toLowerCase()] ?: ""
    }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨è¿™é‡Œä½¿ç”¨å…³é”®å­—`object`å°†è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªç±»`Dictionary`å’Œå®ƒçš„ä¸€ä¸ªå®ä¾‹ã€‚å®ä¾‹æ˜¯å»¶è¿Ÿåˆ›å»ºçš„ï¼Œæ‰€ä»¥ç›´åˆ°å®é™…ä½¿ç”¨æ—¶æ‰åˆ›å»ºã€‚
åƒ java ä¸­çš„é™æ€å‡½æ•°ä¸€æ ·è®¿é—®å¯¹è±¡:

```
val word = "kotlin"
Dictionary.addDefinition(word, "an awesome programming language created by JetBrains")
println(word + " is " + Dictionary.getDefinition(word)) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### è¡Œä¸ºçš„

#### æ¨¡æ¿æ³•

> åœ¨æ“ä½œä¸­å®šä¹‰ç®—æ³•çš„æ¡†æ¶ï¼Œå°†ä¸€äº›æ­¥éª¤æ¨è¿Ÿåˆ°å­ç±»

è¿™ç§æ¨¡å¼ä¹Ÿåˆ©ç”¨äº†ç±»çš„å±‚æ¬¡ç»“æ„ã€‚æ‚¨å®šä¹‰äº†ä¸€ä¸ª`abstract`æ–¹æ³•ï¼Œå¹¶åœ¨åŸºç±»å†…éƒ¨çš„æŸä¸ªåœ°æ–¹è°ƒç”¨å®ƒã€‚å®ç°ç”±å­ç±»å¤„ç†ã€‚

```
//java
public abstract class Task {
        protected abstract void work();
        public void execute(){
            beforeWork();
            work();
            afterWork();
        }
    } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ç°åœ¨å¯ä»¥æ´¾ç”Ÿä¸€ä¸ªå…·ä½“çš„`Task`ï¼Œå®ƒå®é™…ä¸Šåœ¨`work`ä¸­åšä¸€äº›äº‹æƒ…ã€‚
ç±»ä¼¼äº**è£…é¥°è€…**çš„ä¾‹å­å¦‚ä½•ä½¿ç”¨æ‰©å±•å‡½æ•°ï¼Œæˆ‘çš„**æ¨¡æ¿æ–¹æ³•**æ–¹æ³•ä½¿ç”¨äº†ä¸€ä¸ªé¡¶çº§å‡½æ•°ã€‚

```
//kotlin
fun execute(task: () -> Unit) {
    val startTime = System.currentTimeMillis() //"beforeWork()"
    task()
    println("Work took ${System.currentTimeMillis() - startTime} millis") //"afterWork()"
}

...
//usage:
execute {
    println("I'm working here!")
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¦‚ä½ æ‰€è§ï¼Œæ ¹æœ¬ä¸éœ€è¦ä¸Šè¯¾ï¼æœ‰äººå¯èƒ½ä¼šè¯´ï¼Œè¿™ç±»ä¼¼äº**ç­–ç•¥**æ¨¡å¼ï¼Œè¿™å¯èƒ½æ˜¯æ­£ç¡®çš„ã€‚ä¸è¿‡è¯è¯´å›æ¥ï¼Œ**ç­–ç•¥**å’Œ**æ¨¡æ¿æ–¹æ³•**éƒ½åœ¨è§£å†³éå¸¸ç›¸ä¼¼çš„é—®é¢˜(å¦‚æœä¸æ˜¯ç›¸åŒçš„è¯)ã€‚

#### ç­–ç•¥

> å®šä¹‰ä¸€ç³»åˆ—ç®—æ³•ï¼Œå°è£…æ¯ä¸€ä¸ªç®—æ³•ï¼Œå¹¶ä½¿å®ƒä»¬å¯ä»¥äº’æ¢

å‡è®¾æˆ‘æœ‰ä¸€ä¸ªæ¯æœˆæ”¯ä»˜ä¸€å®šè´¹ç”¨çš„`Customer`ã€‚è¿™ä¸ªè´¹ç”¨å¯ä»¥æ‰“æŠ˜ã€‚æˆ‘ä½¿ç”¨äº†**ç­–ç•¥**æ¨¡å¼ï¼Œè€Œä¸æ˜¯æ¯ä¸ªæŠ˜æ‰£éƒ½æœ‰ä¸€ä¸ªå­ç±»`Customer`-*ç­–ç•¥*ã€‚

```
class Customer(val name: String, val fee: Double, val discount: (Double) -> Double) {
    fun pricePerMonth(): Double {
        return discount(fee)
    }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ³¨æ„ï¼Œæˆ‘ä½¿ç”¨äº†ä¸€ä¸ªå‡½æ•°`(Double) -> Double`æ¥ä»£æ›¿ç­–ç•¥çš„æ¥å£ã€‚ä¸ºäº†ä½¿è¿™æ›´ç‰¹å®šäºé¢†åŸŸï¼Œæˆ‘è¿˜å¯ä»¥å£°æ˜ä¸€ä¸ªç±»å‹åˆ«åï¼Œè€Œä¸ä¼šå¤±å»é«˜é˜¶å‡½æ•°çš„çµæ´»æ€§:`typealias Discount = (Double) -> Double`ã€‚
æ— è®ºå“ªç§æ–¹å¼ï¼Œæˆ‘éƒ½å¯ä»¥å®šä¹‰å¤šç§ç­–ç•¥æ¥è®¡ç®—æŠ˜æ‰£ã€‚

```
val studentDiscount = { fee: Double -> fee/2 }
val noDiscount = { fee: Double -> fee }
...

val student = Customer("Ned", 10.0, studentDiscount)
val regular = Customer("John", 10.0, noDiscount)

println("${student.name} pays %.2f per month".format(student.pricePerMonth()))
println("${regular.name} pays %.2f per month".format(regular.pricePerMonth())) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

#### è¿­ä»£å™¨

> æä¾›ä¸€ç§æ–¹æ³•æ¥é¡ºåºè®¿é—®èšåˆå¯¹è±¡çš„å…ƒç´ ï¼Œè€Œä¸æš´éœ²å…¶åº•å±‚è¡¨ç¤ºã€‚

ç¼–å†™ä¸€ä¸ª**è¿­ä»£å™¨**æ˜¯ä¸€é¡¹ç½•è§çš„ä»»åŠ¡ã€‚å¤§å¤šæ•°æ—¶å€™ï¼ŒåŒ…è£…ä¸€ä¸ª`List`å¹¶å®ç°`Iterable`æ¥å£ä¼šæ›´å®¹æ˜“ã€æ›´æ–¹ä¾¿ã€‚
åœ¨ç§‘ç‰¹æ—ä¸­ï¼Œ`iterator()`æ˜¯ä¸€ä¸ªè¿ç®—ç¬¦å‡½æ•°ã€‚è¿™æ„å‘³ç€å½“ä¸€ä¸ªç±»å®šä¹‰ä¸€ä¸ªå‡½æ•°`operator fun iterator()`æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ª`for`å¾ªç¯æ¥è¿­ä»£å®ƒ(ä¸éœ€è¦æ¥å£)ã€‚è¿™éå¸¸é…·ï¼Œå› ä¸ºå®ƒè¿˜æ”¯æŒæ‰©å±•åŠŸèƒ½ã€‚æ²¡é”™â€”â€”é€šè¿‡ä½¿ç”¨ä¸€ä¸ªæ‰©å±•å‡½æ•°ï¼Œæˆ‘å¯ä»¥ä½¿æ¯ä¸ªå¯¹è±¡éƒ½æ˜¯å¯è¿­ä»£çš„ã€‚è€ƒè™‘è¿™ä¸ªä¾‹å­:

```
class Sentence(val words: List<String>)
...
operator fun Sentence.iterator(): Iterator<String> = words.iterator() 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ç°åœ¨å¯ä»¥è¿­ä»£ä¸€ä¸ª`Sentence`ã€‚å¦‚æœæˆ‘ä¸æ˜¯è¯¥ç±»çš„æ‰€æœ‰è€…ï¼Œè¿™ä¹Ÿé€‚ç”¨ã€‚

### æ›´å¤šæ¨¡å¼

æˆ‘æåˆ°äº†ä¸€äº›æ¨¡å¼ï¼Œä½†è¿™äº›å¹¶ä¸éƒ½æ˜¯å››äººç»„çš„æ¨¡å¼ã€‚æ­£å¦‚æˆ‘åœ¨ä»‹ç»ä¸­æ‰€è¯´çš„ï¼Œç‰¹åˆ«æ˜¯ç»“æ„æ¨¡å¼å¾ˆéš¾æˆ–è€…ä¸å¯èƒ½ç”¨ä¸åŒäº Java çš„æ–¹å¼ç¼–å†™ã€‚[å…¶ä»–ä¸€äº›æ¨¡å¼å¯ä»¥åœ¨èµ„æºåº“](https://github.com/lmller/gof-in-kotlin)ä¸­æ‰¾åˆ°ã€‚æˆ‘æ¬¢è¿åé¦ˆå’Œæ‹‰åŠ¨è¯·æ±‚â˜º.

æˆ‘å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½è®©ä½ äº†è§£ Kotlin æ˜¯å¦‚ä½•ç”¨ä¸åŒçš„æ–¹æ³•æ¥è§£å†³ä¼—æ‰€å‘¨çŸ¥çš„é—®é¢˜çš„ã€‚

ä¸€å®šè¦çœ‹çœ‹è¿™ç¯‡æ–‡ç« çš„ç¬¬äºŒéƒ¨åˆ†:[ç§‘ç‰¹æ—çš„å››äººç»„æ¨¡å¼â€”â€”è½»å¾®å›å½’](https://dev.to/lovis/gang-of-four-patterns-in-kotlin---slight-return)

æˆ‘æƒ³æåˆ°çš„æœ€åä¸€ä»¶äº‹æ˜¯ï¼Œåº“ä¸­ java ä¸ kotlin çš„æ¯”ç‡æ˜¯~â…“ Kotlin å’Œ~â…” Javaï¼Œå°½ç®¡ä¸¤ä¸ªç‰ˆæœ¬åšçš„æ˜¯åŒæ ·çš„äº‹æƒ…ğŸ™ƒ

* * *

<sup>å°é¢å›¾ç‰‡å–è‡ª[stock snap . io](http://stocksnap.io)T3ã€‘</sup>