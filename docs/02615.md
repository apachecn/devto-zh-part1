# Pipfile å’Œ Pipenv:Python ä¾èµ–å…³ç³»ç®¡ç†çš„æœªæ¥

> åŸæ–‡:[https://dev.to/djiit/pipfile-and-pipenv-æœªæ¥-python-dependencies-management-cl6](https://dev.to/djiit/pipfile-and-pipenv--the-future-of-python-dependencies-management-cl6)

æ˜¯çš„ï¼Œæˆ‘å¬åˆ°äº†ã€‚pip æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å·¥å…·ï¼Œå·²ç»å­˜åœ¨å¾ˆé•¿æ—¶é—´äº†ã€‚ä½†æ˜¯å¤§çº¦ 3 å¹´æ¥ï¼Œäººä»¬(è´¡çŒ®è€…)ä¸€ç›´åœ¨å¯»æ‰¾ä¸€ç§æ–¹æ³•æ¥å¢å¼ºæˆ‘ä»¬çš„åŒ…ç®¡ç†ä½“éªŒã€‚æƒ³æƒ³ä½ æœ€å–œæ¬¢çš„å·¥å…· composerï¼Œnpm(æˆ–è€…æ›´å¥½ï¼Œyarn)çš„è¶…èƒ½åŠ›ã€‚

ä»–ä»¬æä¾›çš„(æˆ–å¤šæˆ–å°‘)æ˜¯å¤è€çš„`requirements.txt`æ–‡ä»¶çš„æ›¿ä»£å“:å³ **Pipfile** ã€‚

## [](#how-i-learn-to-stop-worrying-and-love-pip-again)æˆ‘æ˜¯å¦‚ä½•å­¦ä¼šä¸å†æ‹…å¿ƒå¹¶å†æ¬¡çˆ±ä¸Šçš®æ™®çš„

æ–°çš„ [Pipfile](https://github.com/pypa/pipfile) åœ¨å‡ ä¸ªæ–¹é¢ä¸åŒäºæ—§å¼çš„éœ€æ±‚æ–‡ä»¶:

*   å®ƒä½¿ç”¨ *TOML* è¯­æ³•æ¥å…è®¸æ›´å¤šçš„é…ç½®ï¼›
*   å®ƒå£°æ˜ä¾èµ–ç»„(å³ä¸€ä¸ª`default`åŠ ä¸€ä¸ª`development`,ç”¨äº...å¼€å‘åŒ…),æ‰€ä»¥æ‚¨ä¸å¿…å°†æ‚¨çš„éœ€æ±‚åˆ†æˆå‡ ä¸ªæ–‡ä»¶ã€‚
*   å®ƒé™„å¸¦äº†ä¸€ä¸ª`Pipfile.lock`æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶å›ºå®šäº†ä½ çš„åŒ…çš„ç‰ˆæœ¬ï¼Œæ­¤å¤–è¿˜æœ‰ä¸€äº›å®‰å…¨å¥–åŠ±ã€‚

è®©æˆ‘ä»¬æ¥çœ‹çœ‹ä¸€ä¸ªæœ€å°çš„ã€ç®€å•çš„ Pipfile:

```
[[source]]
url = 'https://pypi.python.org/simple'
verify_ssl = true
name = 'pypi'

[requires]
python_version = '3.6'

[packages]
flask = '*'

[dev-packages]
pytest = '*' 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬è¿™é‡Œæœ‰ä»€ä¹ˆ:

*   é¦–å…ˆï¼Œæˆ‘ä»¬å£°æ˜ pip å°†è¦ä½¿ç”¨çš„æºä»£ç ã€‚é€šå¸¸ï¼Œå®ƒä¼šæ˜¯ *pypi* ã€‚
*   ç„¶åæˆ‘ä»¬å£°æ˜æˆ‘ä»¬çš„ Python ç‰ˆæœ¬éœ€æ±‚ã€‚
*   æœ€åï¼Œæˆ‘ä»¬å£°æ˜æˆ‘ä»¬çš„åŒ…å’Œå¼€å‘åŒ…ã€‚

æ˜ç™½äº†å—ï¼Ÿä¸‹é¢æ˜¯æ¥è‡ª GitHub å®˜æ–¹èµ„æºåº“çš„ Pipfile ç¤ºä¾‹:

```
[[source]]
url = 'https://pypi.python.org/simple'
verify_ssl = true
name = 'pypi'

[requires]
python_version = '2.7'

[packages]
requests = { extras = ['socks'] }
records = '>0.5.0'
django = { git = 'https://github.com/django/django.git', ref = '1.11.4', editable = true }
"e682b37" = {file = "https://github.com/divio/django-cms/archive/release/3.4.x.zip"}
"e1839a8" = {path = ".", editable = true}
pywinusb = { version = "*", os_name = "=='nt'", index="pypi"}

[dev-packages]
nose = '*'
unittest2 = {version = ">=1.0,<3.0", markers="python_version < '2.7.9' or (python_version >= '3.0' and python_version < '3.4')"} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

çœ‹åˆ°äº†å—ï¼Ÿä½¿ç”¨ TOML è¯­æ³•ï¼Œæ‚¨å¯ä»¥éå¸¸å…·ä½“åœ°æŒ‡å®šæƒ³è¦ä½¿ç”¨çš„ç‰ˆæœ¬ã€æºä»£ç æˆ–æ“ä½œç³»ç»Ÿå˜ä½“ã€‚æ³¨æ„ï¼Œä¸æ˜¯æ‰€æœ‰çš„åŒ…ç‰ˆæœ¬éƒ½æ˜¯å›ºå®šçš„ï¼Œå³ä½¿*æ˜¯* [å£°æ˜ä¾èµ–å…³ç³»çš„é¦–é€‰æ–¹å¼](http://nvie.com/posts/pin-your-packages/)ã€‚

Pip å°†åœ¨æœªæ¥ç”¨ç±»ä¼¼äº`pip install -p Pipfile`çš„è¯­æ³•æ¥æ”¯æŒè¿™ä¸ªè§„èŒƒã€‚è®©æˆ‘ä»¬çœ‹çœ‹ä»Šå¤©å¦‚ä½•ä½¿ç”¨è¿™äº›ç¥å¥‡çš„ä¸œè¥¿ã€‚

## [](#back-to-the-future)å›åˆ°æœªæ¥

è®¤è¯†ä¸€ä¸‹ [Pipenv](https://docs.pipenv.org/) (æ²¡é”™ï¼Œè¿™æ˜¯è‚¯å°¼æ–¯Â·é›·èŒ¨çš„å¦ä¸€ä¸ªé¡¹ç›®ï¼Œä»–æ˜¯ [httpbin](http://httpbin.org/) ã€[pep8.org](//pep8.org)ï¼Œä»¥åŠï¼Œæ˜¯çš„ï¼Œ[è¯·æ±‚](http://docs.python-requests.org/en/master/#)çš„å¹•åäºº)ã€‚

> ![Julien Tanay profile image](../Images/8c77aae9d174fa34e96328cc29b11ed1.png)æœ±åˆ©å®‰Â·å¡”å¥ˆ[@ DJ IIT](https://dev.to/djiit)![twitter logo](../Images/4c8a2313941dda016bf4d78d103264aa.png)å½“ä½ ä»–å¦ˆçš„æ„è¯†åˆ° [@kennethreitz](https://twitter.com/kennethreitz) çš„ pipenv åˆšåˆšæ‰äº†ä¸€ä¸ªğŸƒåœ¨ä½ çš„å£³é‡Œã€‚è®©æˆ‘å¼€å¿ƒäº†ä¸€å¤©ã€‚2017 å¹´ 10 æœˆ 31 æ—¥ä¸‹åˆ 13:14[![Twitter reply action](../Images/44d8b042100e231770330321e5b63d65.png)](https://twitter.com/intent/tweet?in_reply_to=925350303863656448)[![Twitter retweet action](../Images/93d9c70ccc54851d2e8e881b53c21dae.png)](https://twitter.com/intent/retweet?tweet_id=925350303863656448)[![Twitter like action](../Images/2e93f7775eadefab8bcd34a4542cc5a7.png)](https://twitter.com/intent/like?tweet_id=925350303863656448)

Pipenv æ˜¯å½“å‰ Pipfile çš„é¦–é€‰å®ç°ï¼Œå®ƒå…è®¸æ‚¨åƒè€æ¿ä¸€æ ·ç®¡ç†æ‚¨çš„ virtualenvsã€‚å®ƒæ—¨åœ¨ç®€åŒ–å’Œå¢å¼ºæˆ‘ä»¬ç®¡ç† python ç¯å¢ƒçš„æ–¹å¼(ç±»ä¼¼äº *virtualenvwrapper* ï¼Œä½†å¸¦æœ‰ *pip* æŠ€èƒ½)ã€‚

ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„å·¥ä½œæµç¨‹:

1-åœ¨ä½ çš„é¡¹ç›®ç›®å½•ä¸­ï¼Œåˆ›å»ºä½ çš„ *virtualenv* ã€‚Pipenv ä¼šæŠŠå®ƒå­˜æ”¾åœ¨ä¸€ä¸ªé›†ä¸­çš„åœ°æ–¹ï¼Œè€Œä¸æ˜¯ä½ çš„é¡¹ç›®æ ¹ç›®å½•:

```
pipenv --three # Yeah, 3 is the way to go 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

2-å®‰è£…ä¸€äº›ä¾èµ–é¡¹:

```
pipenv install flask
pipenv install --dev pytest # Notice the --dev flag 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

3-å‘æŒ¥ä½ çš„*æ‰èƒ½*ã€‚å®ƒå°†æ‰“å¼€ä¸€ä¸ªæ–°çš„å¤–å£³:

```
pipenv shell 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¯·æ³¨æ„ï¼Œåœ¨æ‰§è¡Œè¯¥å‘½ä»¤ä¹‹å‰ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰åœ¨ä¸­ä½¿ç”¨*ã€‚ä¸€åˆ‡éƒ½ç”± *Pipenv* ä¸ºæˆ‘ä»¬å¤„ç†ã€‚*

ä»è¿™ä¸€ç‚¹æ¥çœ‹ï¼Œä½ å¯ä»¥èµ°äº†ã€‚Pipenv å°†å¸®åŠ©æ‚¨åœ¨æ•´ä¸ªå¼€å‘è¿‡ç¨‹ä¸­ç®¡ç†æ‚¨çš„ç¯å¢ƒã€‚

æœ€åï¼Œæ‚¨ä¸åº”è¯¥æ‹…å¿ƒä¸æ‚¨çš„éƒ¨ç½²æœåŠ¡å™¨çš„å…¼å®¹æ€§é—®é¢˜(å½“æ‚¨é˜…è¯»æœ¬æ–‡æ—¶ï¼Œå®ƒè‚¯å®šä»åœ¨ä½¿ç”¨ *pip* ):æ‚¨å¯ä»¥é€šè¿‡è¿è¡Œ:
ç”Ÿæˆä¸€ä¸ªæ—§çš„`requirements.txt`

```
pipenv lock -r > requirements.txt 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

Pipenv å¤„ç†æ‚¨çš„ä¾èµ–å…³ç³»ï¼Œå®ƒç”šè‡³é€šè¿‡æŒ‡å®šæ¯ä¸ªåŒ…çš„æ•£åˆ—æ¥å¢åŠ ä¸€äº›å®‰å…¨æ€§ã€‚

å°±æ˜¯è¿™æ ·ã€‚å»æµ‹è¯• Pipenvï¼Œå‘Šè¯‰æˆ‘ä½ çš„æƒ³æ³•ï¼

å¹²æ¯

*æ³¨:æœ¬å¸–æœ€åˆå‘å¸ƒäº[åª’ä½“](https://medium.com/@djiit/pipfile-and-pipenv-the-future-of-python-dependencies-management-8c0c5b6ec99b)ã€‚*