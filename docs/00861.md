# ä½¿ç”¨ React å’Œ React è·¯ç”±å™¨ V4 è¿›è¡Œä»£ç æ‹†åˆ†

> åŸæ–‡:[https://dev . to/tylermcginnis/code-splitting-with-react-and-react-router-43id](https://dev.to/tylermcginnis/code-splitting-with-react-and-react-router-43id)

ä»£ç åˆ†å‰²æœ€è¿‘è¶Šæ¥è¶Šå—æ¬¢è¿ï¼Œå› ä¸ºå®ƒå…è®¸ä½ å°†ä½ çš„åº”ç”¨ç¨‹åºåˆ†å‰²æˆç‹¬ç«‹çš„åŒ…ï¼Œç”¨æˆ·å¯ä»¥é€æ­¥åŠ è½½ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä¸ä»…è¦äº†è§£ä»€ä¹ˆæ˜¯ä»£ç æ‹†åˆ†ä»¥åŠå¦‚ä½•å®ç°ï¼Œè¿˜è¦äº†è§£å¦‚ä½•ç”¨ React è·¯ç”±å™¨å®ç°å®ƒã€‚

### [](#video)è§†é¢‘

[https://www.youtube.com/embed/bUlkq3PDfRY](https://www.youtube.com/embed/bUlkq3PDfRY)

### [](#post)å²—ä½

ç°åœ¨æ˜¯ 2018 å¹´ã€‚ä½ çš„ç”¨æˆ·ä¸åº”è¯¥ä¸‹è½½ä½ çš„æ•´ä¸ªåº”ç”¨ç¨‹åºï¼Œå½“ä»–ä»¬éœ€è¦çš„åªæ˜¯å…¶ä¸­çš„ä¸€éƒ¨åˆ†ã€‚å¦‚æœç”¨æˆ·æ­£åœ¨åˆ›å»ºä¸€ä¸ªæ–°çš„å¸–å­ï¼Œè®©ä»–ä»¬ä¸‹è½½æ³¨å†Œè§†å›¾çš„æ‰€æœ‰ä»£ç æ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚å¦‚æœç”¨æˆ·æ­£åœ¨æ³¨å†Œï¼Œä»–ä»¬ä¸éœ€è¦ä½ çš„åº”ç”¨ç¨‹åºåœ¨è®¾ç½®è§†å›¾ä¸Šéœ€è¦çš„å·¨å¤§çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ã€‚è¿™æ˜¯ä¸€ç§æµªè´¹ï¼Œæœ‰äº›äººä¼šè®¤ä¸ºè¿™æ˜¯å¯¹é‚£äº›æ²¡æœ‰æ— é™å¸¦å®½ç‰¹æƒçš„ç”¨æˆ·çš„ä¸å°Šé‡ã€‚è¿™ä¸ªæƒ³æ³•ä¸ä»…åœ¨æœ€è¿‘å‡ å¹´è¶Šæ¥è¶Šå—æ¬¢è¿ï¼Œè€Œä¸”ä¹Ÿå˜å¾—æ›´åŠ å®¹æ˜“å®ç°â€”â€”å®ƒç”šè‡³æœ‰ä¸€ä¸ªå¾ˆé…·çš„åå­—â€”â€”ä»£ç åˆ†å‰²ã€‚

æƒ³æ³•å¾ˆç®€å•ï¼Œä¸è¦ä¸‹è½½ä»£ç ï¼Œç›´åˆ°ç”¨æˆ·éœ€è¦å®ƒã€‚åœ¨å®è·µä¸­ï¼Œå®ƒå¯ä»¥æ›´å¤æ‚ä¸€ç‚¹ã€‚è¿™æ ·åšçš„åŸå› ä¸æ˜¯å› ä¸ºä»£ç æ‹†åˆ†æœ¬èº«éå¸¸å›°éš¾ï¼Œè€Œæ˜¯å› ä¸ºæœ‰å„ç§å„æ ·çš„å·¥å…·å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œå¹¶ä¸”æ¯ä¸ªäººéƒ½æœ‰ä¸€ä¸ªå…³äºå“ªä¸ªæ˜¯æœ€å¥½çš„è§‚ç‚¹ã€‚å½“ä½ ç¬¬ä¸€æ¬¡å¼€å§‹æ—¶ï¼Œå¯èƒ½å¾ˆéš¾åˆ†æä»€ä¹ˆæ˜¯ä»€ä¹ˆã€‚

> ä¸¤ç§æœ€å¸¸è§çš„æ–¹æ³•æ˜¯ä½¿ç”¨ Webpack å’Œå®ƒçš„[æ†ç»‘åŒ…åŠ è½½å™¨](https://github.com/webpack-contrib/bundle-loader)æˆ–è€… ECMAScript åŠ¨æ€`import()`æè®®ï¼Œç›®å‰æ˜¯[ç¬¬ä¸‰é˜¶æ®µ](https://tylermcginnis.com/videos/ecmascript/)ã€‚æˆ‘æŠ“ä½ä»»ä½•ä¸ä½¿ç”¨ webpack çš„æœºä¼šï¼Œæ‰€ä»¥åœ¨è¿™ç¯‡æ–‡ç« ä¸­æˆ‘ä»¬å°†ä½¿ç”¨ dynamic `import()`ã€‚

å¦‚æœä½ ç†Ÿæ‚‰ ES æ¨¡å—ï¼Œä½ ä¼šçŸ¥é“å®ƒä»¬æ˜¯å®Œå…¨é™æ€çš„ã€‚è¿™æ„å‘³ç€æ‚¨å¿…é¡»åœ¨ç¼–è¯‘æ—¶æŒ‡å®šå¯¼å…¥å’Œå¯¼å‡ºçš„å†…å®¹ï¼Œè€Œä¸æ˜¯åœ¨è¿è¡Œæ—¶ã€‚è¿™ä¹Ÿæ„å‘³ç€æ‚¨ä¸èƒ½åŸºäºæŸäº›æ¡ä»¶åŠ¨æ€åœ°å¯¼å…¥ä¸€ä¸ªæ¨¡å—ã€‚éœ€è¦åœ¨æ–‡ä»¶çš„é¡¶éƒ¨å£°æ˜ï¼Œå¦åˆ™å®ƒä»¬ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚

```
if (!user) {
  import * as api from './api' // ğŸ™…â€â™€ï¸ğŸš«. "import' and 'export' may only appear at the top level"
} 
```

ç°åœ¨ï¼Œå¦‚æœ`import`æ²¡æœ‰**æœ‰**æ˜¯é™æ€çš„å‘¢ï¼Ÿæ„æ€æ˜¯å¦‚æœä¸Šé¢çš„ä»£ç æœ‰æ•ˆå‘¢ï¼Ÿé‚£ä¼šç»™æˆ‘ä»¬å¸¦æ¥ä»€ä¹ˆå¥½å¤„ï¼Ÿé¦–å…ˆï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥æŒ‰éœ€åŠ è½½æŸäº›æ¨¡å—ã€‚è¿™å°†æ˜¯éå¸¸å¼ºå¤§çš„ï¼Œå› ä¸ºå®ƒå°†ä½¿æˆ‘ä»¬æ›´æ¥è¿‘åªä¸‹è½½ç”¨æˆ·éœ€è¦çš„ä»£ç çš„æ„¿æ™¯ã€‚

```
if (editPost === true) {
  import * as edit from './editpost'

  edit.showEdtior()
} 
```

å‡è®¾`editpost`åŒ…å«ä¸€ä¸ªéå¸¸å¤§çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œæˆ‘ä»¬ä¼šç¡®ä¿åœ¨ç”¨æˆ·çœŸæ­£å‡†å¤‡å¥½ä½¿ç”¨å®ƒä¹‹å‰ä¸ä¼šä¸‹è½½å®ƒã€‚

> å¦ä¸€ä¸ªå¾ˆé…·çš„ç”¨ä¾‹æ˜¯é—ç•™æ”¯æŒã€‚æ‚¨å¯ä»¥æ¨è¿Ÿä¸‹è½½æŸäº›ä»£ç ï¼Œç›´åˆ°æ‚¨ç¡®å®šç”¨æˆ·çš„æµè§ˆå™¨æœ¬èº«æ²¡æœ‰è¿™äº›ä»£ç ã€‚

å¥½æ¶ˆæ¯æ˜¯(æˆ‘ä¹‹å‰å·²ç»æåˆ°è¿‡)ã€‚è¿™ç§ç±»å‹çš„åŠŸèƒ½ç¡®å®å­˜åœ¨ï¼Œå®ƒå—åˆ° Create React App çš„æ”¯æŒï¼Œç›®å‰æ­£å¤„äº ECMAScript æµç¨‹çš„ç¬¬ 3 é˜¶æ®µã€‚ä¸åŒä¹‹å¤„åœ¨äºï¼Œæ‚¨æ²¡æœ‰åƒé€šå¸¸é‚£æ ·ä½¿ç”¨`import`ï¼Œè€Œæ˜¯åƒä½¿ç”¨ä¸€æ ·ä½¿ç”¨**ï¼Œè¿™æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒè¿”å›ä¸€ä¸ªæ‰¿è¯ºï¼Œä¸€æ—¦æ¨¡å—è¢«å®Œå…¨åŠ è½½ï¼Œè¯¥æ‰¿è¯ºå°±ä¸æ¨¡å—ä¸€èµ·è§£å†³ã€‚** 

```
if (editPost === true) {
  import('./editpost')
    .then((module) => module.showEditor())
    .catch((e) => )
} 
```

å¾ˆæ£’ï¼Œå¯¹å§ï¼Ÿ

æ—¢ç„¶æˆ‘ä»¬çŸ¥é“äº†å¦‚ä½•åŠ¨æ€å¯¼å…¥æ¨¡å—ï¼Œä¸‹ä¸€æ­¥å°±æ˜¯å¼„æ¸…æ¥šå¦‚ä½•åœ¨ React å’Œ React Router ä¸­ä½¿ç”¨å®ƒã€‚

å½“ä½¿ç”¨ React è¿›è¡Œä»£ç æ‹†åˆ†æ—¶ï¼Œæˆ‘ä»¬éœ€è¦é—®è‡ªå·±çš„ç¬¬ä¸€ä¸ª(ä¹Ÿå¯èƒ½æ˜¯æœ€å¤§çš„)é—®é¢˜æ˜¯**æˆ‘ä»¬åº”è¯¥åœ¨å“ªé‡Œè¿›è¡Œæ‹†åˆ†ï¼Ÿé€šå¸¸æœ‰ä¸¤ä¸ªç­”æ¡ˆã€‚**

> 1.  Split at the routing level. 2) Split at the component level.

æ›´å¸¸è§çš„æ–¹æ³•æ˜¯åœ¨è·¯ç”±çº§åˆ«è¿›è¡Œåˆ†å‰²ã€‚ä½ å·²ç»æŠŠä½ çš„åº”ç”¨ç¨‹åºåˆ†å‰²æˆä¸åŒçš„è·¯å¾„ï¼Œæ‰€ä»¥åœ¨å…¶ä¸Šæ·»åŠ ä»£ç åˆ†å‰²æ„Ÿè§‰å¾ˆè‡ªç„¶ã€‚è¿™å®é™…ä¸Šä¼šæ˜¯ä»€ä¹ˆæ ·å­å‘¢ï¼Ÿ

è®©æˆ‘ä»¬ä»ä¸€ä¸ªåŸºæœ¬çš„ React è·¯ç”±å™¨ç¤ºä¾‹å¼€å§‹ã€‚æˆ‘ä»¬å°†æœ‰ä¸‰æ¡è·¯çº¿ï¼Œ`/`ï¼Œ`/topics`ï¼Œ`/settings`ã€‚

```
import React, { Component } from 'react'
import {
  BrowserRouter as Router,
  Route,
  Link,
} from 'react-router-dom'

import Home from './Home'
import Topics from './Topics'
import Settings from './Settings'

class App extends Component {
  render() {
    return (
      <Router>
        <div>
          <ul>
            <li><Link to='/'>Home</Link></li>
            <li><Link to='/topics'>Topics</Link></li>
            <li><Link to='/settings'>Settings</Link></li>
          </ul> 
          <hr />

          <Route exact path='/' component={Home} />
          <Route path='/topics' component={Topics} />
          <Route path='/settings' component={Settings} />
        </div>
      </Router>
    )
  }
}

export default App 
```

ç°åœ¨ï¼Œå‡è®¾æˆ‘ä»¬çš„`/settings`è·¯çº¿éå¸¸æ‹¥æŒ¤ã€‚å®ƒåŒ…å«ä¸€ä¸ªä¸°å¯Œçš„æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œè¶…çº§é©¬é‡Œå¥¥å…„å¼Ÿçš„åŸå§‹å‰¯æœ¬ï¼Œä»¥åŠç›–ä¼ŠÂ·è²åŠ›çš„é«˜æ¸…å›¾åƒã€‚æˆ‘ä»¬ä¸å¸Œæœ›ç”¨æˆ·åœ¨ä¸åœ¨`/settings`è·¯çº¿ä¸Šæ—¶ä¸å¾—ä¸ä¸‹è½½æ‰€æœ‰çš„å†…å®¹ã€‚è®©æˆ‘ä»¬ä½¿ç”¨åŠ¨æ€å¯¼å…¥å’Œ React çš„çŸ¥è¯†æ¥å¯¹`/settings`è·¯çº¿è¿›è¡Œä»£ç æ‹†åˆ†ã€‚

å°±åƒæˆ‘ä»¬åœ¨ React ä¸­è§£å†³ä»»ä½•é—®é¢˜ä¸€æ ·ï¼Œæˆ‘ä»¬æ¥åšä¸€ä¸ªç»„ä»¶ã€‚æˆ‘ä»¬å°±å«å®ƒ`DynamicImport`ã€‚`DynamicImport`çš„ç›®æ ‡æ˜¯åŠ¨æ€åŠ è½½ä¸€ä¸ªæ¨¡å—ï¼Œç„¶åï¼Œä¸€æ—¦å®ƒè¢«åŠ è½½ï¼Œå°±å°†è¯¥æ¨¡å—ä¼ é€’ç»™å®ƒçš„`children`ã€‚

```
const Settings = (props) => (
  <DynamicImport load={() => import('./Settings')}>
    {(Component) => Component === null
      ? <Loading />
      : <Component {...props} />}
  </DynamicImport> ) 
```

ä¸Šé¢çš„ä»£ç å‘Šè¯‰æˆ‘ä»¬å…³äº`DynamicImport`çš„ä¸¤ä¸ªé‡è¦ç»†èŠ‚ã€‚é¦–å…ˆï¼Œå®ƒå°†æ¥æ”¶ä¸€ä¸ª`load` propï¼Œå½“å®ƒè¢«è°ƒç”¨æ—¶ï¼Œå°†ä½¿ç”¨æˆ‘ä»¬å‰é¢ä»‹ç»çš„åŠ¨æ€å¯¼å…¥è¯­æ³•åŠ¨æ€å¯¼å…¥ä¸€ä¸ªæ¨¡å—ã€‚å…¶æ¬¡ï¼Œå®ƒå°†æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå®ƒçš„`children`ï¼Œè¿™ä¸ªå‡½æ•°éœ€è¦è¢«å¯¼å…¥çš„æ¨¡å—è°ƒç”¨ã€‚

åœ¨æˆ‘ä»¬æ·±å…¥åˆ°`DynamicImport`çš„å®ç°ä¹‹å‰ï¼Œè®©æˆ‘ä»¬è€ƒè™‘ä¸€ä¸‹æˆ‘ä»¬å¯èƒ½å¦‚ä½•å®ç°å®ƒã€‚æˆ‘ä»¬éœ€è¦åšçš„ç¬¬ä¸€ä»¶äº‹æ˜¯ç¡®ä¿è°ƒç”¨`props.load`ã€‚è¿™å°†è¿”å›ç»™æˆ‘ä»¬ä¸€ä¸ªæ‰¿è¯ºï¼Œå½“å®ƒè§£å†³ï¼Œåº”è¯¥æœ‰æ¨¡å—ã€‚ç„¶åï¼Œä¸€æ—¦æˆ‘ä»¬æœ‰äº†æ¨¡å—ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ³•æ¥å¼•èµ·é‡æ–°æ¸²æŸ“ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è°ƒç”¨`props.children`ä¼ é€’ç»™å®ƒé‚£ä¸ªæ¨¡å—ã€‚å¦‚ä½•åœ¨ React ä¸­é‡æ–°æ¸²æŸ“ï¼Ÿé€šè¿‡è®¾ç½®çŠ¶æ€ã€‚é€šè¿‡å°†åŠ¨æ€å¯¼å…¥çš„æ¨¡å—æ·»åŠ åˆ°`DynamicImport`çš„æœ¬åœ°çŠ¶æ€ï¼Œæˆ‘ä»¬éµå¾ªä¸æˆ‘ä»¬ä¹ æƒ¯çš„ React å®Œå…¨ç›¸åŒçš„è¿‡ç¨‹â€”â€”è·å–æ•°æ®â€”>è®¾ç½®çŠ¶æ€â€”>é‡æ–°å‘ˆç°ã€‚é™¤äº†è¿™æ¬¡ä¸æ˜¯â€œè·å–æ•°æ®â€ï¼Œè€Œæ˜¯â€œå¯¼å…¥æ¨¡å—â€ã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬ç»™`DynamicImport`æ·»åŠ ä¸€äº›åˆå§‹çŠ¶æ€ã€‚`component`å°†æœ€ç»ˆæˆä¸ºæˆ‘ä»¬åŠ¨æ€å¯¼å…¥çš„ç»„ä»¶ã€‚

```
class DynamicImport extends Component {
  state = {
    component: null
  }
} 
```

ç°åœ¨ï¼Œæˆ‘ä»¬éœ€è¦è°ƒç”¨`props.load`ã€‚è¿™å°†è¿”å›ç»™æˆ‘ä»¬ä¸€ä¸ªæ‰¿è¯ºï¼Œå½“å®ƒè§£å†³ï¼Œåº”è¯¥æœ‰æ¨¡å—ã€‚

```
class DynamicImport extends Component {
  state = {
    component: null
  }
  componentWillMount () {
    this.props.load()
      .then((component) => {
        this.setState(() => ({
          component
        }))
      })
  }
} 
```

è¿™é‡Œæœ‰ä¸€ä¸ªå°é—®é¢˜ã€‚å¦‚æœæˆ‘ä»¬åŠ¨æ€å¯¼å…¥çš„æ¨¡å—ä½¿ç”¨çš„æ˜¯ ES æ¨¡å—(å¯¼å‡ºé»˜è®¤å€¼)ï¼Œé‚£ä¹ˆå®ƒå°†æœ‰ä¸€ä¸ª. default å±æ€§ã€‚å¦‚æœæ¨¡å—ä½¿ç”¨çš„æ˜¯ commonjs (module.exports)ï¼Œå°±ä¸ä¼šã€‚è®©æˆ‘ä»¬ä¿®æ”¹ä»£ç æ¥é€‚åº”è¿™ç§æƒ…å†µã€‚

```
this.props.load()
  .then((component) => {
    this.setState(() => ({
      component: component.default ? component.default : component
    }))
  }) 
```

æ—¢ç„¶æˆ‘ä»¬æ­£åœ¨åŠ¨æ€å¯¼å…¥æ¨¡å—å¹¶å°†å…¶æ·»åŠ åˆ°æˆ‘ä»¬çš„çŠ¶æ€ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åšçš„æœ€åä¸€ä»¶äº‹å°±æ˜¯å¼„æ¸…æ¥š`render`æ–¹æ³•æ˜¯ä»€ä¹ˆæ ·å­çš„ã€‚å¦‚æœä½ è¿˜è®°å¾—ï¼Œå½“ä½¿ç”¨`DynamicImport`ç»„ä»¶æ—¶ï¼Œå®ƒçœ‹èµ·æ¥åƒè¿™æ ·

```
const Settings = (props) => (
  <DynamicImport load={() => import('./Settings')}>
    {(Component) => Component === null
      ? <Loading />
      : <Component {...props} />}
  </DynamicImport> ) 
```

æ³¨æ„ï¼Œæˆ‘ä»¬ä¼ é€’ç»™å®ƒä¸€ä¸ªå‡½æ•°ï¼Œå› ä¸ºå®ƒæ˜¯`children` propã€‚è¿™æ„å‘³ç€æˆ‘ä»¬éœ€è¦è°ƒç”¨`children`ä¼ é€’çš„æ˜¯`component`çŠ¶æ€ã€‚

```
class DynamicImport extends Component {
  state = {
    component: null
  }
  componentWillMount () {
    this.props.load()
      .then((component) => {
        this.setState(() => ({
          component: component.default ? component.default : component
        }))
      })
  }
  render() {
    return this.props.children(this.state.component)
  }
} 
```

ğŸ•º.åšå®ã€‚ç°åœ¨ï¼Œæ¯å½“æˆ‘ä»¬æƒ³è¦åŠ¨æ€å¯¼å…¥ä¸€ä¸ªæ¨¡å—æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†å®ƒåŒ…è£…åœ¨`DynamicImport`ä¸­ã€‚å¦‚æœæˆ‘ä»¬å¯¹æ‰€æœ‰çš„è·¯ç”±éƒ½è¿™æ ·åšï¼Œæˆ‘ä»¬çš„ä»£ç çœ‹èµ·æ¥ä¼šåƒè¿™æ ·ã€‚

```
import React, { Component } from 'react'
import {
  BrowserRouter as Router,
  Route,
  Link,
} from 'react-router-dom'

class DynamicImport extends Component {
  state = {
    component: null
  }
  componentWillMount () {
    this.props.load()
      .then((component) => {
        this.setState(() => ({
          component: component.default ? component.default : component
        }))
      })
  }
  render() {
    return this.props.children(this.state.component)
  }
}

const Home = (props) => (
  <DynamicImport load={() => import('./Home')}>
    {(Component) => Component === null
      ? <p>Loading</p>
      : <Component {...props} />}
  </DynamicImport> )

const Topics = (props) => (
  <DynamicImport load={() => import('./Topics')}>
    {(Component) => Component === null
      ? <p>Loading</p>
      : <Component {...props} />}
  </DynamicImport> )

const Settings = (props) => (
  <DynamicImport load={() => import('./Settings')}>
    {(Component) => Component === null
      ? <p>Loading</p>
      : <Component {...props} />}
  </DynamicImport> )

class App extends Component {
  render() {
    return (
      <Router>
        <div>
          <ul>
            <li><Link to='/'>Home</Link></li>
            <li><Link to='/topics'>Topics</Link></li>
            <li><Link to='/settings'>Settings</Link></li>
          </ul> 
          <hr />

          <Route exact path='/' component={Home} />
          <Route path='/topics' component={Topics} />
          <Route path='/settings' component={Settings} />
        </div>
      </Router>
    )
  }
}

export default App 
```

æˆ‘ä»¬æ€ä¹ˆçŸ¥é“è¿™å®é™…ä¸Šæ˜¯å·¥ä½œå’Œä»£ç åˆ†å‰²æˆ‘ä»¬çš„è·¯çº¿ï¼Ÿå¦‚æœä½ ç”¨ Create React App åˆ›å»ºçš„åº”ç”¨è¿è¡Œ`npm run build`ï¼Œä½ ä¼šçœ‹åˆ°æˆ‘ä»¬çš„åº”ç”¨è¢«æ‹†åˆ†äº†ã€‚

[![code splitting in action](../Images/34d555df8052fdf8c590c51a6221a349.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--7_pzfVec--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://tylermcginnis.com/static/e2e31d0c32d04fe25ee03fb87a15b0ad-fed13.png)

æ¯ä¸ª`chunk`éƒ½æ˜¯æˆ‘ä»¬ app é‡Œçš„æ¯ä¸ªåŠ¨æ€`import()`ã€‚

> ä½ å·²ç»èµ°åˆ°è¿™ä¸€æ­¥äº†ã€‚éœ¹é›³èˆğŸ•ºğŸ‘©â€ğŸ¤

è¿˜è®°å¾—ä¹‹å‰æˆ‘ä»¬è®¨è®ºè¿‡æœ‰ä¸¤ç§ä¸»è¦çš„æ–¹æ³•æ¥å¯¹ä½ çš„åº”ç”¨è¿›è¡Œä»£ç æ‹†åˆ†å—ï¼Ÿæˆ‘ä»¬æœ‰è¿™ä¸ªæ–¹ä¾¿çš„å°æŒ‡å—ã€‚

> 1.  Split at the routing level. 2) Split at the component level.

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬åªè®¨è®ºäº†è·¯ç”±çº§åˆ«çš„åˆ†å‰²ã€‚è¿™æ˜¯å¾ˆå¤šäººåœä¸‹æ¥çš„åœ°æ–¹ã€‚ä»…åœ¨è·¯ç”±çº§åˆ«è¿›è¡Œä»£ç æ‹†åˆ†å°±åƒåˆ·ç‰™ä½†ä»ä¸ä½¿ç”¨ç‰™çº¿ä¸€æ ·ã€‚ä½ çš„ç‰™é½¿åŸºæœ¬ä¸Šæ˜¯å¹²å‡€çš„ï¼Œä½†è¿˜æ˜¯ä¼šæœ‰è›€ç‰™ã€‚

ä¸è¦æŠŠä»£ç åˆ†å‰²çœ‹ä½œæ˜¯æŒ‰è·¯å¾„åˆ†å‰²ä½ çš„åº”ç”¨ç¨‹åºï¼Œä½ åº”è¯¥æŠŠå®ƒçœ‹ä½œæ˜¯æŒ‰ç»„ä»¶åˆ†å‰²ä½ çš„åº”ç”¨ç¨‹åº(æ¯•ç«Ÿï¼Œåªæ˜¯ç»„ä»¶)ã€‚å¦‚æœæ‚¨æœ‰ä¸€ä¸ªå­˜åœ¨äºæ¨¡æ€ä¸­çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œé‚£ä¹ˆå³ä½¿æ¨¡æ€ä»æœªæ‰“å¼€ï¼Œä»…æŒ‰è·¯å¾„åˆ†å‰²ä»å°†åŠ è½½ç¼–è¾‘å™¨ã€‚

åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œè¿™æ›´åƒæ˜¯ä½ å¤§è„‘ä¸­éœ€è¦å‘ç”Ÿçš„èŒƒå¼è½¬å˜ï¼Œè€Œä¸æ˜¯ä»»ä½•æ–°çŸ¥è¯†ã€‚ä½ å·²ç»çŸ¥é“å¦‚ä½•ç”¨`import()`åŠ¨æ€å¯¼å…¥æ¨¡å—ï¼Œç°åœ¨ä½ åªéœ€è¦å¼„æ¸…æ¥šä½ çš„åº”ç”¨ç¨‹åºä¸­çš„å“ªäº›ç»„ä»¶ä½ å¯ä»¥æ¨è¿Ÿä¸‹è½½ï¼Œç›´åˆ°ä½ çš„ç”¨æˆ·éœ€è¦å®ƒä»¬ã€‚

> å¦‚æœæˆ‘æ²¡æœ‰æåˆ° [React Loadable](https://github.com/thejameskyle/react-loadable) å°±ç»“æŸè¿™ç¯‡æ–‡ç« ï¼Œé‚£æˆ‘å°±å¤ªå‚»äº†ã€‚å®ƒæ˜¯â€œç”¨åŠ¨æ€å¯¼å…¥åŠ è½½ç»„ä»¶çš„é«˜é˜¶ç»„ä»¶â€ã€‚æœ¬è´¨ä¸Šï¼Œå®ƒæ‰€åšçš„å°±æ˜¯æŠŠæˆ‘ä»¬åœ¨è¿™ç¯‡æ–‡ç« ä¸­è°ˆåˆ°çš„æ‰€æœ‰ä¸œè¥¿éƒ½æ‰“åŒ…æˆä¸€ä¸ªæ¼‚äº®çš„å° APIã€‚å®ƒç”šè‡³å¯ä»¥å¤„ç†ä¸€äº›æˆ‘ä»¬æ²¡æœ‰æåˆ°çš„è¾¹ç¼˜æƒ…å†µï¼Œæ¯”å¦‚é”™è¯¯å¤„ç†å’ŒæœåŠ¡å™¨ç«¯æ¸²æŸ“ã€‚å¦‚æœä½ æƒ³è¦ä¸€ä¸ªç®€å•çš„ï¼Œå¼€ç®±å³ç”¨çš„ä»£ç åˆ†å‰²è§£å†³æ–¹æ¡ˆï¼Œè¯·æŸ¥çœ‹å®ƒã€‚

* * *

è¿™ç¯‡æ–‡ç« æœ€åˆå‘è¡¨åœ¨ TylerMcGinnis.com å¤§å­¦ï¼Œæ˜¯ä»–ä»¬ T2 ååº”è·¯ç”±å™¨è¯¾ç¨‹çš„ä¸€éƒ¨åˆ†ã€‚