# åœ¨ Swift æµ‹è¯•ä¸­ç»™å‡º

> åŸæ–‡:[https://dev.to/onmyway133/given-when-then-in-swift-tests](https://dev.to/onmyway133/given-when-then-in-swift-tests)

### [](#spec)è§„æ ¼

ä½¿ç”¨åƒ [Quick](https://github.com/Quick/Quick) è¿™æ ·çš„`spec`æµ‹è¯•æ¡†æ¶æ˜¯ä¸é”™çš„ï¼Œè¿™ä½¿å¾—`BDD`é£æ ¼æˆä¸ºå¯èƒ½ã€‚

```
describe("the 'Documentation' directory") {
  it("has everything you need to get started") {
    let sections = Directory("Documentation").sections
    expect(sections).to(contain("Organized Tests with Quick Examples and Example Groups"))
    expect(sections).to(contain("Installing Quick"))
  }

  context("if it doesn't have what you're looking for") {
    it("needs to be updated") {
      let you = You(awesome: true)
      expect{you.submittedAnIssue}.toEventually(beTruthy())
    }
  }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä½†æ˜¯ä¸‡ä¸€ä½ ä¸æƒ³è¦é¢å¤–çš„æ¡†æ¶ï¼Œå¹¶ä¸”æƒ³å°½å¯èƒ½ä½å¾—ç¦»è‹¹æœ SDK è¿‘ä¸€äº›ï¼Œè¿™é‡Œæœ‰å‡ ä¸ªå°æŠ€å·§ã€‚

### [](#naming)å‘½å

è¿™æ˜¯æˆ‘éå¸¸å–œæ¬¢çš„ä¸€æœ¬ä¹¦ã€Šå•å…ƒæµ‹è¯•çš„è‰ºæœ¯ã€‹ã€‚å¦‚æœä½ ä¸ä»‹æ„ä¸‹åˆ’çº¿ï¼Œä½ å¯ä»¥éµå¾ª[unit of work _ state under test _ expected behavior](http://osherove.com/blog/2005/4/3/naming-standards-for-unit-tests.html)ç»“æ„

```
func testSum_NegativeNumberAs1stParam_ExceptionThrown()
func testSum_NegativeNumberAs2ndParam_ExceptionThrown()
func testSum_simpleValues_Calculated() 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#given-when-then)å½“é‚£æ—¶ç»™äºˆ

è¿™æ˜¯ä» BDD æ¥çš„ï¼Œåœ¨[é»„ç“œ](https://github.com/cucumber/cucumber/wiki/Given-When-Then)ç»ƒäº†å¾ˆå¤šã€‚ä½ å¯ä»¥é˜…è¯»æ›´å¤šå…³äº https://martinfowler.com/bliki/GivenWhenThen.html çš„[ã€‚](https://martinfowler.com/bliki/GivenWhenThen.html)

é¦–å…ˆï¼Œç»™`XCTestCase`
æ·»åŠ ä¸€äº›æ‰©å±•

```
import XCTest

extension XCTestCase {
  func given(_ description: String, closure: () throws -> Void) throws {
    try closure()
  }

  func when(_ description: String, closure: () throws -> Void) throws {
    try closure()
  }

  func then(_ description: String, closure: () throws -> Void) throws {
    try closure()
  }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç„¶åï¼Œä¸ºäº†æµ‹è¯•ï¼Œåªéœ€æŒ‰ç…§`given when then`

```
func testRemoveObject() throws {
  try given("set to storage") {
    try storage.setObject(testObject, forKey: key)
  }

  try when("remove object from storage") {
    try storage.removeObject(forKey: key)
  }

  try then("there is no object in memory") {
    let memoryObject = try? storage.memoryCache.object(forKey: key) as User
    XCTAssertNil(memoryObject)
  }

  try then("there is no object on disk") {
    let diskObject = try? storage.diskCache.object(forKey: key) as User
    XCTAssertNil(diskObject)
  }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘è§‰å¾—è¿™ä¸ªæ¯”è¯„è®ºæ›´æœ‰æ„æ€ã€‚æ‰€æœ‰éƒ½æ˜¯ä»£ç å’Œæè¿°æ€§çš„ã€‚è¿˜å¯ä»¥è¿›ä¸€æ­¥å¼€å‘æŠ›å‡º`description`æ–‡æœ¬ã€‚

æ”¯æŒæˆ‘çš„åº”ç”¨ç¨‹åº

*   [æ¨é€ Hero -æµ‹è¯•æ¨é€é€šçŸ¥çš„çº¯ Swift åŸç”Ÿ macOS åº”ç”¨](https://onmyway133.com/pushhero)
*   [PastePal -ç²˜è´´æ¿ã€ä¾¿ç¬ºå’Œå¿«æ·æ–¹å¼ç®¡ç†å™¨](https://onmyway133.com/pastepal)
*   [å¿«é€Ÿæ£€æŸ¥-æ™ºèƒ½å¾…åŠäº‹é¡¹ç®¡ç†å™¨](https://onmyway133.com/quickcheck)
*   [Alias - App å’Œæ–‡ä»¶å¿«æ·æ–¹å¼ç®¡ç†å™¨](https://onmyway133.com/alias)
*   [æˆ‘çš„å…¶ä»–åº”ç”¨](https://onmyway133.com/apps/)

â¤ï¸â¤ï¸ğŸ˜‡ğŸ˜ğŸ¤˜â¤ï¸â¤ï¸