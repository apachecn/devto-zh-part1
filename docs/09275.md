# å¯»æ‰¾è‡ªæˆ‘:å¦‚ä½•è·å¾—å’Œåˆ†æä½ çš„è°·æ­Œæœç´¢å†å²

> åŸæ–‡:[https://dev . to/walker/the-search-for-self-how-to-analyze-your-history of-Google-searches](https://dev.to/walker/the-search-for-self-how-to-obtain-and-analyze-your-history-of-google-searches)

è°·æ­Œçš„æœç´¢å¼•æ“å¦‚æ­¤å½»åº•åœ°èå…¥äº†æˆ‘ä»¬çš„æ—¥å¸¸ç”Ÿæ´»ï¼Œä»¥è‡³äºæ„Ÿè§‰å®ƒæ›´åƒæ˜¯ä¸€ä¸ªè®¤çŸ¥è¿‡ç¨‹çš„æœ€åé˜¶æ®µï¼Œè€Œä¸æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è½¯ä»¶ã€‚ç°ä»£äººä¸è§‰å¾—å¥‡æ€ªï¼Œä»–ä»¬è§‰å¾—å¥‡æ€ªï¼Œç„¶åè°·æ­Œä¸€ä¸‹ï¼ŒæŠŠå­—ç¬¦æ•²è¿›ä½ çš„åœ°å€æ å°±åƒæœ€åˆçš„æƒ³æ³•ä¸€æ ·è‡ªç„¶åˆç†ã€‚

å› æ­¤ï¼Œä½ åœ¨ä¸€æ®µæ—¶é—´å†…ç§¯ç´¯çš„è°·æ­Œæœç´¢é‡å¯ä»¥ä½œä¸ºä½ çš„ç²¾ç¥çŠ¶æ€ã€å¥½å¥‡å¿ƒã€é‡å¿ƒå’Œææƒ§çš„å¯é ä»£ç†ã€‚å¹¸è¿çš„æ˜¯(æˆ–è€…ä¸å¹¸è¿ï¼Œå–å†³äºä½ å¯¹éšç§çš„å®šä¹‰)ï¼Œè°·æ­Œä¼šè®°å½•ä½ çš„æœç´¢å¹¶æä¾›ç»™ä½ ï¼Œå‰ææ˜¯ä½ å·²ç»ç™»å½•äº†è°·æ­Œè´¦æˆ·(é€šå¸¸æ˜¯é€šè¿‡ Gmail)ã€‚å¦‚æœä½ ä»æœª[è°ƒæ•´è¿‡ä½ çš„è®¾ç½®](https://support.google.com/accounts/answer/7028918)æ¥åœæ­¢è¿™ç§è¡Œä¸ºï¼Œä»¥ä¸‹æ˜¯å¦‚ä½•æ‰¾åˆ°ã€è§£æå’Œå¯è§†åŒ–è¿™äº›æ•°æ®ï¼Œä½œè€…æ‰®æ¼”è±šé¼ ã€‚

## 1.ä¸‹è½½æ•°æ®

å‰å¾€[https://takeout.google.com/settings/takeout](https://takeout.google.com/settings/takeout)ï¼Œåœ¨é‚£é‡Œä½ ä¼šå‘ç°å„ç§å¯ç”¨çš„ä¸ªäººæ•°æ®é›†ï¼ŒåŒ…æ‹¬ä½ çš„ GChat å¯¹è¯å’Œç”µå­é‚®ä»¶ã€‚å–æ¶ˆå…¨éƒ¨é€‰æ‹©(â€œä¸é€‰â€)ï¼Œç„¶åé‡æ–°æ£€æŸ¥æœç´¢å¹¶ç‚¹å‡»â€œä¸‹ä¸€æ­¥â€åœ¨ä¸‹ä¸€é¡µï¼Œæ‚¨å¯ä»¥é€‰æ‹©æ–‡ä»¶ç±»å‹(*)ã€‚tgz* å…è®¸æ›´å°‘çš„æ–‡ä»¶)å’Œäº¤ä»˜æ–¹å¼(æˆ‘åšæŒé€šè¿‡ç”µå­é‚®ä»¶å‘é€ä¸‹è½½é“¾æ¥)ã€‚æ‰“å¼€é‚®ä»¶ï¼Œç‚¹å‡»ï¼Œä¸‹è½½æ¡£æ¡ˆï¼Œè§£å‹åï¼Œä½ ä¼šå‘ç°æ–‡ä»¶å¤¹â€œå¤–å–â€å’Œâ€œæœç´¢â€ä¸‹æœ‰ä¸€å †æ–‡ä»¶

[![](img/5aa54d4b78c5f598797fc5da314d8b26.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--OJYnZpSk--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2AiHql0gslNV3rRkx90CG5_Q.gif)

## 2.å‡†å¤‡æ•°æ®

æ•°æ®æ˜¯ JSON æ ¼å¼çš„ï¼Œä½†æ˜¯ä»ç„¶ä»¥ç›¸å¯¹ç®€å•çš„æ–¹å¼ç»„ç»‡ï¼Œå¹¶ä¸”å¯ä»¥åœ¨ Python ä¸­ä¸å¤ªéº»çƒ¦åœ°å±•å¹³æˆå‘é‡:

```
import json
import os
import datetime
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
from collections import Counter

#your file path here!
files= os.listdir('Searches')
del files[0]

searches =[]
dates = []
for file in files:
    with open('Searches/%s'%(file)) as json_data:
        d = json.load(json_data)
    for i in range(len(d['event'])):
        for j in range(len((d['event'][i][u'query'][u'id']))):
            searches.append(d['event'][i][u'query'][u'query_text']) 
            dates.append(d['event'][i][u'query'][u'id'][j][u'timestamp_usec'])

dates = [datetime.datetime.fromtimestamp(int(i)/1000000).strftime('%Y-%m-%d %H:%M:%S') 
        for i in dates]
searches = [i.encode('utf-8') for i in searches] 
```

## 3.åˆ†ææ•°æ®

æˆ‘ä»¬å°†ä»ä¸€äº›é«˜å±‚æ•°å­—å¼€å§‹ã€‚ä» 2014 å¹´ç§‹å­£å¼€å§‹çš„ 886 å¤©é‡Œï¼Œæˆ‘æ‰§è¡Œäº†è¿‘ 64000 æ¬¡è°·æ­Œæœç´¢ï¼Œå¹³å‡æ¯å¤©è¶…è¿‡ 70 æ¬¡ã€‚æˆ‘æ¯å¤©åœ¨å·¥ä½œä¸­ä½¿ç”¨æˆ‘çš„ä¸ªäººç¬”è®°æœ¬ç”µè„‘ï¼Œè¿™æœ‰åŠ©äºè§£é‡Šå¦‚æ­¤å¤§çš„æ•°é‡ï¼Œä½†æ˜¾ç„¶ä»‹ç»ä¸­æåˆ°çš„è°·æ­Œæœç´¢çš„æ™®éæ€§å¹¶æ²¡æœ‰è¢«å¤¸å¤§ï¼

ä¸è¿‡ï¼Œè¿˜æœ‰æ›´å¤šæ¨¡å¼å€¼å¾—æŒ–æ˜ã€‚ä½ å¯ä»¥çœ‹çœ‹æ¯å°æ—¶çš„è¶‹åŠ¿:

```
hours = [datetime.datetime.strptime(i, '%Y-%m-%d %H:%M:%S').hour for i in dates]
n, bins, patches = plt.hist(hours, 24, facecolor='blue', alpha=0.75)
plt.xticks([0,6,12,18], ['12 AM','6 AM', '12 PM', '6 PM'], fontsize=18)
plt.xlabel('Hour', fontsize=24)
plt.ylabel('Frequency', fontsize=24)
plt.gcf().set_size_inches(18.5, 10.5, forward=True)
plt.show() 
```

[![](img/3cc7380c7211a065196c82bb294d54a6.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--zBSNkqRm--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2AdrWVIJlSMZ1BTGs3VTCp8Q.png)

æœ€ç®€å•åœ°è¯´ï¼Œä¸€å°æ—¶ä¸€å°æ—¶çš„å›¾è¡¨åæ˜ äº†æˆ‘çš„æ„è¯†:ä¸è°·æ­Œçš„äººå¯èƒ½ç¡ç€äº†ã€‚ä¸è¿‡ï¼Œä¸Šç­åä¸ä¹…ï¼Œæˆ‘å°±å¼€å§‹ç–¯ç‹‚åœ°æœç´¢ï¼Œåœ¨ä¸‹åˆ 3 ç‚¹å·¦å³ï¼Œå¥½å¥‡å¿ƒè¾¾åˆ°äº†é¡¶å³°ã€‚æ™šä¸Šç¨äº‹ä¼‘æ¯åï¼Œæˆ‘ä¼šåœ¨æ™šä¸Š 10 ç‚¹å›åˆ°æœç´¢å·¥ä½œä¸­ï¼Œç›´åˆ°åˆå¤œè¿‡åæ‰ç»“æŸ(æˆ‘æ˜¯ä¸ªæœ‰ç‚¹å¤œçŒ«å­çš„äºº)ã€‚

æˆ‘åˆ°åº•åœ¨è°·æ­Œä»€ä¹ˆå‘¢ï¼ŸæŒ‰è¯é¢‘æ’åºå¹¶ä¸å¤ªéš¾:

```
combo = ' '.join(searches)
freqs = Counter(combo.split())
top = freqs.most_common(40)

words = []
counts = []
for i in range(40):
    words.append(top[i][0])
    counts.append(top[i][1])

words.reverse()
counts.reverse()

plt.barh(range(40), counts, align='center', color='b', alpha=0.75)
plt.yticks(range(40), words, fontsize=16)
plt.gcf().set_size_inches(18.5, 10.5, forward=True)
plt.show() 
```

[![](img/3d21fa8165de71672b4b1ed924699bd1.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--t1h5wELb--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/on7i3xcjecvg64a2ndp1.png)

è‹±è¯­ä¸­å¸¸è§çš„ç–‘ç‚¹å¦‚â€œTheâ€å’Œâ€œofâ€å†²æ·¡äº†åˆ—è¡¨ï¼Œä½†ä½ ä»ç„¶å¯ä»¥çœ‹å‡ºæˆ‘è¿‡å»å‡ å¹´çš„æƒ³æ³•ã€‚æˆ‘å®šæœŸå†™åšå®¢ï¼Œå–œæ¬¢é¿å…è¿‡åº¦ä½¿ç”¨ä¸€ä¸ªè¯ï¼Œå› æ­¤éå¸¸ä¾èµ–äºæœç´¢åŒä¹‰è¯ã€‚æˆ‘æ€»æ˜¯å¸Œæœ›ä½“è‚²å‚è€ƒç½‘ç«™æˆä¸ºæˆ‘çš„é¦–é€‰ç»“æœï¼Œæ‰€ä»¥æˆ‘ä¼šåœ¨ä»»ä½•æ£’çƒæˆ–ç¯®çƒæŸ¥è¯¢ä¸­æ·»åŠ â€œrefâ€ã€‚æˆ‘ä½åœ¨çº½çº¦ï¼Œç»å¸¸å»å¥èº«æˆ¿ã€‚æˆ‘æ˜¯ä¸€åæœ‰æŠ±è´Ÿçš„æ•°æ®ç§‘å­¦å®¶(â€œæ•°æ®â€ã€â€œpythonâ€ã€â€œrâ€)ã€‚æˆ‘æ˜¯å…¸å‹çš„ç¾å›½äºº(â€œæ£’çƒâ€ã€â€œå›½å®¶â€)ï¼Œä½†ä¹Ÿæ‹…å¿ƒå¦‚ä»Šè¿™æ„å‘³ç€ä»€ä¹ˆ(â€œç‰¹æœ—æ™®â€)ã€‚

å½“ç„¶ï¼Œæ¯ä¸€é¡¹éƒ½æœ‰æ—¶é—´çš„æˆåˆ†ã€‚å‡ºäºåŒæ ·çš„åŸå› ï¼Œäººä»¬ä¸ä¼šæ¯å¤©éƒ½ç”¨è°·æ­Œæœç´¢åŒæ ·çš„ä¸œè¥¿ï¼Œä»–ä»¬ä¹Ÿä¸ä¼šæ¯å¤©éƒ½æƒ³åŒæ ·çš„äº‹æƒ…ã€‚å› æ­¤ï¼Œå¦‚æœæˆ‘ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥å—æˆ‘çš„æœç´¢æ•°æ®ã€å¼€å§‹å’Œç»“æŸæ—¥æœŸï¼Œä»¥åŠæˆ‘æ„Ÿå…´è¶£çš„ä¸€ç»„æœ¯è¯­...

```
def term_by_week(data, start, end, terms, normalized=False):
    start = datetime.datetime.strptime(start, '%Y-%m-%d')
    end = datetime.datetime.strptime(end, '%Y-%m-%d')
    weeks=[]
    while start < end:
        weeks.append(start.strftime('%Y-%m-%d'))
        start += datetime.timedelta(days=7)

    for term in terms:
        term_weeks = []
        for i in range(len(weeks)-1):
            term_weeks.append(sum((data['time'] > weeks[i]) & 
                      (data['time'] < weeks[i+1]) &
                      (data['search'].str.contains(term))))
        termlength = len(term_weeks)
        if normalized == True:
            term_weeks = [i/float(max(term_weeks)) for i in term_weeks]
        plt.plot(range(termlength), term_weeks, label=term, linewidth=5.0)

    ticks = range(1, len(weeks), len(weeks)/4)[0:4] + [len(weeks)-1]
    plt.xticks(ticks, [weeks[i] for i in ticks], fontsize=15)
    plt.xlim((0,len(weeks)))
    plt.xlabel('Week', fontsize=24)
    plt.ylabel('Frequency', fontsize=24)
    plt.legend()
    plt.gcf().set_size_inches(18.5, 10.5, forward=True)
    plt.show() 
```

...æˆ‘å¯ä»¥æŒ‘é€‰ä¸€äº›ç†Ÿæ‚‰çš„è¯é¢˜ï¼Œå¹¶æ£€æŸ¥å®ƒä»¬éšæ—¶é—´çš„æ³¢åŠ¨ï¼Œè®©æˆ‘æ„Ÿè§‰åˆ°éšç€æ—¶é—´çš„æ¨ç§»ï¼Œæˆ‘çš„å…´è¶£å’Œé‡ç‚¹æ˜¯å¦‚ä½•å˜åŒ–çš„(è¿™éœ€è¦å‡ åˆ†é’Ÿæ—¶é—´):

```
d = {"search": searches, "time": dates}
googled = pd.DataFrame(d)

term_by_week(googled, '2014-10-01', '2017-03-05', 
        ('trump', 'warriors', 'python', 'ibm')) 
```

[![](img/df80a117e67556c5f8a320620c9cdc27.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--LcpG7ny0--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/prz47mfjph64qaz6jpmd.png)

åœ¨æ²¡æœ‰è§è¿‡æˆ‘çš„æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥ä½¿ç”¨è¿™æ ·çš„å›¾è¡¨æ¥äº†è§£æˆ‘æ˜¯è°ï¼Œä»¥åŠæˆ‘åœ¨å¾ˆé•¿ä¸€æ®µæ—¶é—´å†…éƒ½åœ¨æƒ³äº›ä»€ä¹ˆ(å½“ç„¶ï¼Œè¿™ä¹Ÿæ˜¯ Google *ä¸ºäº†èµšå¤§é’±è€Œåšçš„äº‹æƒ…)ã€‚æ¯•ä¸šåä¸€ç›´åœ¨ IBM (teal)å·¥ä½œï¼Œç›´åˆ° 2015 å¹´å¤å¤©è·³æ§½ã€‚å‡ ä¸ªæœˆæ¥ï¼Œæˆ‘å¯†åˆ‡å…³æ³¨é‡‘å·å‹‡å£«é˜Ÿç ´çºªå½•çš„èµ›å­£(ç»¿è‰²)ã€‚2016 å¹´æ˜¥å¤©ï¼Œæˆ‘å†³å®šå­¦ä¹  Python (red)ï¼Œè¿™æ˜¯ç”¨äºè¿™ä¸€åˆ‡çš„ç¼–ç¨‹è¯­è¨€ã€‚éšç€é€‰ä¸¾çš„ä¸´è¿‘ï¼Œæˆ‘éå¸¸å…³æ³¨ç‰¹æœ—æ™®(è“è‰²),ä¼‘æ¯äº†ä¸€æ®µéå¸¸å¿…è¦çš„æ—¶é—´ï¼Œç„¶åé‡æ–°å‚åŠ äº†ä»–çš„å°±èŒå…¸ç¤¼ã€‚*

ä¸å¹¸çš„æ˜¯ï¼Œä½ å¯¹è¿™ç¯‡æ–‡ç« çš„æŒä¹…å…³æ³¨å¯èƒ½ä¼šæé†’ä½ è°·æ­Œçš„æ— æ‰€ä¸çŸ¥ã€‚ä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°äº†æˆ‘åœ¨å¯¼å‡ºæ•°æ®æ—¶æ²¡æœ‰æ£€æŸ¥çš„æ‰€æœ‰å…¶ä»–ä¸œè¥¿ï¼Œä»åœ°å›¾åˆ° GChat å¯¹è¯åˆ°ä¸ªäººæ—¥å†ã€‚å…³äºä½ çš„æ•°å­—è¶³è¿¹åº”è¯¥æœ‰å¤šå¤§ï¼Œä»¥åŠè°åº”è¯¥å¯ä»¥è®¿é—®å®ƒï¼Œè¿˜æœ‰æ¼«é•¿è€Œå¤æ‚çš„å¯¹è¯è¦è¿›è¡Œã€‚

æœ‰ä¸€ä»¶äº‹æ˜¯è‚¯å®šçš„ï¼Œé‚£å°±æ˜¯ä½ æœ‰æƒåˆ©æŸ¥çœ‹ä½ è¿‡å»çš„åœ¨çº¿è¡Œä¸ºï¼Œæ­£å¦‚ä¸Šé¢æ‰€å±•ç¤ºçš„ï¼Œä½ æœ‰èƒ½åŠ›å‘ç°è¿™äº›è¡Œä¸ºçš„æ„ä¹‰ã€‚åœ¨ä¸€ä¸ªæˆ‘ä»¬æ‰€æœ‰äººéƒ½å¤ªåˆ†å¿ƒè€Œæ— æ³•åœ¨ç¡è§‰å‰å†™æ—¥è®°çš„æ—¶ä»£ï¼Œè°·æ­Œæä¾›äº†ä¸€ç§è¿‘ä¼¼äºæ—¥è®°çš„ä¸œè¥¿ï¼Œè€Œä¸”åœ¨è¿™ä¸€ç‚¹ä¸Šå¯èƒ½æ›´è¯šå®ä¸€ç‚¹ã€‚

æ‰€ä»¥æˆ‘é¼“åŠ±ä½ è‡³å°‘ä¸‹è½½ä½ çš„æ•°æ®ï¼Œç”šè‡³å°è¯•åˆ†æä¸€ä¸‹ã€‚å®Œæ•´çš„ä»£ç é“¾æ¥åœ¨è¿™é‡Œï¼Œæˆ‘å¾ˆä¹æ„å¸®åŠ©é‚£äº›å‘ç°è¯­æ³•éš¾ä»¥ç†è§£çš„äººï¼Œå¹¶å°è¯•å›ç­”ä½ å¯¹è¿™ä¸ªè¿‡ç¨‹å¯èƒ½æœ‰çš„ä»»ä½•é—®é¢˜â€¦

â€¦æˆ–è€…ä½ å¯ä»¥è°·æ­Œä¸€ä¸‹ã€‚ğŸ˜‰

*è¿™ç¯‡æ–‡ç« æœ€åˆå‘è¡¨åœ¨æˆ‘çš„æ•°æ®åšå®¢ä¸Šï¼Œ[complem . city](https://perplex.city/the-search-for-self-60e2149cffa3)T3ã€‘*