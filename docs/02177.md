# ELI5 -â€œæ˜ å°„-è¿‡æ»¤-å‡å°‘â€

> åŸæ–‡:[https://dev.to/__namc/eli5-åœ°å›¾-æ»¤é•œ-è¿˜åŸ-40p](https://dev.to/__namc/eli5---map-filter-reduce-40p)

æˆ‘æœ€è¿‘æ¥è§¦çš„è®¸å¤šå¼€å‘äººå‘˜å°† map-reduce-filter ä¸å‡½æ•°å¼ç¼–ç¨‹è”ç³»åœ¨ä¸€èµ·ï¼Œä»–ä»¬å®é™…ä¸Šå®³æ€•è¿™ç§ç»„åˆã€‚è¿™æ˜¯ä»–ä»¬é¿å…ä½¿ç”¨å‡½æ•°å¼è¯­è¨€çš„åŸå› ä¹‹ä¸€ï¼Œå› ä¸º**ä¸Šå¸ç¦æ­¢ä»–ä»¬å­¦ä¹ å¦‚ä½•ä½¿ç”¨ mapã€reduce å’Œ filter**â€”â€”Rubyã€Pythonã€Javascriptã€PHPã€Erlangã€Scala å’Œè®¸å¤šå…¶ä»–è¯­è¨€ä¸­çš„ 3 ä¸ªå‡½æ•°ã€‚

é‚£ä¹ˆè´´å›¾-å‡å°‘-è¿‡æ»¤åˆ°åº•æœ‰ä»€ä¹ˆå¤§ä¸äº†çš„å‘¢ï¼Ÿ

> å®ƒä»¬åªæ˜¯å‡½æ•°å¼ç¼–ç¨‹ä¸­ä½¿ç”¨çš„é«˜é˜¶å‡½æ•°ã€‚å®ƒä»¬å¯ä»¥å¤„ç†ä»»ä½•å¯è¿­ä»£çš„ä¸œè¥¿(åˆ—è¡¨ã€å…ƒç»„ã€é›†åˆã€å­—å…¸ï¼Œç”šè‡³å­—ç¬¦ä¸²)ã€‚

è®©æˆ‘ä»¬è€ƒè™‘ä¸€ä¸ªé—®é¢˜é™ˆè¿°ï¼Œä»¥ä¾¿èƒ½å¤Ÿæ›´æ¸…æ¥šåœ°ç†è§£ã€‚(ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œæˆ‘ä»¬ä½¿ç”¨ Pythonï¼Œä½†æ˜¯æˆ‘å°†æ·»åŠ ä¸€ä¸ªè¦ç‚¹ï¼Œè¯´æ˜å¦‚ä½•åœ¨å„ç§å…¶ä»–è¯­è¨€ä¸­åšåŒæ ·çš„äº‹æƒ…)

**é—®é¢˜é™ˆè¿°:
æˆ‘ä»¬éœ€è¦[0ï¼Œ9]** èŒƒå›´å†…æ‰€æœ‰æ•´æ•°çš„å¶å¹³æ–¹å’Œ

### [](#map-transform)è´´å›¾(å˜æ¢)

è¿™ä¸ªå‡½æ•°æ¥å—ä¸€ä¸ªä¸€å…ƒå‡½æ•°å’Œä¸€ä¸ªåˆ—è¡¨ã€‚ä¸€å…ƒå‡½æ•°æ˜¯æ¥å—ä¸€ä¸ªå˜é‡çš„å‡½æ•°ã€‚map å‡½æ•°çš„ç»“æœæ˜¯ä¸€ä¸ªç›¸åŒå¤§å°çš„è½¬æ¢å€¼åˆ—è¡¨ã€‚å€¼çš„è½¬æ¢å–å†³äºå¸¦å‚æ•°çš„ä¸€å…ƒå‡½æ•°çš„å®šä¹‰ã€‚

**åœ¨**æ—¶ä½¿ç”¨:æ‚¨æƒ³è¦å°†ä¸€ä¸ªé›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ è½¬æ¢ä¸ºå¦ä¸€ä¸ªå€¼é›†åˆã€‚

**å‚æ•°**:ä¸€å…ƒå˜æ¢å‡½æ•°&è¦å˜æ¢çš„æ•°ç»„

ä¸ºäº†è§£å†³é—®é¢˜é™ˆè¿°ï¼Œæ¯”æ–¹è¯´ï¼Œæˆ‘ä»¬çš„ç¬¬ä¸€æ­¥æ˜¯åœ¨æ•°å­—[0ï¼Œ9]
çš„èŒƒå›´ä¸Šæ˜ å°„è®¡ç®—å¹³æ–¹çš„å‡½æ•°

```
>>> nums = map(lambda x : x*x, [i for i in range(10)])
>>> nums
[0, 1, 4, 9, 16, 25, 36, 49, 64, 81] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

Lambdas é€šå¸¸ç”¨æ¥å®šä¹‰æ˜ å°„å‡½æ•°ã€‚æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨å¸¸è§„å‡½æ•°ã€‚

### [](#filter%C2%A0)æ»¤é•œ

è¿™ä¸ªå‡½æ•°æ¥å—ä¸€ä¸ªè°“è¯(ä¸€ä¸ªè¿”å›å¸ƒå°”å€¼çš„ä¸€å…ƒå‡½æ•°)å’Œä¸€ç»„å€¼ï¼›å¹¶ç»™å‡ºä¸€ä¸ªç»“æœé›†ï¼Œå…¶ä¸­åªåŒ…å«è°“è¯è¿”å› true çš„é‚£äº›å€¼é›†ã€‚ç»“æœé›†çš„é•¿åº¦å¯èƒ½ç›¸åŒï¼Œä¹Ÿå¯èƒ½ä¸åŒã€‚

**åœ¨**æ—¶ä½¿ç”¨:æ‚¨æƒ³è¦æ ¹æ®æ¡ä»¶ä»é›†åˆä¸­åˆ é™¤å…ƒç´ ã€‚

**å‚æ•°**:ä¸€å…ƒè°“è¯(åº”è¯¥åªè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼)&è¦è¿‡æ»¤çš„æ•°ç»„ã€‚

åœ¨ä¸Šè¿°é—®é¢˜çš„èƒŒæ™¯ä¸‹ï¼Œè®©æˆ‘ä»¬è¯•ç€ä»åˆ—è¡¨ä¸­ç§»é™¤æ‰€æœ‰çš„å¥‡æ•°æ–¹å—ã€‚ä¸ºæ­¤ï¼Œå¦‚æœå…ƒç´ æ˜¯å¶æ•°ï¼Œè®©æˆ‘ä»¬çš„è°“è¯è¿”å› trueã€‚

```
>>> def is_even(x):
        return x % 2 == 0
>>> evens = filter(is_even, nums)
>>> evens
[0, 4, 16, 36, 64] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç†è§£é€šå¸¸ä½¿ç¼–å†™è¿‡æ»¤å™¨æ›´å®¹æ˜“ã€‚è¿™äº›ä¹Ÿå¯ä»¥ç”¨æ¥ä»£æ›¿å‡½æ•°ã€‚

### [](#reduce-accumulate)å‡å°‘(ç§¯ç´¯)

è¿™ä¸ªå‡½æ•°é‡‡ç”¨ä¸€ä¸ªäºŒå…ƒå‡½æ•°å’Œä¸€ç»„å€¼ï¼Œå®ƒäº§ç”Ÿä¸€ä¸ªå•ä¸€çš„å€¼ã€‚å®ƒé€šè¿‡å¯¹ä¸€ç»„å€¼è¿è¡ŒäºŒå…ƒå‡½æ•°ï¼Œå¹¶å°†å®ƒä»¬ç´¯åŠ æˆä¸€ä¸ªå€¼æ¥å®ç°è¿™ä¸€ç‚¹ã€‚

**åœ¨**æ—¶ä½¿ç”¨:æ‚¨æƒ³è¦ä½¿ç”¨ç»™å®šçš„ä¸€ç»„å€¼çš„ç´¯åŠ å€¼æˆ–çº§è”å€¼ã€‚

**å‚æ•°**:äºŒå…ƒå‡½æ•°å’Œå€¼çš„é›†åˆã€‚

åœ¨ä¸Šè¿°é—®é¢˜çš„èƒŒæ™¯ä¸‹ï¼Œæˆ‘ä»¬å°†æŠŠæ‰€æœ‰çš„å¶æ•°å¹³æ–¹ç›¸åŠ ã€‚

```
>>> reduce(lambda x,y : x+y, evens)
120 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¦‚æœæˆ‘ä»¬çœ‹çœ‹ functools æ¨¡å—ä¸­ reduce çš„å®šä¹‰ï¼Œ

```
def reduce(f,alist)
    if alist == []:
        return None

    answer = alist[0]
    for v in alist[1::
        answer = f(answer,v)
    return v 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬çœ‹åˆ° reduce å‡½æ•°ä»è®¾ç½® answer ä½œä¸ºæ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ã€‚ç„¶åå®ƒä»å·¦åˆ°å³éå†æ•°ç»„ï¼Œå¯¹æ¯ä¸ªå…ƒç´ è°ƒç”¨ä¸€ä¸ªå›è°ƒå‡½æ•°ã€‚ç´¯ç§¯å€¼åœ¨å›è°ƒä¹‹é—´ä¼ é€’ã€‚éå†å®Œæ‰€æœ‰å…ƒç´ åï¼Œè¿”å›ç´¯ç§¯å€¼ã€‚

### [](#combining-mapfilterreduce)ç»“åˆè´´å›¾-è¿‡æ»¤-è¿˜åŸ

æˆ‘ä»¬çœ‹åˆ°ä¸Šé¢å†™äº†å¾ˆå¤šå°å‡½æ•°ï¼Œé‚£åªæ˜¯ä¸ºäº†ç†è§£ã€‚é«˜é˜¶å‡½æ•°çš„çœŸæ­£å¨åŠ›åœ¨äºç»„åˆã€‚æ‰€ä»¥æˆ‘ä»¬çš„é—®é¢˜é™ˆè¿°å¯ä»¥ç”¨ä¸€è¡Œä»£ç è§£å†³ğŸ˜…

```
>>> reduce(lambda a, b: a + b, map(lambda x: x * x, filter(lambda y: not y % 2, range(10))))
120 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸è¦æ…Œï¼ï¼ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶åˆ†è§£ã€‚

```
f_add = lambda a, b: a + b
f_square = lambda x: x * x
f_is_even = lambda y: not y % 2 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨å¤æ‚çš„è¡¨è¾¾å¼å¯ä»¥é‡å†™ä¸º

```
>>> reduce(f_add , map(f_square , filter(f_is_even, range[0, 10])) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

**ä½œä¸ºæ—æ³¨ï¼Œä½¿ç”¨è´´å›¾æ²¡æœ‰é™åˆ¶ï¼Œæ»¤é•œ&ä¸€èµ·å‡å°‘ã€‚æ‚¨å¯ä»¥è‡ªå·±ç»„åˆï¼Œå¹¶æ ¹æ®éœ€è¦å¯¹åŠŸèƒ½è¿›è¡Œæ’åºã€‚**

### [](#other-languages%C2%A0)å…¶ä»–è¯­è¨€

ä¿æŒé—®é¢˜é™ˆè¿°ä¸ä¸Šé¢ç›¸åŒï¼Œçœ‹çœ‹ map-reduce-filter å¦‚ä½•åœ¨å…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸­ä½¿ç”¨ï¼Œè¿™æ ¹æœ¬ä¸æ˜¯ä¸€é—¨ç«ç®­ç§‘å­¦ğŸš€

#### [](#ruby)çº¢å®çŸ³

```
def main()

    nums = [*0..9]

    ans = nums.map{|x| x * x}              # map operation (x*x) over nums
              .select{|x| x % 2 == 0}      # select event elements
              .reduce{|a, x| a + x}        # reduce the list by `+` operation

    p nums                                 
    p ans                                  

end
main() 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

#### [](#clojure)Clojure

```
(reduce  (fn  [a  b]  (+  a  b))  (map  (fn  [x]  (*  x  x))  (filter  even?  (range  10)))) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

#### [](#javascript)Javascript

(æˆ‘çœŸçš„ä¸æ“…é•¿è¿™ä¸ªğŸ˜•)

```
let numbers = [ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 ]

ans = numbers 
    .filter(function(num) {
        return (num%2 === 0);
    })
    .map(function(num) { 
        return num*num;
    })
    .reduce(function(total, num){
        return total += num;
    }); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨å…¶ä»–è¯­è¨€ä¸­ä¹Ÿå°è¯•ä¸€ä¸‹å§ï¼