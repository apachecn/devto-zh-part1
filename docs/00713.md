# ç”¨ TestCafe |é‡æ„è¿›è¡Œ E2E æµ‹è¯•

> åŸæ–‡:[https://dev.to/chrisvasqm/e2e-testing-with-testcafe-ç¬¬ 4 éƒ¨åˆ†-1glp](https://dev.to/chrisvasqm/e2e-testing-with-testcafe--part-4-1glp)

åœ¨ç¬¬ 3 éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬ä¸ä»…å­¦ä¹ äº†å¦‚ä½•å¹¶è¡Œè¿è¡Œå¤šä¸ªæµè§ˆå™¨ï¼Œè¿˜å­¦ä¹ äº†è¿™äº›æµè§ˆå™¨çš„å¤šä¸ªå®ä¾‹ã€‚

é‚£ä¹ˆæˆ‘ä»¬èƒ½åšäº›ä»€ä¹ˆæ¥æ”¹è¿›æˆ‘ä»¬çš„ TestCafe é¡¹ç›®å‘¢ï¼Ÿ

å¦‚æœä½ ä»ä¸€å¼€å§‹å°±éµå¾ªè¿™ä¸ªæŒ‡å—ï¼Œä½ çš„`devto.js`åº”è¯¥æ˜¯è¿™æ ·çš„:

```
import { Selector } from 'testcafe'

fixture('DEV Tests')
    .page('http://dev.to/');

test("Check founder's names", async(t) => {
    const aboutLink = Selector('a').withText('About');
    const firstFounder = Selector('b').withText('Ben Halpern');
    const secondFounder = Selector('b').withText('Jess Lee');
    const thirdFounder = Selector('b').withText('Peter Frank');

    await t
    .click(aboutLink)
    .expect(firstFounder.exists).ok()
    .expect(secondFounder.exists).ok()
    .expect(thirdFounder.exists).ok();
});

test("Search for posts about testing", async (t) => {
    const discussTag = Selector('span').withText('#discuss');
    const discussTitle = Selector('h1').withText('Discussion');

    await t
        .click(discussTag)
        .expect(discussTitle.exists).ok();
}); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬å¯ä»¥é‡æ„ä»€ä¹ˆï¼Ÿ

å®ƒå·¥ä½œå¾—å¾ˆå¥½ï¼Œå¯¹å—ï¼Ÿ

æ­£ç¡®ï¼Œå®ƒç¡®å®æœ‰ç”¨ã€‚ä½†æ˜¯ä½ çŸ¥é“å—ï¼Ÿæˆ‘ä»¬å¯ä»¥æ›´ä¸Šä¸€å±‚æ¥¼ã€‚æ‰€ä»¥æˆ‘ä»¬èµ°å§ï¼

# [](#refactor)é‡æ„

æˆ‘ä»¬éœ€è¦åšçš„ç¬¬ä¸€ä»¶äº‹æ˜¯æ‰¾åˆ°ä¸€ç§æ›´å¥½çš„æ–¹æ³•æ¥ä½¿ç”¨æˆ‘ä»¬çš„`Selector`ã€‚ä¸æ˜¯é€šè¿‡ä½¿ç”¨ä¸åŒçš„æ–¹æ³•æˆ–è¯­æ³•ï¼Œè€Œæ˜¯å®é™…ä¸Šä»æˆ‘ä»¬çš„`test`å‡½æ•°ä¸­æŠ½è±¡å‡ºæ¥ã€‚

æˆ‘ä»¬çš„æµ‹è¯•ç°åœ¨çŸ¥é“çš„å¤ªå¤šäº†ã€‚

[![Smartass](../Images/87f643d2dd701a5353e72f6a7aa18331.png)T2ã€‘](https://i.giphy.com/media/l0Iy4M0jO48jGB3R6/giphy.gif)

é‚£ä¹ˆï¼Œæˆ‘ä»¬å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹å‘¢ï¼Ÿ

### [](#introducing-page-object-model)ä»‹ç»...é¡µé¢å¯¹è±¡æ¨¡å‹

è¿™ç§è®¾è®¡æ¨¡å¼åŒ…æ‹¬æ ¹æ®ç±»çš„åŠŸèƒ½åˆ›å»ºä»£è¡¨ç»™å®šé¡µé¢çš„ç±»ã€‚

ä¾‹å¦‚

#### [](#devsearchpagejs)DevSearchPage.js

è¯¥é¡µé¢åº”è¯¥åŒ…å«è¿›è¡Œæœç´¢æ‰€éœ€çš„`Selector`ã€‚è¿™æ„å‘³ç€ä»»ä½•å¯èƒ½å‡ºç°çš„è¿‡æ»¤å™¨å’Œæ–‡ç« éƒ½åº”è¯¥æ˜¯å®ƒçš„ä¸€éƒ¨åˆ†ã€‚

è¿™ä½¿å¾—æˆ‘ä»¬çš„ä»£ç ä»å­˜åœ¨:

```
const aboutLink = Selector('a').withText('About'); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è‡´:

```
import DevHomePage from '../page/devhomepage.js';

const devHomePage = new DevHomePage();

// ...

await t
    .click(devHomePage.aboutLink)
    //... 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨ï¼Œæˆ‘ä»¬åœ¨æµ‹è¯•ä¸­ä½¿ç”¨å“ªä¸ªâ€œå…³äºé“¾æ¥â€æ˜¯æ¯«æ— ç–‘é—®çš„ï¼ŒåŒæ—¶ä¹Ÿä½¿æˆ‘ä»¬çš„`Selector`å¯ç”¨äºå…¶ä»–å¯èƒ½éœ€è¦å®ƒçš„æµ‹è¯•ï¼Œä¹Ÿç§°ä¸º*å¯é‡ç”¨æ€§*ã€‚

æ‰€ä»¥ï¼Œæˆ‘ä»¬çš„æœ€ç»ˆç»“æœåº”è¯¥æ˜¯è¿™æ ·çš„:

```
// project/page/devhomepage.js

import { Selector } from 'testcafe';

export default class DevHomePage {

    constructor() {
        this.aboutLink = Selector('a').withText('About');
        this.discussTag = Selector('span').withText('#discuss');
    }

} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

```
// project/page/devaboutpage.js

import { Selector } from 'testcafe';

export default class DevAboutPage {

    constructor() {
        this.firstFounder = Selector('b').withText('Ben Halpern');
        this.secondFounder = Selector('b').withText('Jess Lee');
        this.thirdFounder = Selector('b').withText('Peter Frank');
    }

} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

```
//project/page/devdiscusstagpage.js

import { Selector } from 'testcafe';

export default class DevDiscussTagPage {

    constructor() {
        this.discussTitle = Selector('h1').withText('Discussion');
    }

} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨æˆ‘ä»¬å¯ä»¥åƒè¿™æ ·åœ¨æµ‹è¯•ä¸­ä½¿ç”¨æˆ‘ä»¬æ‰€æœ‰çš„é¡µé¢:

```
//project/tests/devto.js

import DevHomePage from "../page/devhomepage";
import DevAboutPage from "../page/devaboutpage";
import DevDiscussTagPage from "../page/devdiscusstagpage";

const devHomePage = new DevHomePage();
const devAboutPage = new DevAboutPage();
const devDiscussTagPage = new DevDiscussTagPage();

fixture('DEV Tests')
    .page('http://dev.to/');

test("Check founder's names", async(t) => {
    await t
        .click(devHomePage.aboutLink)
        .expect(devAboutPage.firstFounder.exists).ok()
        .expect(devAboutPage.secondFounder.exists).ok()
        .expect(devAboutPage.thirdFounder.exists).ok();
});

test("Filter articles by discuss tag", async (t) => {
    await t
        .click(devHomePage.discussTag)
        .expect(devDiscussTagPage.discussTitle.exists).ok();
}); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä½†æ˜¯å’Œå¾€å¸¸ä¸€æ ·ï¼Œåƒä¸‡ä¸è¦ç›¸ä¿¡ç½‘ä¸Šéšä¾¿å‘çš„å¸–å­ï¼Œè‡ªå·±å»è¯•è¯•å§ï¼

å¦‚æœçœ‹åˆ°:

```
Using locally installed version of TestCafe.
 Running tests in:
 - Chrome 63.0.3239 / Mac OS X 10.13.2

 DEV Tests
 âœ“ Check founder's names
 âœ“ Search for posts about testing

 2 passed (6s) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™æ„å‘³ç€æˆ‘åœ¨è¿™é‡Œçš„å·¥ä½œå®Œæˆäº†ğŸ˜

æ²¡æœ‰æˆ‘ç…§é¡¾ä½ ï¼Œä½ æˆ–è®¸å¯ä»¥ç»§ç»­ä½ çš„æ—…ç¨‹ã€‚

æ‰€ä»¥å»åƒå®˜æ–¹æ–‡ä»¶å§

[![Learn all the things](../Images/14ef48d36afd2d49f8b67ba48d2d4be8.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--hW24VY8f--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/synotanhnck9ym5nypn1.jpg)