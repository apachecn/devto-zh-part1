# ä½¿ç”¨é‡ç»„åˆ›å»ºå¯é‡ç”¨çš„é«˜é˜¶ React ç»„ä»¶

> åŸæ–‡:[https://dev . to/scastiel/create-reuse-high-order-react-components-with-recompose-45io](https://dev.to/scastiel/create-reusable-high-order-react-components-with-recompose-45io)

åœ¨ React ä¸­ç¼–å†™å¯é‡ç”¨çš„ç»„ä»¶æ˜¯æ¯ä¸ª React å¼€å‘äººå‘˜éƒ½å…³å¿ƒ(æˆ–è€…åº”è¯¥å…³å¿ƒ)çš„äº‹æƒ…ã€‚æ— è®ºæ˜¯åˆ›å»ºä¸€ä¸ªæ ·å¼åŒ–ç»„ä»¶çš„å·¥å…·ç®±ï¼Œè¿˜æ˜¯å…±åŒçš„è¡Œä¸ºï¼Œç­‰ç­‰ã€‚

è™½ç„¶æˆ‘ç»å¸¸ä½¿ç”¨é«˜é˜¶ç»„ä»¶(ä¾‹å¦‚ç”¨ *React-Redux* ï¼Œä½†æ˜¯ç›´åˆ°æœ€è¿‘æˆ‘æ‰å¬è¯´ä»–ä»¬æä¾›äº†ä¸€ä¸ªæ›´å®¹æ˜“ç¼–å†™å¯é‡ç”¨ç»„ä»¶çš„å¥½æœºä¼šï¼Œç‰¹åˆ«æ˜¯æ„Ÿè°¢ä¸€ä¸ªä¼Ÿå¤§çš„åº“: [Recompose](https://github.com/acdlite/recompose) ã€‚è®©æˆ‘ä»¬ç”¨ä¸€ä¸ªå…·ä½“å®Œæ•´çš„ä¾‹å­æ¥çœ‹çœ‹ã€‚

å¦‚æœæ‚¨ä»¥å‰ä»æœªå¬è¯´è¿‡é«˜é˜¶ç»„ä»¶(HOC ),åªéœ€çŸ¥é“åŸºæœ¬ä¸Šï¼ŒHOC æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå°†ç»„ä»¶å®šä¹‰(ç±»æˆ–å‡½æ•°)ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„ç»„ä»¶å®šä¹‰ï¼Œåœ¨ç¬¬ä¸€ä¸ªç»„ä»¶å®šä¹‰çš„åŸºç¡€ä¸Šæ·»åŠ ä¸€äº›è¡Œä¸ºã€‚å®ƒå®é™…ä¸Šæ˜¯æ¨¡å¼ [*è£…é¥°å™¨*](https://en.wikipedia.org/wiki/Decorator_pattern) ï¼Œåº”ç”¨äº React ç»„ä»¶ã€‚

å¦‚æœä½ æƒ³äº†è§£æ›´å¤šå…³äº HOCs çš„ä¿¡æ¯ï¼ŒReact çš„ç½‘ç«™æœ‰ä¸€ä¸ªçœŸæ­£å®Œæ•´çš„é¡µé¢ã€‚

ä¸€ä¸ªéå¸¸ç®€å•çš„ä¾‹å­:

```
const addBorder = borderWidth => Component => props => (
  <div style={{ borderColor: 'black', borderStyle: 'solid', borderWidth }}>
    <Component {...props} />
  </div> )

const MyText = <p>Hello!</p> 
const MyTextWithBorder = addBorder(5)(MyText) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ‚¨å°†å¾—åˆ°ä¸€ä¸ªç»„ä»¶`MyTextWithBorder`ï¼Œå®ƒå°†æ˜¾ç¤ºæ–‡æœ¬â€œHelloï¼â€è¾¹æ¡†ä¸º 5 åƒç´ ã€‚è¿™é‡Œï¼Œ`addBorder`å°±æ˜¯æ‰€è°“çš„é«˜é˜¶åˆ†é‡ã€‚

HOC çš„å…´è¶£æ˜¯ä»€ä¹ˆï¼Ÿä¸€ä¸ªçœŸæ­£æœ‰ç”¨çš„æ¨¡å¼æ˜¯å°†å‡ ä¸ªç»„ä»¶å…±äº«çš„è¡Œä¸ºæå–åˆ°å¯é‡ç”¨çš„åŠŸèƒ½ä¸­ã€‚å¦‚æœæ‚¨ä½¿ç”¨ React with Redux å’Œ React-Reduxï¼Œæ‚¨å¯èƒ½ä¼šä½¿ç”¨ HOC `connect`å°†çŠ¶æ€å’ŒåŠ¨ä½œæ˜ å°„åˆ°é“å…·ã€‚

ä½œä¸ºæœ¬æ–‡çš„å®Œæ•´ç¤ºä¾‹ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ HOC åˆ›å»ºä¸€ä¸ªç”µè¯å·ç è¾“å…¥ç»„ä»¶ï¼Œå®ƒå°†:

*   ä»…æ¥å—æ•°å­—ã€æ‹¬å·ã€ç ´æŠ˜å·å’Œç©ºæ ¼ä½œä¸ºè¾“å…¥(å½“ç”¨æˆ·é”®å…¥å®ƒä»¬æ—¶)ï¼›
*   å½“ç”¨æˆ·ç¦»å¼€è¾“å…¥æ—¶æ ¼å¼åŒ–ç”µè¯å·ç (åœ¨*æ¨¡ç³Š*äº‹ä»¶æ—¶)ã€‚(æˆ‘ä»¬å°†åªå¤„ç†åŒ—ç¾ç”µè¯å·ç :â€œ(514) 555-0199â€ã€‚)

<center>![Phone number input result](../Images/37d361dbc5e218f4b1fcf4ff7a348da2.png)</center>

æ³¨æ„ï¼Œæˆ‘ä»¬å‡è®¾æˆ‘ä»¬çš„è¾“å…¥å°†è¢«æ§åˆ¶ï¼Œå³ä½¿ç”¨`value`å’Œ`onChange`å±æ€§æ¥çŸ¥é“è¦æ˜¾ç¤ºçš„æ–‡æœ¬ä»¥åŠå¦‚ä½•æ›´æ–°å®ƒã€‚æˆ‘ä»¬è¿˜å¸Œæœ›è¯¥å€¼åªåŒ…å«ç”µè¯å·ç çš„æ•°å­—(â€œ5145550199â€)ï¼Œè€Œä¸å…³å¿ƒæ ¼å¼ï¼Œå› æ­¤åªä½¿ç”¨æ•°å­—æ¥è°ƒç”¨`onChange`å›è°ƒ(åœ¨`event.target.value`)ã€‚

ä¸ºäº†ä½¿æˆ‘ä»¬çš„ HOC æ›´å®¹æ˜“ç¼–å†™å’Œç»´æŠ¤ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨åº“*æ¥é‡ç»„*ï¼Œå®ƒæä¾›äº†å¤§é‡çš„å®ç”¨å‡½æ•°æ¥åˆ›å»º HOCã€‚æˆ‘ä»¬å°†åœ¨æ–‡ç« ä¸­çœ‹åˆ°å…¶ä¸­çš„ä¸€äº›ã€‚

ä¸ºäº†å¼€å‘æˆ‘ä»¬çš„ç»„ä»¶ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸¤ä¸ªå¯é‡ç”¨çš„ HOCï¼Œä¸Šé¢ä¸¤ç‚¹å„ä¸€ä¸ªã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å¸Œæœ›æˆ‘ä»¬çš„æœ€ç»ˆç»„ä»¶è¢«å®šä¹‰ä¸º:

```
const PhoneNumberInput = formatPhoneNumber(
  forbidNonPhoneNumberCharacters(props => <input {...props} />) ) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™æ˜¯ä»‹ç»æˆ‘ä»¬å°†ä½¿ç”¨çš„ç¬¬ä¸€ä¸ª*é‡ç»„*å‡½æ•°çš„å¥½åœ°æ–¹:`compose`ã€‚å®ƒæŠŠå‡ ä¸ª HOC åˆå¹¶æˆä¸€ä¸ªï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥å†™å¾—æ›´æ¸…æ¥š:

```
const PhoneNumberInput = compose(
  formatPhoneNumber,
  forbidNonPhoneNumberCharacters
)(props => <input {...props} />) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å› ä¸ºæˆ‘ä»¬å¸Œæœ›æˆ‘ä»¬çš„ HOC å°½å¯èƒ½çš„å¯é‡ç”¨(æ¯”å¦‚æ ¼å¼åŒ–ç”µè¯å·ç ä¹‹å¤–çš„ä¸œè¥¿)ï¼Œæˆ‘ä»¬å°†ä½¿å®ƒä»¬æ›´åŠ é€šç”¨:

```
// Only keep digits, spaces, dashes and parenthesis
const forbiddenCharactersInPhoneNumber = /[^\d\s\-()]/g

// '5145551234' => '(514) 555-1234'
const formatPhoneNumber = value =>
  value.replace(/^(\d{3})(\d{3})(\d{4})$/, '($1) $2-$3')

// '(514) 555-1234' => '5145551234'
const parsePhoneNumber = formattedPhoneNumber =>
  formattedPhoneNumber.replace(/[^\d]/g, '').slice(0, 10)

const PhoneNumberInput = compose(
  formatInputValue({
    formatValue: formatPhoneNumber,
    parseValue: parsePhoneNumber
  }),
  forbidCharacters(forbiddenCharactersInPhoneNumber)
)(props => <input {...props} />) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¦‚æœæˆ‘ä»¬åªéœ€ä½¿ç”¨æ­£ç¡®çš„å‚æ•°ï¼Œå°±å¯ä»¥é‡ç”¨æˆ‘ä»¬çš„ä¸¤ä¸ª HOC æ¥æ ¼å¼åŒ–é‡‘é¢ã€ç¤¾ä¼šä¿é™©å·å’Œå…¶ä»–æ‰€æœ‰å†…å®¹ï¼Œæ‚¨å·²ç»çœ‹åˆ°è¿™å°†å˜å¾—å¤šä¹ˆä»¤äººæ•¬ç•äº†å—ï¼ŸğŸ˜‰

çœŸæ­£æœ‰è¶£çš„ä¸€ç‚¹æ˜¯ï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨äº†åŸºæœ¬çš„`<input>`ç»„ä»¶ï¼Œä½†æ˜¯æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ä»»ä½•ç»„ä»¶ï¼Œåªè¦å®ƒä½¿ç”¨äº†`value`ã€`onChange`å’Œ`onBlur`ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥æƒ³è±¡ç”¨ React Nativeï¼Œæˆ–è€… Material-UI ç­‰æ¥ä½¿ç”¨æˆ‘ä»¬çš„ç”µè¯å·ç è¾“å…¥ã€‚

å¥½äº†ï¼Œç°åœ¨åˆ°äº†é‡è¦çš„éƒ¨åˆ†ï¼Œä½¿ç”¨é‡ç»„å‡½æ•°ç¼–å†™æˆ‘ä»¬çš„ä¸¤ä¸ª HOCã€‚

## [](#first-hoc-only-accept-some-characters)ç¬¬ä¸€ä¸ª HOC:åªæ¥å—éƒ¨åˆ†å­—ç¬¦

è¿™é‡Œçš„æƒ³æ³•æ˜¯ï¼Œå½“è¾“å…¥å€¼å‘ç”Ÿå˜åŒ–(`onChange`äº‹ä»¶)æ—¶ï¼Œæˆ‘ä»¬å°†æ‹¦æˆªè¯¥äº‹ä»¶ï¼Œä»å€¼ä¸­åˆ é™¤æ‰€æœ‰ç¦æ­¢çš„å­—ç¬¦ï¼Œç„¶åç”¨å¹²å‡€çš„å€¼è°ƒç”¨çˆ¶å€¼`onChange`ã€‚

è¿™é‡Œæˆ‘ä»¬å°†ä½¿ç”¨`withHandlers`å‡½æ•°æ·»åŠ æ–°çš„äº‹ä»¶å¤„ç†ç¨‹åºä½œä¸ºå°è£…ç»„ä»¶çš„é“å…·ã€‚å¥½çš„ä¸€é¢æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥è®¿é—®æˆ‘ä»¬çš„ç»„ä»¶é“å…·(è¿™é‡Œæˆ‘ä»¬å°†ä½¿ç”¨`onChange`)æ¥åˆ›å»ºæˆ‘ä»¬çš„å¤„ç†ç¨‹åº:

```
const forbidCharacters = forbiddenCharsRegexp =>
  withHandlers({
    onChange: props => event => {
      // Remember `onChange` prop is not required (even if
      // here nothing would happen if itÂ´s not defined).
      if (props.onChange) {
        const value = event.target.value
        const cleanValue = value.replace(forbiddenCharsRegexp, '')
        // We donâ€™t mutate original event, but we clone it and
        // redefine the event.target.value with cleaned value.
        const newEvent = {
          ...event,
          target: { ...event.target, value: cleanValue }
        }
        // We dispatch our event to parent `onChange`.
        props.onChange(newEvent)
      }
    }
  }) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¯·è®°ä½ï¼Œæˆ‘ä»¬ä»å¦ä¸€ä¸ªç»„ä»¶åˆ›å»ºçš„ç»„ä»¶å¿…é¡»å°½å¯èƒ½åœ°ç¬¦åˆç¬¬ä¸€ä¸ªç»„ä»¶çš„æ¥å£ã€‚å®ƒåº”è¯¥æ¥å—ç›¸åŒç±»å‹çš„ç›¸åŒå±æ€§ã€‚

ç°åœ¨ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦åˆ›å»ºä¸€ä¸ªåªæ¥å—æ•°å­—çš„æ•°å­—å­—æ®µï¼Œæˆ‘ä»¬å¯ä»¥å†™:

```
const NumericField = forbidCharacters(/[^\d]/g)(props => <input {...props} />) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬ç°åœ¨æœ‰äº†ç¬¬ä¸€ä¸ª HOC æ¥ç¦æ­¢ä¸€äº›å­—ç¬¦ï¼Œç°åœ¨è®©æˆ‘ä»¬å†™ç¬¬äºŒä¸ªï¼Œç¨å¾®å¤æ‚ä¸€ç‚¹ï¼Œæ¥æ ¼å¼åŒ–ç”¨æˆ·è¾“å…¥ã€‚

## [](#second-hoc-format-input-value)ç¬¬äºŒä¸ª HOC:æ ¼å¼è¾“å…¥å€¼

å¯¹äºæˆ‘ä»¬çš„ç¬¬äºŒä¸ª HOCï¼Œæˆ‘ä»¬å°†ä¸å¾—ä¸ä½¿ç”¨ä¸€ä¸ªæœ¬åœ°å†…éƒ¨çŠ¶æ€æ¥å­˜å‚¨è¾“å…¥å€¼ï¼Œè€Œä¸æŠŠå®ƒäº¤ç»™å°è£…ç»„ä»¶ã€‚è®°ä½ï¼Œæˆ‘ä»¬åªæƒ³åœ¨ç„¦ç‚¹ä¸¢å¤±æ—¶æ ¼å¼åŒ–è¾“å…¥å€¼(*æ¨¡ç³Š*äº‹ä»¶)ã€‚

Recompose æœ‰ä¸€ä¸ªéå¸¸ç®€å•çš„åŠŸèƒ½ï¼Œç»™ç»„ä»¶æ·»åŠ ä¸€ä¸ªæœ¬åœ°çŠ¶æ€:`withState`ã€‚å®ƒå°†çŠ¶æ€å±æ€§çš„åç§°(å°†ä½œä¸º prop æä¾›ç»™å­ç»„ä»¶)ã€æ›´æ–°è¯¥çŠ¶æ€å±æ€§çš„å‡½æ•° prop çš„åç§°(ä¹Ÿä½œä¸º prop æä¾›)åŠå…¶åˆå§‹å€¼(é™æ€å€¼ï¼Œæˆ–è€…å°† props ä½œä¸ºå‚æ•°å¹¶è¿”å›å€¼çš„å‡½æ•°)ä½œä¸ºå‚æ•°ã€‚

è¦æ·»åŠ æˆ‘ä»¬çš„çŠ¶æ€ï¼Œæˆ‘ä»¬å°†å†™:

```
withState(
  'inputValue',
  'setInputValue',
  // formatValue is one of our HOC parameters
  props => formatValue(props.value)
) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¾ˆç®€å•ï¼Œå¯¹å§ï¼ŸğŸ˜‰

ç°åœ¨æˆ‘ä»¬æœ‰äº†çŠ¶æ€ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨è¾“å…¥å€¼æ”¹å˜æ—¶ä½¿ç”¨ updateï¼Œæ‰€ä»¥æˆ‘ä»¬å°†å®šä¹‰ä¸€ä¸ªå®šåˆ¶çš„`onChange`å¤„ç†ç¨‹åº:

```
withHandlers({
  onChange: props => event => {
    props.setInputValue(event.target.value)
  },
  // ... 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨*æ¨¡ç³Š*äº‹ä»¶ä¸­ï¼Œæˆ‘ä»¬å°†æ ¼å¼åŒ–è¯¥å€¼ï¼Œè°ƒç”¨çˆ¶`onChange`å’Œ`onBlur`é“å…·ï¼Œå¹¶ç”¨æ ¼å¼åŒ–çš„å€¼:
æ›´æ–°æ˜¾ç¤ºçš„å€¼

```
 // ...
  onBlur: props => event => {
    // parseValue is the other parameter of our HOC
    const parsedValue = parseValue(props.inputValue)
    const formattedValue = formatValue(parsedValue)
    props.setInputValue(formattedValue)
    // We donâ€™t mutate original event, but we clone it and
    // redefine the event.target.value with cleaned value.
    const newEvent = {
      ...event,
      target: { ...event.target, value: parsedValue }
    }
    if (props.onChange) {
      props.onChange(newEvent)
    }
    if (props.onBlur) {
      props.onBlur(newEvent)
    }
  }
) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬çš„ HOC çš„æœ€åä¸€æ­¥æ˜¯ç¡®ä¿åªæœ‰è¢«`<input>`ç»„ä»¶æ¥å—çš„é“å…·ä¼šè¢«ä¼ é€’ç»™å®ƒã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ Recompose çš„`mapProps`å‡½æ•°ä»ç°æœ‰é“å…·ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„é“å…·å¯¹è±¡ï¼Œå¹¶ä½¿ç”¨ *lodash* çš„`omit`å‡½æ•°ä»ä¸€ä¸ªå¯¹è±¡ä¸­æ’é™¤ä¸€äº›å±æ€§æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„:

```
mapProps(props => ({
  ...omit(props, ['inputValue', 'setInputValue']),
  value: props.inputValue
})) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç”¨`compose`ç»„è£…æ‰€æœ‰ä¸œè¥¿ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°:

```
const formatInputValue = ({ formatValue, parseValue }) =>
  compose(
    withState('inputValue', 'setInputValue', props => formatValue(props.value)),
    withHandlers({
      onChange: props => event => {
        props.setInputValue(event.target.value)
      },
      onBlur: props => event => {
        const parsedValue = parseValue(props.inputValue)
        const formattedValue = formatValue(parsedValue)
        props.setInputValue(formattedValue)
        const newEvent = {
          ...event,
          target: { ...event.target, value: parsedValue }
        }
        if (props.onChange) {
          props.onChange(newEvent)
        }
        if (props.onBlur) {
          props.onBlur(newEvent)
        }
      }
    }),
    mapProps(props => ({
      ...omit(props, ['inputValue', 'setInputValue']),
      value: props.inputValue
    }))
  ) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å°±æ˜¯è¿™æ ·ï¼æˆ‘ä»¬æœ‰æˆ‘ä»¬çš„ä¸¤ä¸ªé«˜é˜¶ç»„ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒä»¬æ¥åˆ›å»ºæˆ‘ä»¬çš„æ‰‹æœºè¾“å…¥å­—æ®µç»„ä»¶ï¼ä¸‹é¢æ‚¨å¯ä»¥æ‰¾åˆ°åŒ…å«è¿™ä¸ªä¾‹å­çš„å®Œæ•´æºä»£ç çš„ JSFiddleï¼Œå¹¶æµ‹è¯•ç»“æœã€‚ä¸è¦çŠ¹è±«å‰ [JSFiddle](https://jsfiddle.net/scastiel/prme4k6L/) ç©é‡ç»„æˆ–åˆ›å»ºè‡ªå·±çš„é«˜é˜¶ç»„ä»¶ã€‚

æˆ‘å¸Œæœ›è¿™ç¯‡æ–‡ç« è®©æ‚¨æƒ³äº†è§£æ›´å¤šå…³äºé‡ç»„å’Œé«˜é˜¶ç»„ä»¶çš„çŸ¥è¯†ã€‚æˆ‘ç¡®ä¿¡ HOCs åˆ›é€ äº†ä¸€ç§ç¼–å†™å¯é‡ç”¨ç»„ä»¶çš„æ–°æ–¹æ³•ï¼›æ¯«æ— ç–‘é—®ï¼Œå°†æ¥æˆ‘ä»¬ä¼šè¶Šæ¥è¶Šå¤šåœ°åœ¨è¿™é‡Œçœ‹åˆ°ä»–ä»¬ğŸ˜€ã€‚

ä¸€äº›å¯è¿›ä¸€æ­¥å‘å±•çš„èµ„æº:

*   [é‡ç»„ API æ–‡æ¡£](https://github.com/acdlite/recompose/blob/master/docs/API.md)ç›¸å½“å®Œæ•´ï¼Œå°½ç®¡åœ¨æˆ‘çœ‹æ¥å®ƒç¼ºå°‘ä¸€äº›ä¾‹å­æ¥ç†è§£ä¸€äº›å¤æ‚å‡½æ•°ï¼›
*   å…³äº HOCs çš„ React é¡µé¢åŒ…å«å¾ˆå¤šä¿¡æ¯ï¼Œæ¯”å¦‚ä½ ä¸åº”è¯¥å¯¹ HOCs åšä»€ä¹ˆğŸ˜‰
*   [æ·±åº¦ååº”é«˜é˜¶ç»„ä»¶](https://medium.com/@franleplant/react-higher-order-components-in-depth-cf9032ee6c3e):HOCs çš„ç»ä½³å…¥é—¨
*   ä¸ºä»€ä¹ˆæ½®äººä¼šé‡ç»„æ‰€æœ‰ä¸œè¥¿:ä¸€ä¸ªå¾ˆé…·çš„é‡ç»„æ¦‚å¿µä»‹ç»(ä¼¼ä¹æœ‰ç‚¹è¿‡æ—¶â€¦â€¦)

*è¿™ç¯‡æ–‡ç« æœ€åˆå‘è¡¨åœ¨æˆ‘çš„åšå®¢ä¸Šã€‚*