# ç”¨ PHP æ•æ‰å’Œè§£æ JSON Post æ•°æ®

> åŸæ–‡:[https://dev . to/dev _ nope/catch-and-parse-JSON-post-data-in-PHP-1p 56](https://dev.to/dev_nope/catch-and-parse-json-post-data-in-php-1p56)

å‡ å¤©å‰ï¼Œæˆ‘ä¸€ç›´åœ¨åšä¸€ä¸ªé¡¹ç›®ï¼Œè¿™ä¸ªé¡¹ç›®å’Œä»Šå¤©çš„è®¸å¤šå…¶ä»–é¡¹ç›®ä¸€æ ·ï¼Œä¸ä¸€äº›å¤–éƒ¨ API è¿›è¡Œé€šä¿¡ã€‚åœ¨æŸäº›æ—¶å€™ï¼Œä¸ºäº†æ‰§è¡Œä¸€äº›æµ‹è¯•ï¼Œæˆ‘ä¸å¾—ä¸åœ¨æˆ‘çš„é¡¹ç›®ä¸­ç¼–å†™ä¸€ä¸ª API ç«¯ç‚¹æ¥ä¼ªé€ å®é™…çš„å¤–éƒ¨ APIã€‚æˆ‘éœ€è¦æåˆ°çš„æ˜¯ï¼Œå¤–éƒ¨ API éœ€è¦çš„æ˜¯`application/json`å†…å®¹ç±»å‹ï¼Œæ‰€ä»¥åŸºæœ¬ä¸Š`curl`è®¾ç½®çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„:

```
<?php

//...

$ch = curl_init();
curl_setopt( $ch, CURLOPT_URL, $url );
curl_setopt( $ch, CURLOPT_RETURNTRANSFER, true );
curl_setopt( $ch, CURLOPT_VERBOSE, true );
curl_setopt( $ch, CURLOPT_HEADER, true );
curl_setopt( $ch, CURLOPT_TIMEOUT, $this->timeout_limit );
curl_setopt( $ch, CURLOPT_ENCODING, '' );
curl_setopt( $ch, CURLOPT_MAXREDIRS, 10 ); 
curl_setopt( $ch, CURLOPT_CUSTOMREQUEST, 'POST' );
curl_setopt( $ch, CURLOPT_POSTFIELDS, json_encode( $data ) );
curl_setopt( $ch, CURLOPT_HTTPHEADER, array(
   'Content-Type: application/json'
) );

// ... 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

é—®é¢˜æ˜¯ï¼Œå½“æˆ‘è¯•å›¾æ•æ‰å¸–å­æ•°æ®å¹¶ä½¿ç”¨å®ƒæ—¶ï¼Œæˆ‘å¾—åˆ°äº†ä½œä¸º`$_POST`æˆ–`$_REQUEST`çš„å€¼çš„`null`ï¼Œæˆ‘ä¸æ˜ç™½ä¸ºä»€ä¹ˆğŸ¤”ã€‚æ˜¾ç„¶(ä¹Ÿè®¸ä½ ä»¬ä¸­çš„è®¸å¤šäººå·²ç»çŸ¥é“äº†)ï¼Œå¦‚æœæ•°æ®ä»¥`multipart/form-data`æˆ–`application/x-www-form-urlencoded`çš„å½¢å¼å‘é€ï¼Œé‚£ä¹ˆæ˜¯çš„ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ PHP globals `$_POST`æˆ–`$_REQUEST`æ¥æ•æ‰å’Œä½¿ç”¨è¿™äº›æ•°æ®ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ•°æ®æ˜¯ä½œä¸º`application/json`å‘é€çš„ï¼Œé‚£ä¹ˆåœ¨ PHP 5.6 ä¹‹å‰ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ [$HTTP_RAW_POST_DATA](http://php.net/manual/en/reserved.variables.httprawpostdata.php) æ¥è·å–åŸå§‹çš„ POST æ•°æ®ï¼Œæˆ–è€…(åŸºäº PHP æ–‡æ¡£ï¼Œè¿™æ˜¯æ›´å¥½çš„æ–¹æ³•)ä½¿ç”¨[PHP://input](http://php.net/manual/en/wrappers.php.php)â€”â€”ä¸€ä¸ªåªè¯»æµï¼Œå…è®¸æ‚¨ä»è¯·æ±‚ä½“è¯»å–åŸå§‹æ•°æ®ã€‚

æ‰€ä»¥ï¼Œç»“æœæˆ‘æœ€ç»ˆè·å¾—äº†è¿™æ ·çš„å¸–å­æ•°æ®:

```
<?php
// receive the JSON Post data
$data = json_decode( file_get_contents( 'php://input' ), true ); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™äº› stackoverflow è®¨è®ºå¤§æœ‰åŠŸåŠ³:
[https://stack overflow . com/questions/2731297/file-get-contentsphp-input-or-http-raw-post-data-å“ªä¸€ä¸ªæ›´å¥½](https://stackoverflow.com/questions/2731297/file-get-contentsphp-input-or-http-raw-post-data-which-one-is-better-to)
[https://stack overflow . com/questions/813487/how-to-post-JSON-to-PHP-with-curl/813512](https://stackoverflow.com/questions/813487/how-to-post-json-to-php-with-curl/813512)

å¤§å®¶ç¼–ç å¿«ä¹ï¼ğŸ’» ğŸ¤“ ğŸ‘