# è§’åˆ†é‡ä»‹ç»

> åŸæ–‡:[https://dev . to/abelagoi/introduction-to-angular-component-aod](https://dev.to/abelagoi/introduction-to-angular-component-aod)

### ç»„ä»¶:åŸºæœ¬æ€æƒ³

ç»„ä»¶æ˜¯ Angular åº”ç”¨ç¨‹åºä¸­ UI çš„æœ€åŸºæœ¬çš„æ„å»ºå—ã€‚å®ƒä»¬æ˜¯å¸¦æœ‰ç‰¹æ®Šè£…é¥°(@Component)å’Œæ¨¡æ¿çš„æŒ‡ä»¤ã€‚Component decorator å…è®¸æ‚¨å°†ä¸€ä¸ªç±»æ ‡è®°ä¸º Angular ç»„ä»¶ï¼Œå¹¶æä¾›é¢å¤–çš„å…ƒæ•°æ®æ¥ç¡®å®šåœ¨è¿è¡Œæ—¶åº”è¯¥å¦‚ä½•å¤„ç†ã€å®ä¾‹åŒ–å’Œä½¿ç”¨ç»„ä»¶ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç»„ä»¶çš„ç¤ºä¾‹:

```
import { Component } from '@angular/core';

@Component({ 
    selector: 'hello-component', 
    templateUrl: './hello-component.html', 
    styleUrls: ['./hello-component.css']
}) 
class Greet { 
    public name: string = 'Component'; 
} 
```

è¿™ä¸ªç»„ä»¶å¯ä»¥åœ¨æ¨¡æ¿çš„ä»»ä½•åœ°æ–¹ä½¿ç”¨ï¼Œå°±åƒè¿™ä¸ª`<hello-component></hello-component>`ã€‚templateUrl æŒ‡å®šç»„ä»¶æ¨¡æ¿çš„éƒ¨åˆ†ï¼ŒstyleUrls æŒ‡å®šç»„ä»¶æ ·å¼çš„éƒ¨åˆ†ï¼Œå…¬å…±å˜é‡ **name** ç”¨äºå‘ç»„ä»¶æ¨¡æ¿ä¼ é€’ä¸€ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°å¯ä»¥åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨æ¥è®¿é—®ã€‚

### ç»„ä»¶ç”Ÿå‘½å‘¨æœŸæŒ‚é’©

ç»„ä»¶å¯ä»¥é€šè¿‡å®ç°å„ç§ç”Ÿå‘½å‘¨æœŸæŒ‚é’©æ¥æ§åˆ¶å®ƒä»¬çš„è¿è¡Œæ—¶è¡Œä¸ºã€‚å½“ Angular åˆ›å»ºã€æ›´æ–°å’Œé”€æ¯ç»„ä»¶å®ä¾‹æ—¶ï¼Œç»„ä»¶å®ä¾‹å…·æœ‰ç”Ÿå‘½å‘¨æœŸã€‚å¼€å‘äººå‘˜å¯ä»¥é€šè¿‡åœ¨ Angular `core`åº“ä¸­å®ç°ä¸€ä¸ªæˆ–å¤šä¸ª*ç”Ÿå‘½å‘¨æœŸæŒ‚é’©*æ¥å£æ¥åˆ©ç”¨ç”Ÿå‘½å‘¨æœŸä¸­çš„å…³é”®æ—¶åˆ»ã€‚åœ¨æˆ‘ä»¬æ„å»ºçš„åº”ç”¨ç¨‹åºä¸­ï¼Œæ¯ä¸ªç»„ä»¶éƒ½æœ‰å…«ä¸ªä¸»è¦çš„é’©å­ï¼Œä¸‹é¢çš„å›¾è¡¨æŒ‰ç…§æ‰§è¡Œçš„é¡ºåºæ’åˆ—äº†å®ƒä»¬ã€‚

[![](../Images/7cc3ade8baaf8946d4b6a5316cf8b0b9.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--SUdexL8i--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1600/1%2A-5nnqZz1kMeAFQLKeZNqTg.png) 
*å‚è€ƒ[http://www.techjini.com/blog/angular2-lifecycle-hooks/](http://www.techjini.com/blog/angular2-lifecycle-hooks/)ä¸ºé•œåƒ*

æœ‰è®¸å¤šç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæŒ‚é’©ï¼Œä½†æˆ‘å°†åªè°ˆè®ºé‚£äº›æˆ‘è®¤ä¸ºåœ¨æœ¬æ–‡ä¸­ç”±äºå®ƒä»¬çš„ç”¨é€”è€Œå¿…é¡»è°ˆè®ºçš„ã€‚å¯ä»¥è®¿é—® [angular](https://angular.io/guide/lifecycle-hooks) äº†è§£æ›´å¤šå…³äº angular ç”Ÿå‘½å‘¨æœŸé’©å­çš„å†…å®¹ã€‚

**æ„é€ å‡½æ•°:**æ„é€ å‡½æ•°ä¸æ˜¯ angular ç»„ä»¶ç”Ÿå‘½å‘¨æœŸæŒ‚é’©çš„ä¸€éƒ¨åˆ†ï¼Œä½†`constructor`æ˜¯ typescript ç±»çš„é¢„å®šä¹‰é»˜è®¤æ–¹æ³•ã€‚åœ¨ä»»ä½•å…¶ä»–ç»„ä»¶ç”Ÿå‘½å‘¨æœŸä¹‹å‰è°ƒç”¨`constructor`ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæœ€å¥½ä¸è¦åœ¨æ„é€ å‡½æ•°ä¸­åšä»»ä½•äº‹æƒ…ï¼Œåªå¯¹å°†è¦æ³¨å…¥çš„ç±»ä½¿ç”¨å®ƒã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ‚¨çš„æ„é€ å‡½æ•°åº”è¯¥æ˜¯è¿™æ ·çš„:

```
constructor(private http: Http, private service: CustomService) {} 
```

**ngOnInit:** ç»„ä»¶çš„`ngOnInit`æ–¹æ³•åœ¨æ„é€ å‡½æ•°å**è¢«ç›´æ¥è°ƒç”¨ï¼Œåœ¨**å**ç¬¬ä¸€æ¬¡è§¦å‘ *ngOnChange* ã€‚å¦‚æœä½ çš„å‡½æ•°çš„åˆå§‹åŒ–å¤„ç†ä¾èµ–äºç»„ä»¶çš„ç»‘å®šï¼Œä½ åº”è¯¥ä½¿ç”¨`ngOnInit`(ä¾‹å¦‚ç”¨`@Input`å®šä¹‰çš„ç»„ä»¶å‚æ•°)**

### ç»„ä»¶å…³ç³»

Angular ç”±è®¸å¤šç»„ä»¶ç»„æˆã€‚æœ‰ä¸€ä¸ªæ ¹ç»„ä»¶ä½œä¸ºçˆ¶ç»„ä»¶ï¼Œç”±äºæ ¹ç»„ä»¶æ˜¯**çˆ¶ç»„ä»¶ï¼Œæ‰€ä»¥æ¯éš”ä¸€ä¸ªç»„ä»¶éƒ½å¯ä»¥è¢«ç§°ä¸ºæ ¹ç»„ä»¶çš„**å­ç»„ä»¶**ã€‚**å‡è®¾æœ‰ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªå­ç»„ä»¶(ç»„ä»¶ a å’Œç»„ä»¶ b)çš„æ ¹ç»„ä»¶ã€‚æˆ‘ä»¬å¯ä»¥ç®€å•åœ°è¯´**ç»„ä»¶-a** å’Œ**ç»„ä»¶-b** æ˜¯å…„å¼Ÿç»„ä»¶ã€‚

[![](../Images/0a2acbd61b37ee71bb45ea12c4e11121.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--VYn0BGk4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1600/1%2AMn10GXw-NHmQnzaCgX7VKA.png) 
*å‚è€ƒ[https://angularfirebase . com/lessons/sharing-data-between-angular-components-four-methods/](https://angularfirebase.com/lessons/sharing-data-between-angular-components-four-methods/)*

### åœ¨ç»„ä»¶ä¹‹é—´å…±äº«æ•°æ®

ä¸ºäº†åœ¨ç»„ä»¶ä¹‹é—´å…±äº«æ•°æ®ï¼Œæˆ‘ä»¬å¿…é¡»å®šä¹‰ç»„ä»¶ä¹‹é—´å­˜åœ¨çš„å…³ç³»ç±»å‹ã€‚æ˜¯äº²å­å…³ç³»è¿˜æ˜¯å…„å¼Ÿå§å¦¹å…³ç³»ï¼Ÿè¿™ç§å…³ç³»å°†å†³å®šç»„ä»¶ä¹‹é—´å…±äº«æ•°æ®çš„æœ€ä½³æ–¹å¼ã€‚

**çˆ¶åˆ°å­:é€šè¿‡@Input decorator å…±äº«æ•°æ®:**ä»çˆ¶åˆ°å­ä¼ é€’æ•°æ®æœ€ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨ **@Input binding** ï¼Œå®ƒå…è®¸é€šè¿‡å¦‚ä¸‹æ‰€ç¤ºçš„æ¨¡æ¿å…±äº«æ•°æ®:

```
//parent.component.ts

import { Component } from '@angular/core';import { ChildComponent } from './child.component';

@Component({ 
    selector: 'parent-component', 
    template: ` <child-component [messageToChild]="parentMessage"> 
        </child-component> 
    `, 
    styleUrls: ['./parent.component.css']
})
export class ParentComponent { 
    parentMessage = "message from parent"; 
    constructor() {};
} 
```

@Input è£…é¥°å™¨ç”±å­ç»„ä»¶ç”¨æ¥æ¥å—æ¥è‡ªçˆ¶ç»„ä»¶çš„æ•°æ®ã€‚çˆ¶ç»„ä»¶ä¸­çš„[childMessage]ä¸å­ç»„ä»¶ä¸­çš„å±æ€§åŒåã€‚

```
//child.component.ts

import { Component } from '@angular/core';import { ParentComponent } from './parent.component';

@Component({ 
    selector: 'child-component', 
    template: ` {{ childMessage }} `, 
    styleUrls: ['./parent.component.css']
})
export class ChildComponent { 
    @Input() childMessage: string; 
    constructor() {};
} 
```

**å­åˆ°çˆ¶:é€šè¿‡@Output Decorator å’Œ EventEmitter å…±äº«æ•°æ®:**@ Output Decorator ç”¨äºå°†æ•°æ®(äº‹ä»¶)ä»ä¸€ä¸ªç»„ä»¶å‘é€åˆ°çˆ¶ç»„ä»¶ã€‚

```
 import { Component, Output, EventEmitter } from '@angular/core';import { ChildComponent } from './child.component';

@Component({ 
    selector: 'child-component', 
    template: ` 
     <button (click)="sendMessageToParent()"> 
        Send Message To Parent         
     </button> 
    `, 
    styleUrls: ['./child.component.css']
})
class ChildComponent { 
    @Output() messageFromChild = new EventEmitter(); 
    sendMessageToParent() { 
        this.messageFromChild.emit('Message from child'); 
    }
} 
```

çˆ¶è¿›ç¨‹æ­£åœ¨ç›‘å¬ï¼Œå¹¶åœ¨æ”¶åˆ°æ•°æ®(äº‹ä»¶)æ—¶ä¼ é€’å›è°ƒä»¥æ‰§è¡Œé€‚å½“çš„æ“ä½œã€‚

```
@Component({ 
    selector: 'parent-component', 
    template: ` <child-component (messageFromChild)="onMessageRecieved($event)">     
      </child-component> 
    `, 
    styleUrls: ['./parent.component.css']
})
class ParentComponent { 
    onMessageRecieved(event) { 
        console.log(event); 
    }
} 
```

**Parent to child:é€šè¿‡ ViewChild å…±äº«æ•°æ®:** ViewChild ä½¿è®¿é—®å­ç»„ä»¶æ–¹æ³•æˆ–è®¿é—®å­ç»„ä»¶ä¸Šå¯ç”¨çš„å®ä¾‹å˜é‡å˜å¾—å®¹æ˜“ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå­ç»„ä»¶ï¼Œå®ƒçš„ childMethod æ–¹æ³•å¦‚ä¸‹:

```
childMethod() { 
    //a method inside child component
} 
```

ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥ä»çˆ¶ç»„ä»¶ç±»ä¸­ç”¨ ViewChild è°ƒç”¨è¯¥æ–¹æ³•ï¼Œå¦‚ä¸‹æ‰€ç¤º

```
import {Component, ViewChild, AfterViewInit} from "@angular/core";import { ChildComponent } from './child.component';

@Component({ 
    selector: 'parent-component', 
    template: ` Message From Child Component: {{ message }} 
    `, 
    styleUrls: ['./parent.component.css']
})
class ParentComponent { 
    @ViewChild(ChildComponent) childComponent: ChildComponent; 
    public message: any;

    ngAfterViewInit() { 
        this.childComponent.childMethod(); // ğŸ‘¶ I am a child method! 
    }
} 
```

ä½†æ˜¯ï¼Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œåœ¨è§†å›¾åˆå§‹åŒ–ä¹‹å‰ï¼Œchild æ˜¯ä¸å¯ç”¨çš„ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬éœ€è¦å®ç° AfterViewInit ç”Ÿå‘½å‘¨æœŸæŒ‚é’©æ¥æ¥æ”¶æ¥è‡ªå­©å­çš„æ•°æ®ï¼Œå¦‚ä¸Šæ‰€ç¤ºã€‚

**å…„å¼Ÿ(ç›´æ¥ä¸ç›¸å…³çš„ç»„ä»¶):é€šè¿‡æœåŠ¡ç±»:**è¦åœ¨ç¼ºä¹ç›´æ¥è¿æ¥çš„ç»„ä»¶(å¦‚å…„å¼Ÿã€å­™ç­‰)ä¹‹é—´å…±äº«æ•°æ®ï¼Œæ‚¨åº”è¯¥ä½¿ç”¨æœåŠ¡ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªæœåŠ¡ç¤ºä¾‹:

```
//data.service.ts

import { Injectable } from '@angular/core';

@Injectable()
export class DataService {
} 
```

æ•°æ®å¯ä»¥æ˜¯ä»»ä½•ç±»å‹ï¼ŒåŒ…æ‹¬å¯¹è±¡ã€‚æœåŠ¡ä¸­å¯èƒ½æœ‰æ›´å¤šçš„ä»£ç ï¼Œæ¯”å¦‚æ£€ç´¢é»˜è®¤å€¼æˆ–è¦å…±äº«çš„å€¼çš„ä»£ç ã€‚ç„¶åæ¯ä¸ªç»„ä»¶æ³¨å…¥è¿™ä¸ªæœåŠ¡å¹¶ä½¿ç”¨å®ƒçš„ä»·å€¼ã€‚

```
//componentA.component.ts

import { Component } from '@angular/core';import { DataService } from './data.service';

@Component({
 ... ...
})
export Class ComponentA { 
    constructor(public dataService: DataService) {}
    get data():string { 
        return this.dataService.serviceData(); 
    }

    set data(value: string) { 
        this.dataService.setDate = value; 
    }
}

//componentB.component.ts
import { Component } from '@angular/core';
import { DataService } from './data.service';

@Component({
    ...
    ...
})
export class ComponentB {
    constructor(public dataService: DataService){}

    get data(): string {
        return this.dataService.serviceData();
    }

    set data(value: string) {
        this.dataService.setData = value;
    } 
} 
```

åœ¨è¿™ç¯‡å…³äºè§’åº¦ç»„ä»¶çš„æ–‡ç« ä¸­ï¼Œæˆ‘è¯•å›¾æ¶µç›–æˆ‘è®¤ä¸ºå¼€å§‹ä½¿ç”¨è§’åº¦ç»„ä»¶æœ€é‡è¦çš„äº‹æƒ…ã€‚å¦‚æœä½ æœ‰ä»»ä½•å»ºè®®ï¼Œè¯·è”ç³»æˆ‘ã€‚

æ„Ÿè°¢é˜…è¯»