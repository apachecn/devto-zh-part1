# å¾®å…‰ä¸ååº”çš„éå•è°ƒæ¯”è¾ƒ

> åŸæ–‡:[https://dev . to/jmbejar/unpinionated-comparison-of-glimmer-and-react-h48](https://dev.to/jmbejar/unopinionated-comparison-of-glimmer-and-react-h48)

*æœ€åˆå‘è¡¨äº [Wyeworks åšå®¢](https://wyeworks.com/blog/2017/12/20/unopinionated-comparison-of-glimmer-and-react/)ã€‚*

åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®ºä½¿ç”¨[å¾®å…‰](https://glimmerjs.com/)ä¸[ååº”](https://reactjs.org/)çš„ä¸åŒ(æˆ–ç›¸ä¼¼)ä¹‹å¤„ã€‚Glimmer æ˜¯ä¸‰æœˆä»½å‘å¸ƒçš„[ä½™çƒ¬](https://www.emberjs.com/)ç”Ÿæ€ç³»ç»Ÿä¸­çš„ä¸€ä¸ªæ–°åº“ã€‚è‡ªä»è¿™ä¸ªé¡¹ç›®åˆ›å»ºä»¥æ¥ï¼ŒEmber å›¢é˜Ÿä¸€ç›´åœ¨å°è¯•ä¸€ç§æ–°çš„ç»„ä»¶ APIï¼Œè¿™é¡¹å·¥ä½œçš„ç»“æœæœ‰æœ›åœ¨æœªæ¥é€æ¸é›†æˆåˆ° Ember æœ¬èº«ä¸­ã€‚

åœ¨æŸç§ç¨‹åº¦ä¸Šï¼ŒGlimmer ä¸ React å…·æœ‰å¯æ¯”æ€§ï¼Œå› ä¸ºä¸¤ä¸ªåº“çš„èŒƒå›´éå¸¸ç›¸ä¼¼:ç”¨äº web çš„ UI ç»„ä»¶ã€‚ä½†æ˜¯ï¼Œè®©æˆ‘ä»¬çœ‹ä¸€äº›ä¾‹å­æ¥çªå‡ºä¸€äº›ç›¸ä¼¼ä¹‹å¤„ï¼Œä»¥åŠä¸åŒä¹‹å¤„ã€‚

## [](#our-first-comparison)æˆ‘ä»¬å…ˆæ¯”è¾ƒä¸€ä¸‹

è®©æˆ‘ä»¬ä»æ¯”è¾ƒä¸€äº›åŸºæœ¬çš„ä¸œè¥¿å¼€å§‹ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªåŒ…å«æŒ‰é’®çš„ç»„ä»¶ã€‚å½“ç‚¹å‡»æ‰€è¿°æŒ‰é’®æ—¶ï¼Œæ˜¾ç¤ºéšæœºçš„åŠ¨ç‰©åç§°ã€‚

è¿™å°±æ˜¯æˆ‘ä»¬å¦‚ä½•ç”¨ React å®ç°å®ƒ:

```
import React, { Fragment } from "react";

const animals = ["Cat", "Dog", "Rabbit"];

class RandomAnimal extends React.Component {
  constructor() {
    super();
    this.state = { animal: null };
    this.setRandomAnimal = this.setRandomAnimal.bind(this);
  }

  setRandomAnimal() {
    const animal = animals[Math.floor(Math.random() * 3)];
    this.setState({ animal });
  }

  render() {
    let renderAnimal;

    if (this.state.animal) {
      renderAnimal = <h1>Hello, {this.state.animal}</h1>
    }

    return (
      <Fragment>
        <button onClick={this.setRandomAnimal}>Set Random Animal</button>
        { renderAnimal }
      </Fragment>
    );
  }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

> è¯•è¯•è¿™ä¸ªä»£ç [è¿™é‡Œ](https://jsfiddle.net/69z2wepo/94872/)

Glimmer çš„ç¿»è¯‘æ˜¯ä»€ä¹ˆï¼Ÿå¥½å§ï¼Œä¸‹é¢åšåŒæ ·çš„äº‹æƒ…(è¯·æ³¨æ„ï¼Œæˆ‘ä»¬éœ€è¦ä¸¤ä¸ªæ–‡ä»¶):

*æ¨¡æ¿. hbs*

```
<button onclick={{action setRandomAnimal}}>Set Random Animal</button>
{{#if randomAnimal}}
  Hello, {{randomAnimal}}!
{{/if}} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

*component . ts*T2ã€‘

```
import Component, { tracked } from '@glimmer/component';

const animals = ["Cat", "Dog", "Rabbit"];

export default class extends Component {
  @tracked randomAnimal = null;

  setRandomAnimal() {
    const animal = animals[Math.floor(Math.random() * 3)];
    this.randomAnimal = animal;
  }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

> è¯•è¯•è¿™ä¸ªä»£ç [è¿™é‡Œ](http://tinyurl.com/ychd4suv)

æ˜¾ç„¶ï¼ŒHTML ä»£ç åœ¨æ¯ç§æƒ…å†µä¸‹éƒ½æœ‰ä¸åŒçš„å¤„ç†æ–¹å¼:React ä¾é  JSX å°† HTML åµŒå…¥åˆ° Javascript ä»£ç ä¸­ï¼Œè€Œ Glimmer éœ€è¦ä¸€ä¸ªç‰¹å®šçš„æ¨¡æ¿æ–‡ä»¶ï¼Œä½¿ç”¨[æ‰‹æŸ„](http://handlebarsjs.com/)å°† HTML ä»£ç å†™å…¥è¯¥æ¨¡æ¿ã€‚

æ‚¨å¯èƒ½å·²ç»æ³¨æ„åˆ°ï¼Œæˆ‘ä»¬çš„ç»„ä»¶æ²¡æœ‰æƒŸä¸€çš„æ ¹å…ƒç´ ã€‚Glimmer æ”¯æŒå¼€ç®±å³ç”¨ã€‚åœ¨ React ä¸­ï¼Œåˆ›å»ºå…·æœ‰å¤šä¸ªæ ¹å…ƒç´ çš„ç»„ä»¶çš„ä¸€ç§å¯èƒ½æ–¹å¼æ˜¯ä½¿ç”¨`Fragment`æ ‡ç­¾ï¼Œå¦‚ç¤ºä¾‹ä¸­æ‰€åšçš„é‚£æ ·ã€‚åœ¨æœ€æ–°çš„ React ç‰ˆæœ¬ä¸­ï¼Œå¯¹è¿™ç§æƒ…å†µçš„æ”¯æŒå·²ç»æœ‰æ‰€æ”¹å–„ï¼Œæ­£å¦‚è¿™é‡Œçš„æ‰€è§£é‡Šçš„ã€‚

æˆ‘ä»¬æœ‰ä¸€ä¸ªæŒ‰é’®ï¼Œå®ƒé™„åŠ åˆ°ä¸€ä¸ªåŠ¨ä½œä¸Šï¼Œå½“å•å‡»æŒ‰é’®æ—¶ï¼Œè¿™ä¸ªåŠ¨ä½œè¢«è°ƒç”¨ã€‚åœ¨ React ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡å°†ç»„ä»¶å‡½æ•°ä¼ é€’ç»™æŒ‰é’®çš„`onClick`å±æ€§æ¥å®ç°è¿™ä¸€ç‚¹ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬éœ€è¦ç¡®ä¿å‡½æ•°è¢«æ­£ç¡®åœ°ç»‘å®šåˆ°`this`(æˆ‘ä»¬å°†å‡½æ•°ç»‘å®šåˆ°æ„é€ å‡½æ•°)ã€‚å¦ä¸€æ–¹é¢ï¼ŒGlimmer é™„å¸¦äº†ä¸€ä¸ª`action`åŠ©æ‰‹ï¼Œå½“ç»„ä»¶å‡½æ•°`setRandomAnimal`è¢«ä¼ é€’ç»™æŒ‰é’®çš„`onclick`å±æ€§æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨å®ƒã€‚

`setRandomAnimal`å‡½æ•°çš„å®ç°éå¸¸ç›¸ä¼¼ï¼Œä½†æ˜¯æ ¹æ®ç»„ä»¶çš„å†…éƒ¨çŠ¶æ€åœ¨æ¯ç§æƒ…å†µä¸‹æ˜¯å¦‚ä½•æ›´æ–°çš„è€Œæœ‰æ‰€ä¸åŒã€‚React é™„å¸¦äº†`setState`å‡½æ•°ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦é‡æ–°å‘ˆç°ç»„ä»¶ï¼Œå¿…é¡»ç”¨å®ƒæ¥æ”¹å˜ä»»ä½•å†…éƒ¨çŠ¶æ€ã€‚

åœ¨ Glimmer ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨`tracked properties`ï¼Œå®ƒé€šè¿‡ä½¿ç”¨å¸¸è§„ Javascript è¯­æ³•åˆ†é…ä¸€ä¸ªæ–°å€¼æ¥æ›´æ–°(åœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ï¼Œç›¸å…³ä»£ç æ˜¯`this.randomAnimal = animal;`)ã€‚ä½†æ˜¯ï¼Œè¿™ä¾èµ–äºè´¢äº§ç”³æŠ¥ã€‚æˆ‘ä»¬å¿…é¡»ä½¿ç”¨`@tracked`æ³¨é‡Šï¼Œä»¥ä¾¿ Glimmer è·Ÿè¸ªè¿™äº›å€¼ï¼Œå¹¶åœ¨è¿™äº›å±æ€§å‘ç”Ÿä¿®æ”¹æ—¶è§¦å‘ç»„ä»¶é‡æ–°å‘ˆç°ã€‚

æˆ‘ä»¬å¯ä»¥çœ‹åˆ° Glimmer éµå¾ªäº†æ›´å…·å£°æ˜æ€§çš„æ–¹æ³•ï¼Œè€Œ React çš„æ¨¡å‹æ›´å…·å‘½ä»¤æ€§(ç”±äºéœ€è¦è°ƒç”¨`setState`)æ¥ç®¡ç†ç»„ä»¶ä½•æ—¶åœ¨ UI ä¸­è¢«åˆ·æ–°ã€‚

## [](#iterating-over-arrays)éå†æ•°ç»„

è®©æˆ‘ä»¬é‡å†™ React ç»„ä»¶æ¥æ˜¾ç¤ºåŠ¨ç‰©åˆ—è¡¨:

```
import React, { Fragment } from "react";

const animals = ["Cat", "Dog", "Rabbit"];

class RandomAnimal extends React.Component {
  constructor() {
    super();
    this.state = { animals: [] };
    this.setRandomAnimal = this.setRandomAnimal.bind(this);
  }

  setRandomAnimal() {
    const animal = animals[Math.floor(Math.random() * 3)];

    this.setState((prevState) => (
      { animals: prevState.animals.concat(animal) }
    ));
  }

  render() {
    const renderedAnimals = this.state.animals.map((animal, index) =>
      <li key={index}>{animal}</li>
    );

    return (
      <Fragment>
        <button onClick={this.setRandomAnimal}>Set Random Animal</button>
        <ul>{ renderedAnimals }</ul>
      </Fragment>
    );
  }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

> è¯•è¯•è¿™ä¸ªä»£ç [è¿™é‡Œ](https://jsfiddle.net/69z2wepo/94874/)

è¿™é‡Œæˆ‘ä»¬ä¿®æ”¹äº†ä»£ç ï¼Œä»¥æ˜¾ç¤ºåŠ¨ç‰©åˆ—è¡¨ã€‚æŒ‰é’®çš„ click äº‹ä»¶å°†è°ƒç”¨ä¸€ä¸ªå‘åˆ—è¡¨ä¸­æ·»åŠ æ–°åŠ¨ç‰©çš„å‡½æ•°ã€‚React æ–‡æ¡£å£°æ˜ [`this.state`ä¸èƒ½ç›´æ¥å˜å¼‚](https://reactjs.org/docs/react-component.html#state)ï¼Œå› ä¸º React çš„è®¾è®¡æ€æƒ³æ˜¯ç»„ä»¶çš„çŠ¶æ€åªèƒ½é€šè¿‡`setState`æ›´æ–°ã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬ä½¿ç”¨`concat`æ¥ç”ŸæˆåŠ¨ç‰©åˆ—è¡¨çš„æ–°å®ä¾‹ï¼ŒåŒ…æ‹¬æ·»åŠ çš„é¡¹ç›®ã€‚

å¦ä¸€æ¡å…³äº`setState`çš„å»ºè®®å€¼å¾—ä¸€æ:æˆ‘ä»¬éœ€è¦ä¾é `prevState`çš„å€¼æ¥ç¡®ä¿å¦‚æœ React å†³å®šæ‰¹é‡è°ƒç”¨`setState` [æ—¶ï¼Œæˆ‘ä»¬ä¸ä¼šå¼„ä¹±åŠ¨ç‰©çš„æ•°ç»„ï¼Œæ­£å¦‚è¿™é‡Œçš„](https://reactjs.org/docs/state-and-lifecycle.html#state-updates-may-be-asynchronous)æ‰€è§£é‡Šçš„ã€‚

ä»¥ä¸Šéƒ½æ˜¯éœ€è¦æ³¨æ„çš„åŸºæœ¬ *React çš„é—®é¢˜*ã€‚å®é™…ä¸Šï¼Œæˆ‘ä»¬çš„ç»„ä»¶å¯ä»¥é€šè¿‡æ”¹å˜åˆ—è¡¨æˆ–è€…ä¾èµ–äº`setState`å›è°ƒä¸­çš„`this.state.animals`å’Œ*æ¥å®ç°ï¼Œå®ƒå¯ä»¥å·¥ä½œ*...å¤§å¤šæ•°æ—¶å€™ã€‚ä¸å¹¸çš„æ˜¯ï¼Œè¿™å°†å¼•å…¥å¾®å¦™çš„é—®é¢˜ï¼Œå¦‚æœç«äº‰æ¡ä»¶ç¡®å®å­˜åœ¨ï¼Œè¿™å°†å¾ˆéš¾è·Ÿè¸ªã€‚

ç°åœ¨è®©æˆ‘ä»¬æ¢ç´¢ä¸€ä¸‹å®ƒåœ¨ Glimmer ä¸­çš„æ ·å­:

*æ¨¡æ¿. hbs*

```
<button onclick={{action setRandomAnimal}}>Set Random Animal</button>
<ul>
  {{#each randomAnimals key="@index" as |animal| }}
    <li>{{animal}}</li>
  {{/each}}
</ul> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

*component . ts*T2ã€‘

```
import Component, { tracked } from '@glimmer/component';

const animals = ["Cat", "Dog", "Rabbit"];

export default class extends Component {
  @tracked randomAnimals = [];

  setRandomAnimal() {
    const animal = animals[Math.floor(Math.random() * 3)];

    this.randomAnimals = this.randomAnimals.concat(animal);
  }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

> è¯•è¯•è¿™ä¸ªä»£ç [è¿™é‡Œ](http://tinyurl.com/y9jsdubp)

è¿™é‡Œæˆ‘ä»¬æœ‰ä¸€äº› Glimmer å’Œ React ä¹‹é—´éå¸¸ç›¸ä¼¼çš„ä¸œè¥¿:æˆ‘ä»¬éœ€è¦æ”¹å˜æ•°ç»„æ¥æ›´æ–° UIã€‚å¦‚æœæˆ‘ä»¬ç›´æ¥æ”¹å˜æ•°ç»„å€¼ï¼ŒGlimmer ä¸ä¼šåˆ·æ–°ç»„ä»¶ï¼Œå› ä¸ºå®ƒä¸ä¼šæ£€æµ‹åˆ°è¢«è·Ÿè¸ªå±æ€§ä¸­çš„å€¼å˜åŒ–ã€‚å½“è·Ÿè¸ªçš„å±æ€§æ˜¯æ•°ç»„æˆ–å¯¹è±¡æ—¶ï¼Œå¿…é¡»æä¾›å…·æœ‰ä¿®æ”¹å€¼çš„æ–°å®ä¾‹ã€‚è¿™åœ¨â€œä¸å¯å˜æ¨¡å¼â€ä¸€èŠ‚ä¸­æœ‰è§£é‡Šï¼Œè¿™é‡Œçš„[æ˜¯](https://glimmerjs.com/guides/tracked-properties)ã€‚ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬å¿½ç•¥äº†è¿™ä¸ªå»ºè®®ï¼Œå¹¶ä¸”å¯¹åŠ¨ç‰©æ•°ç»„è¿›è¡Œäº†å˜å¼‚ï¼Œé‚£ä¹ˆå½“æˆ‘ä»¬å•å‡»æŒ‰é’®æ—¶ï¼Œç»„ä»¶æ ¹æœ¬ä¸ä¼šæ›´æ–°ã€‚å› ä¸ºåŠ¨ç‰©åˆ—è¡¨ä¸­çš„å˜åŒ–æ²¡æœ‰åæ˜ åœ¨ç½‘é¡µä¸Šï¼Œæ‰€ä»¥æˆ‘ä»¬çŸ¥é“æœ‰äº›ä¸œè¥¿æ²¡æœ‰æŒ‰é¢„æœŸå·¥ä½œï¼Œå› æ­¤ï¼Œä¸å¤ªå¯èƒ½å‡ºç° React æ¡ˆä¾‹ä¸­çš„ç«äº‰æ¡ä»¶é—®é¢˜ã€‚

å…³äºç”¨æˆ·ç•Œé¢æ˜¯å¦‚ä½•æ„å»ºçš„ï¼Œæˆ‘ä»¬è§‚å¯Ÿåœ¨æ¯ç§æƒ…å†µä¸‹äº§ç”Ÿ HTML çš„æœºåˆ¶æ˜¯å¦‚ä½•çš„ä¸åŒã€‚åœ¨ Glimmer ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨æ‰‹æŸ„ï¼Œå®ƒå¸¦æœ‰æ§åˆ¶ç»“æ„ï¼Œå¦‚`if`å’Œ`each`å—æ¥æ„å»ºåŠ¨æ€å†…å®¹ã€‚æ­¤å¤–ï¼Œæ‚¨å¯ä»¥è®¿é—®ç»„ä»¶å±æ€§(æ‰€æœ‰çš„å±æ€§ï¼Œæ— è®ºæ˜¯å¦è¢«è·Ÿè¸ª)ï¼Œå¹¶ä¸”æ‚¨æ°¸è¿œä¸ä¼šé€šè¿‡`this`æ¥å¼•ç”¨ç»„ä»¶æœ¬èº«ã€‚äº‹å®ä¸Šï¼Œè¿™åŸºæœ¬ä¸Šæ˜¯ä¸€ç§å£°æ˜æ€§çš„æ–¹æ³•...åˆä¸€æ¬¡ã€‚

åœ¨ React ä¸­ï¼Œæ‚¨å°†æœ€ç»ˆä»¥ä¸€ç§æ›´åŠ ç¨‹åºåŒ–(å’Œå‘½ä»¤æ€§)çš„æ–¹å¼å½¢æˆ HTML è¾“å‡ºï¼Œå¾ˆå¯èƒ½å°†è¾“å‡ºè®¡ç®—çš„ä¸€éƒ¨åˆ†æ‹†åˆ†åˆ°å‡ ä¸ªå˜é‡æˆ–è¾…åŠ©å‡½æ•°ä¸Šï¼Œæœ€åå°†ç”±`render`å‡½æ•°è¿”å›çš„å€¼ä¸­çš„æ‰€æœ‰å†…å®¹è¿æ¥èµ·æ¥ã€‚ç”±äºæˆ‘ä»¬çš„æ¡ˆä¾‹å¹¶ä¸å¤æ‚ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨`map`å‡½æ•°çš„å¸®åŠ©ä¸‹ä½¿ç”¨å±€éƒ¨å˜é‡`renderAnimals`æ¥æ„å»º`li`å…ƒç´ çš„åˆ—è¡¨ã€‚

## [](#composing-components)æ„æˆç»„ä»¶

ä»¥æ¢ç´¢ç»„ä»¶ä¹‹é—´çš„äº¤äº’ä¸ºå€Ÿå£ï¼Œè®©æˆ‘ä»¬é‡å†™ React ç¤ºä¾‹ï¼Œä½¿å…¶åªåŒ…å«æŒ‰é’®çš„ä¸€ä¸ªç‰¹å®šç»„ä»¶:

```
import React, { Fragment } from "react";

const animals = ["Cat", "Dog", "Rabbit"];

function AnimalButton(props) {

  function setRandomAnimal() {
    const animal = animals[Math.floor(Math.random() * 3)];
    props.onAnimalPicked(animal);
  }

  return (
    <button onClick={setRandomAnimal}>{props.caption}</button>
  );
}

class RandomAnimal extends React.Component {
  constructor() {
    super();
    this.state = { animals: [] };
    this.addAnimalToList = this.addAnimalToList.bind(this);
  }

  addAnimalToList(animal) {
    this.setState((prevState) => (
      { animals: prevState.animals.concat(animal) }
    ));
  }

  render() {
    const renderedAnimals = this.state.animals.map((animal, index) =>
      <li key={index}>{animal}</li>
    );

    return (
      <Fragment>
        <AnimalButton caption="Set Random Animal" onAnimalPicked={this.addAnimalToList}/>
        <ul>{ renderedAnimals }</ul>
      </Fragment>
    );
  }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

> è¯•è¯•è¿™ä¸ªä»£ç [è¿™é‡Œ](https://jsfiddle.net/69z2wepo/94873/)

æ³¨æ„ï¼Œæˆ‘ä»¬æ·»åŠ äº†æ— çŠ¶æ€ç»„ä»¶`AnimalButton`ï¼Œå¹¶ä¸”æˆ‘ä»¬æ­£åœ¨ä¸ºè¿™ä¸ªç»„ä»¶ç¡®å®šåˆ—è¡¨ä¸­çš„ä¸‹ä¸€ä¸ªåŠ¨ç‰©ã€‚ç„¶åï¼Œæˆ‘ä»¬ä¼ é€’ä¸€ä¸ªæ–°åŠ¨ç‰©è°ƒç”¨çš„å›è°ƒå‡½æ•°ã€‚å°†å€¼æ·»åŠ åˆ°åˆ—è¡¨ä¸­æ˜¯æˆ‘ä»¬ä¸»è¦ç»„ä»¶çš„å·¥ä½œã€‚æ ‡é¢˜æ–‡æœ¬å’Œå›è°ƒå‡½æ•°éƒ½æ˜¯ä½œä¸ºå±æ€§ä¼ é€’çš„å€¼ã€‚

ç±»ä¼¼åœ°ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ Glimmer ä¸­è¿›è¡Œç±»ä¼¼çš„é‡æ„:

AnimalButton/template.hbs

```
<button onclick={{action setRandomAnimal}}>{{@caption}}</button> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åŠ¨ç‰©æŒ‰é’®/ç»„ä»¶. ts

```
import Component, { tracked } from "@glimmer/component";

const animals = ["Cat", "Dog", "Rabbit"];

export default class extends Component {
  setRandomAnimal() {
    const animal = animals[Math.floor(Math.random() * 3)];

    this.args.onAnimalPicked(animal);
  }
}; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

RandomAnimal/template.hbs

```
<AnimalButton @caption="Set Random Animal" @onAnimalPicked={{action addAnimalToList}} />

<ul>
  {{#each randomAnimals key="@index" as |animal| }}
    <li>{{animal}}</li>
  {{/each}}
</ul> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

RandomAnimal/component.ts

```
import Component, { tracked } from '@glimmer/component';

export default class extends Component {
  @tracked randomAnimals = [];

  addAnimalToList(animal) {
    this.randomAnimals = this.randomAnimals.concat(animal);
  }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

> è¯•è¯•è¿™ä¸ªä»£ç [è¿™é‡Œ](http://tinyurl.com/y9j3lunu)

æŸ¥çœ‹ Glimmer è§£å†³æ–¹æ¡ˆï¼Œæˆ‘ä»¬æ³¨æ„åˆ°å®ƒåœ¨å°†å€¼ä¼ é€’ç»™`AnimalButton`ç»„ä»¶çš„æ–¹å¼ä¸Šéå¸¸ç›¸ä¼¼(æ³¨æ„ï¼Œåœ¨ Glimmer ä¸­ï¼Œå‚æ•°ä»¥å­—ç¬¦`@`å¼€å§‹)ã€‚åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½å‘`AnimalButton`ç»„ä»¶ä¼ é€’äº†ä¸€ä¸ªæŒ‰é’®å…ƒç´ çš„å­—ç¬¦ä¸²ï¼Œä»¥åŠä¸€ä¸ªå°†åŠ¨ç‰©æ·»åŠ åˆ°åˆ—è¡¨ä¸­çš„å‡½æ•°ã€‚

åœ¨æˆ‘ä»¬çš„ React è§£å†³æ–¹æ¡ˆä¸­ï¼Œå›è°ƒæ˜¯`props`çš„ä¸€ä¸ªå±æ€§ï¼Œæ‰€ä»¥å½“æŒ‰é’®è¢«å•å‡»æ—¶ï¼Œæ¥è‡ªçˆ¶ç»„ä»¶çš„`addAnimalToList`å‡½æ•°æœ€ç»ˆè¢«è°ƒç”¨ã€‚åœ¨ Glimmer ä¸­ï¼Œä¼ é€’çš„å‡½æ•°ä½œä¸º`this.args`çš„å±æ€§åœ¨å­ç»„ä»¶ä¸Šä¸‹æ–‡ä¸­å¯ç”¨ï¼Œè¿™ä¹Ÿä½¿å¾—è°ƒç”¨éå¸¸å®¹æ˜“ã€‚è¿™é‡Œå”¯ä¸€çš„åŒºåˆ«æ˜¯`action`å…³é”®å­—çš„ç”¨æ³•ï¼Œå®ƒè‡ªåŠ¨å°†å‡½æ•°ç»‘å®šåˆ°çˆ¶ç»„ä»¶ä¸Šä¸‹æ–‡ï¼Œè¿™é€šå¸¸æ˜¯æœ€æ–¹ä¾¿çš„ç»‘å®šã€‚React ä¸­é€šå¸¸éœ€è¦æ‰‹åŠ¨å°†å›è°ƒç»‘å®šåˆ°ç»„ä»¶å®ä¾‹ï¼Œå°±åƒæˆ‘ä»¬ç¤ºä¾‹ä¸­çš„`constructor`å‡½æ•°çš„æœ€åä¸€è¡Œæ‰€åšçš„é‚£æ ·ã€‚

è¿™é‡Œæœ€æ˜æ˜¾çš„åŒºåˆ«ä¸éå¸¸ç®€å•çš„ç»„ä»¶æœ‰å…³ï¼Œå¦‚`AnimalButton`ã€‚åœ¨ React ä¸­ï¼Œå¯ä»¥å°†`AnimalButton`å®ç°ä¸ºæ— çŠ¶æ€ç»„ä»¶ã€‚è¿™æ˜¯ä¸€ç§ç®€åŒ–ä¸åŒ…å«å†…éƒ¨çŠ¶æ€çš„ç»„ä»¶å®šä¹‰çš„æ–¹æ³•ã€‚Glimmer ä¸­æ²¡æœ‰ç±»ä¼¼çš„æ¦‚å¿µï¼Œåœ¨ Glimmer ä¸­ï¼Œæœ€ç®€å•çš„é€‰æ‹©æ˜¯åªåŒ…å«æ‰‹æŸ„ä»£ç çš„ç»„ä»¶ã€‚ä½†æ˜¯ï¼Œå¿…é¡»æœ‰ä¸€äº›ç±»å‹è„šæœ¬ä»£ç æ¥å¤„ç† click äº‹ä»¶å’Œè°ƒç”¨å›è°ƒï¼Œå› æ­¤åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­è¿™ä¸¤ä¸ªæ–‡ä»¶éƒ½æ˜¯å¿…éœ€çš„ã€‚

æˆ‘ä»¬ä¹‹å‰ä¸æ˜¯æåˆ°è¿‡ Glimmer é»˜è®¤ä½¿ç”¨ Typescript è€Œä¸æ˜¯ Javascript å—ï¼ŸğŸ¤ 

å¦ä¸€ä»¶é‡è¦çš„äº‹ï¼åœ¨ Glimmer ä¸­ï¼Œæ–‡ä»¶çš„ä½ç½®å’Œåç§°éå¸¸é‡è¦ã€‚æ‰€æœ‰ç»„ä»¶éƒ½åº”è¯¥æ”¾åœ¨å•ç‹¬çš„æ–‡ä»¶å¤¹ä¸­çš„`ui/components`ä¸‹ï¼Œæ–‡ä»¶å¤¹ä¸­æœ‰ç‰¹å®šçš„æ–‡ä»¶`template.hbs`å’Œ`component.ts`ã€‚ä¸ºäº†ä¿æŒäº‹ç‰©çš„æ­£ç¡®è”ç³»ï¼Œå¿…é¡»éµå®ˆè¿™ä¸ªçº¦å®šã€‚åœ¨ React ä¸–ç•Œä¸­ï¼Œäººä»¬æœ‰æ›´å¤šçš„è‡ªç”±æ¥ç»„ç»‡äº‹æƒ…ï¼Œå› ä¸ºæ‚¨è´Ÿè´£ä½¿ç”¨ [ES6 æ¨¡å—å¯¼å…¥è¯­æ³•](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import)åœ¨éœ€è¦æ—¶å¯¼å…¥ç»„ä»¶ã€‚

## [](#further-comparison)è¿›ä¸€æ­¥æ¯”è¾ƒ

é™¤äº†ä¸Šé¢çš„ä»£ç ç¤ºä¾‹ä¹‹å¤–ï¼Œè¿™ä¸¤ä¸ªåº“ä¹‹é—´è¿˜æœ‰å…¶ä»–å€¼å¾—å¼ºè°ƒçš„ç›¸ä¼¼ä¹‹å¤„ã€‚

ä¾‹å¦‚ï¼Œä¸¤è€…éƒ½æ”¯æŒä¸ºç»„ä»¶å®šä¹‰å†…è”å†…å®¹ã€‚çœ‹çœ‹ä¸‹é¢çš„`AnimalButton`ç»„ä»¶çš„æ¸²æŸ“å‡½æ•°çš„æ›¿ä»£å®ç°:

```
function AnimalButton(props) {

  ...

  return (
    <button onClick={setRandomAnimal}>
      {props.children}
    </button>
  );
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ ‡ç­¾`<AnimalButton>`ä¸‹åµŒå¥—çš„ä»»ä½•å†…å®¹éƒ½å°†æ›¿æ¢`props.children`ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªçˆ¶ç»„ä»¶å¦‚ä½•è°ƒç”¨å®ƒçš„ä¾‹å­:

```
function RandomAnimal() {
  return (
    <AnimalButton onAnimalPicked={this.addAnimalToList}>
      Set Random Animal
    </AnimalButton>
  );
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨ Glimmer ä¸­ï¼Œä½¿ç”¨`yield`å…³é”®å­—ä¹Ÿå¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ã€‚è™½ç„¶åœ¨ Glimmer æ–‡æ¡£ä¸­æ²¡æœ‰æ­£å¼æåˆ°ï¼Œä½†å®ƒçš„å·¥ä½œæ–¹å¼ä¸é¢„æœŸä¸€æ ·ã€‚å—¯ï¼Œå¦‚æœä½ æœ‰è¿‡ä½¿ç”¨ Ember çš„ç»éªŒï¼Œä½ å¯èƒ½ä¼šæƒ³åˆ°ä¸€äº›ä¸œè¥¿ğŸ˜Œã€‚

AnimalButton/template.hbs

```
<button onclick={{action setRandomAnimal}}>
  {{yield}}
</button> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

RandomAnimal/template.hbs

```
<AnimalButton @onAnimalPicked={{action addAnimalToList}}>
  Set Random Animal
</AnimalButton> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™ä¸¤ä¸ªåº“éƒ½æœ‰é¢å¤–çš„ç›¸ä¼¼ç‰¹æ€§ï¼Œæ¯”å¦‚èƒ½å¤Ÿåœ¨ç»„ä»¶çš„ DOM å±‚æ¬¡ç»“æ„ä¹‹å¤–è¿›è¡Œæ¸²æŸ“(å‚è§ React ä¸­çš„[é—¨æˆ·](https://reactjs.org/docs/portals.html)å’Œ Glimmer ä¸­çš„`{{in-element}}`åŠ©æ‰‹ï¼Œè¿™é‡Œæåˆ°çš„)ã€‚

å¦ä¸€ä¸ªé‡è¦çš„æ–¹é¢æ˜¯ç»„ä»¶ API ä¸­ç”Ÿå‘½å‘¨æœŸæŒ‚é’©çš„å¯ç”¨æ€§ã€‚äº‹å®ä¸Šï¼ŒGlimmer å¹¶æ²¡æœ‰åŒ…å«å¾ˆå¤šè¿™æ ·çš„å†…å®¹ï¼›åªæœ‰`didInsertElement`ã€`didUpdate`å’Œ`willDestroy`å‡ºç°åœ¨å…¬å…± API ä¸­ã€‚React æœ‰æ›´å¤šçš„æŒ‚é’©ï¼Œä½†æˆ‘å¸Œæœ›åœ¨ä¸ä¹…çš„å°†æ¥åœ¨ Glimmer ä¸­çœ‹åˆ°ç±»ä¼¼çš„åŠŸèƒ½(ä¾‹å¦‚ï¼Œç±»ä¼¼ React çš„`componentWillReceiveProps`å°†æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©)ã€‚

## [](#conclusions)ç»“è®º

æœ¬æ–‡ä¸­çš„ä¾‹å­è®©æˆ‘ä»¬èƒ½å¤Ÿæ¶µç›–ä¸¤ä¸ªåº“ä¸­ç›¸ä¼¼çš„æ–¹é¢ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬è®¨è®ºäº†æ¯ä¸ªåº“è§£å†³ä¸åŒé—®é¢˜çš„æ–¹æ³•ã€‚è™½ç„¶è¿™ç§æ¯”è¾ƒå¹¶ä¸æ˜¯å¯¹æ¯ä¸ªåº“çš„èƒ½åŠ›çš„å®Œæ•´å›é¡¾ï¼Œä½†æ˜¯å·²ç»å¼ºè°ƒäº†è®¸å¤šç›¸å…³çš„æ–¹é¢ï¼Œå¹¶ä¸”æä¾›äº†æ‚¨å¯ä»¥ä» Glimmer å’Œ React ä¸­å¾—åˆ°ä»€ä¹ˆçš„æ€»ä½“æƒ³æ³•ã€‚

æˆ‘ä»¬åº”è¯¥æ³¨æ„åˆ°ï¼ŒGlimmer æ˜¯ä¸€ä¸ªç›¸å½“å¹´è½»çš„åº“ï¼Œå› æ­¤ï¼Œå·²ç»å‘å¼€å‘è€…å…¬å¼€çš„ç»„ä»¶ API ä»åœ¨ä¸æ–­å˜åŒ–å’Œè¿›ä¸€æ­¥å»ºç«‹ã€‚å¦ä¸€æ–¹é¢ï¼Œè¿™ä¸ªåº“ç”± GlimmerVM æä¾›æ”¯æŒï¼Œè¿™æ˜¯ Ember æ›´é«˜ç‰ˆæœ¬é™„å¸¦çš„æ¸²æŸ“å¼•æ“ï¼Œå› æ­¤å®ƒå·²ç»åœ¨è®¸å¤šç°æœ‰çš„åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ã€‚Ember å›¢é˜Ÿç›®å‰æ­£åœ¨æ”¹è¿›è¿™ä¸ªå¼•æ“ï¼Œè¿™å°†å¾ˆå¿«å½±å“ Glimmerã€‚ä¾‹å¦‚ï¼Œä»–ä»¬æ­£è¯•å›¾ä¼˜åŒ– GlimmerVM ç”Ÿæˆçš„å­—èŠ‚ç ï¼Œå¹¶å°è¯•å¢é‡æ¸²æŸ“å’Œå†æ°´åˆã€‚å…³äºè¿™äº›ä¸»é¢˜çš„è¿›ä¸€æ­¥é˜…è¯»å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°:[å¾®å…‰è¿›å±•æŠ¥å‘Š](https://www.emberjs.com/blog/2017/10/10/glimmer-progress-report.html)ã€‚å½“ç„¶ï¼ŒReact æœ¬èº«æ˜¯ä¸€ä¸ªéå¸¸æ´»è·ƒçš„é¡¹ç›®ï¼Œå¹¶ä¸”éšç€ä»Šå¹´ Fiber çš„åˆ°æ¥[æ¸²æŸ“å¼•æ“å®Œå…¨æ”¹å˜äº†ã€‚](https://code.facebook.com/posts/1716776591680069/react-16-a-look-inside-an-api-compatible-rewrite-of-our-frontend-ui-library/)

Glimmer çš„ä¸€ä¸ªæœ‰è¶£çš„æ–¹é¢æ˜¯ï¼Œå®ƒä¾èµ– ES6 ç±»ä½œä¸ºç»„ä»¶ï¼Œè¿™ä½¿å®ƒåœ¨è¿™æ–¹é¢æ›´åƒ React è€Œä¸æ˜¯ Emberï¼Œè¿™è§£é‡Šäº†ä¸€äº›ç›¸ä¼¼ä¹‹å¤„ã€‚åŒæ—¶ï¼Œè¿™ä¸¤ç§æ–¹æ³•åœ¨ç»„ä»¶çŠ¶æ€ç®¡ç†ã€æ¨¡æ¿è¯­è¨€å’Œæ“ä½œ DOM çš„åº•å±‚æœºåˆ¶æ–¹é¢æœ‰æ‰€ä¸åŒã€‚è‡ªç„¶ï¼ŒReact æä¾›äº†æ›´å¹¿æ³›çš„åŠŸèƒ½ï¼Œå› ä¸º API æ¯” Glimmer çš„æ›´å¤§ï¼Œåè€…åªè¦†ç›–äº†æœ€åŸºæœ¬çš„éœ€æ±‚ï¼Œè‡³å°‘ç›®å‰æ˜¯è¿™æ ·ã€‚

ä½œä¸ºä¸€å web å¼€å‘äººå‘˜ï¼Œæˆ‘è§‰å¾—äº†è§£ä¸åŒåº“ä¹‹é—´çš„æ¯”è¾ƒå¾ˆæœ‰è¶£ã€‚æˆ‘ä»¬å·²ç»çœ‹åˆ°äº†å‰ç«¯ç¯å¢ƒä¸­çš„ UI åº“å¦‚ä½•æ•´åˆç»„ä»¶çš„æ¶æ„ï¼Œé‡‡ç”¨ ES6/ES7 ä¹ æƒ¯ç”¨æ³•å’Œå¥½ä¸œè¥¿ï¼Œå¹¶åœ¨å¯è®¿é—®çš„ API å’Œå¯é çš„å‘ˆç°æ€§èƒ½ä¹‹é—´å¯»æ‰¾å¹³è¡¡ã€‚